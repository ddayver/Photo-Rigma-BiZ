<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Photo-Rigma-BiZ: Интерфейс Work_Interface</title>
<link rel="icon" href="../../favicon.ico" type="image/x-icon" />
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo-1.png"/></td>
  <td id="projectalign">
   <div id="projectname">Photo-Rigma-BiZ<span id="projectnumber">&#160;0.4.1</span>
   </div>
   <div id="projectbrief">Gallery_Photo-Rigma-BiZ</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Поиск',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('da/d79/interfacePhotoRigma_1_1Interfaces_1_1Work__Interface.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Загрузка...</div>
<div class="SRStatus" id="Searching">Поиск...</div>
<div class="SRStatus" id="NoMatches">Не найдено</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Открытые члены</a> &#124;
<a href="#pub-static-methods">Открытые статические члены</a> &#124;
<a href="../../d2/d16/interfacePhotoRigma_1_1Interfaces_1_1Work__Interface-members.html">Полный список членов класса</a>  </div>
  <div class="headertitle"><div class="title">Интерфейс Work_Interface</div></div>
</div><!--header-->
<div class="contents">

<p>Интерфейс для центральной точки приложения.  
 <a href="#details">Подробнее...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Открытые члены</h2></td></tr>
<tr class="memitem:aed2ddce38e1559f3014f076e11a2cbe9" id="r_aed2ddce38e1559f3014f076e11a2cbe9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aed2ddce38e1559f3014f076e11a2cbe9">set_lang</a> (string $lang='main')</td></tr>
<tr class="memdesc:aed2ddce38e1559f3014f076e11a2cbe9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Устанавливает языковые данные из файла и передаёт их в дочерние классы.  <br /></td></tr>
<tr class="separator:aed2ddce38e1559f3014f076e11a2cbe9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75c62c77591a021c5555660ce20e84b3" id="r_a75c62c77591a021c5555660ce20e84b3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a75c62c77591a021c5555660ce20e84b3">set_user</a> (<a class="el" href="../../dc/d14/interfacePhotoRigma_1_1Interfaces_1_1User__Interface.html">User_Interface</a> $user)</td></tr>
<tr class="memdesc:a75c62c77591a021c5555660ce20e84b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Установка объекта пользователя через сеттер.  <br /></td></tr>
<tr class="separator:a75c62c77591a021c5555660ce20e84b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e6ea2a212c3c2dee206a1753b673b7d" id="r_a6e6ea2a212c3c2dee206a1753b673b7d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6e6ea2a212c3c2dee206a1753b673b7d">check_input</a> (string $source_name, string $field, array $options=[])</td></tr>
<tr class="memdesc:a6e6ea2a212c3c2dee206a1753b673b7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Проверяет входные данные из различных источников.  <br /></td></tr>
<tr class="separator:a6e6ea2a212c3c2dee206a1753b673b7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e1a4ab6b213ada0d89c77a24d8ffe32" id="r_a1e1a4ab6b213ada0d89c77a24d8ffe32"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1e1a4ab6b213ada0d89c77a24d8ffe32">url_check</a> ()</td></tr>
<tr class="memdesc:a1e1a4ab6b213ada0d89c77a24d8ffe32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Проверяет URL на наличие вредоносного кода.  <br /></td></tr>
<tr class="separator:a1e1a4ab6b213ada0d89c77a24d8ffe32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fd7e97a953487a9422281b97bd6f083" id="r_a7fd7e97a953487a9422281b97bd6f083"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7fd7e97a953487a9422281b97bd6f083">check_field</a> (string $field, string|false $regexp=false, bool $not_zero=false)</td></tr>
<tr class="memdesc:a7fd7e97a953487a9422281b97bd6f083"><td class="mdescLeft">&#160;</td><td class="mdescRight">Проверяет содержимое поля на соответствие регулярному выражению или другим условиям.  <br /></td></tr>
<tr class="separator:a7fd7e97a953487a9422281b97bd6f083"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19ab20c34a49c9684a03c09c62f8af46" id="r_a19ab20c34a49c9684a03c09c62f8af46"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a19ab20c34a49c9684a03c09c62f8af46">gen_captcha</a> ()</td></tr>
<tr class="memdesc:a19ab20c34a49c9684a03c09c62f8af46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Генерирует математический CAPTCHA-вопрос и ответ.  <br /></td></tr>
<tr class="separator:a19ab20c34a49c9684a03c09c62f8af46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4289bbbeca07e599a9366a812d069972" id="r_a4289bbbeca07e599a9366a812d069972"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4289bbbeca07e599a9366a812d069972">filt_email</a> (string $email)</td></tr>
<tr class="memdesc:a4289bbbeca07e599a9366a812d069972"><td class="mdescLeft">&#160;</td><td class="mdescRight">Заменяет символы в email-адресах для защиты от парсинга ботами.  <br /></td></tr>
<tr class="separator:a4289bbbeca07e599a9366a812d069972"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dfb943f9b750ec6e1e2924a9620c7f5" id="r_a4dfb943f9b750ec6e1e2924a9620c7f5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4dfb943f9b750ec6e1e2924a9620c7f5">category</a> (int $cat_id=0, int $user_flag=0)</td></tr>
<tr class="memdesc:a4dfb943f9b750ec6e1e2924a9620c7f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Формирует информационную строку для категории или пользовательского альбома.  <br /></td></tr>
<tr class="separator:a4dfb943f9b750ec6e1e2924a9620c7f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84a1eeee53079a8e60fea1d1e0d94639" id="r_a84a1eeee53079a8e60fea1d1e0d94639"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a84a1eeee53079a8e60fea1d1e0d94639">del_photo</a> (int $photo_id)</td></tr>
<tr class="memdesc:a84a1eeee53079a8e60fea1d1e0d94639"><td class="mdescLeft">&#160;</td><td class="mdescRight">Удаляет изображение с указанным идентификатором, а также все упоминания об этом изображении.  <br /></td></tr>
<tr class="separator:a84a1eeee53079a8e60fea1d1e0d94639"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfa7c6c53ae460403a3d0b3923e71a90" id="r_abfa7c6c53ae460403a3d0b3923e71a90"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abfa7c6c53ae460403a3d0b3923e71a90">news</a> (int $news_id_or_limit, string $act)</td></tr>
<tr class="memdesc:abfa7c6c53ae460403a3d0b3923e71a90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Получает данные о новостях в зависимости от типа запроса.  <br /></td></tr>
<tr class="separator:abfa7c6c53ae460403a3d0b3923e71a90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c2ee4da4bf10547c3aff7296d707c66" id="r_a9c2ee4da4bf10547c3aff7296d707c66"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9c2ee4da4bf10547c3aff7296d707c66">get_languages</a> ()</td></tr>
<tr class="memdesc:a9c2ee4da4bf10547c3aff7296d707c66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Загружает доступные языки из директории <code>/language/</code>.  <br /></td></tr>
<tr class="separator:a9c2ee4da4bf10547c3aff7296d707c66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d2f43c00af0c9574caa0455df82c613" id="r_a8d2f43c00af0c9574caa0455df82c613"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8d2f43c00af0c9574caa0455df82c613">get_themes</a> ()</td></tr>
<tr class="memdesc:a8d2f43c00af0c9574caa0455df82c613"><td class="mdescLeft">&#160;</td><td class="mdescRight">Загружает доступные темы из директории <code>/themes/</code>.  <br /></td></tr>
<tr class="separator:a8d2f43c00af0c9574caa0455df82c613"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a930a20fbdd1b0e274b7e648d966516c5" id="r_a930a20fbdd1b0e274b7e648d966516c5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a930a20fbdd1b0e274b7e648d966516c5">create_photo</a> (string $type='top', int $id_photo=0)</td></tr>
<tr class="memdesc:a930a20fbdd1b0e274b7e648d966516c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Генерирует блок данных для вывода изображений различных типов.  <br /></td></tr>
<tr class="separator:a930a20fbdd1b0e274b7e648d966516c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35f2b39b21e9ee39a5878708e9211198" id="r_a35f2b39b21e9ee39a5878708e9211198"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a35f2b39b21e9ee39a5878708e9211198">process_rating</a> (string $table, int $photo_id, int $user_id, int $rate_value)</td></tr>
<tr class="memdesc:a35f2b39b21e9ee39a5878708e9211198"><td class="mdescLeft">&#160;</td><td class="mdescRight">Добавляет новую оценку в таблицу и возвращает среднюю оценку фотографии.  <br /></td></tr>
<tr class="separator:a35f2b39b21e9ee39a5878708e9211198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af970fc714c16e27d2d60d698522a8504" id="r_af970fc714c16e27d2d60d698522a8504"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af970fc714c16e27d2d60d698522a8504">create_menu</a> (string $action, int $menu)</td></tr>
<tr class="memdesc:af970fc714c16e27d2d60d698522a8504"><td class="mdescLeft">&#160;</td><td class="mdescRight">Формирует массив данных для меню в зависимости от типа и активного пункта.  <br /></td></tr>
<tr class="separator:af970fc714c16e27d2d60d698522a8504"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f3df8874c79377e6a8b4398ea6ad774" id="r_a1f3df8874c79377e6a8b4398ea6ad774"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1f3df8874c79377e6a8b4398ea6ad774">template_user</a> ()</td></tr>
<tr class="memdesc:a1f3df8874c79377e6a8b4398ea6ad774"><td class="mdescLeft">&#160;</td><td class="mdescRight">Формирует данные для блока пользователя.  <br /></td></tr>
<tr class="separator:a1f3df8874c79377e6a8b4398ea6ad774"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a116ebcf799d07566a74e7e765aecc1b7" id="r_a116ebcf799d07566a74e7e765aecc1b7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a116ebcf799d07566a74e7e765aecc1b7">template_stat</a> ()</td></tr>
<tr class="memdesc:a116ebcf799d07566a74e7e765aecc1b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Генерирует массив статистических данных для шаблона.  <br /></td></tr>
<tr class="separator:a116ebcf799d07566a74e7e765aecc1b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9143fed87a3064985e0b51fe5fbb4ac3" id="r_a9143fed87a3064985e0b51fe5fbb4ac3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9143fed87a3064985e0b51fe5fbb4ac3">template_best_user</a> (int $best_user=1)</td></tr>
<tr class="memdesc:a9143fed87a3064985e0b51fe5fbb4ac3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Формирует список пользователей, загрузивших наибольшее количество изображений.  <br /></td></tr>
<tr class="separator:a9143fed87a3064985e0b51fe5fbb4ac3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a096b7e5c3f9fb908fbb30e1adc2ac61b" id="r_a096b7e5c3f9fb908fbb30e1adc2ac61b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a096b7e5c3f9fb908fbb30e1adc2ac61b">size_image</a> (string $path_image)</td></tr>
<tr class="memdesc:a096b7e5c3f9fb908fbb30e1adc2ac61b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Вычисляет размеры для вывода эскиза изображения.  <br /></td></tr>
<tr class="separator:a096b7e5c3f9fb908fbb30e1adc2ac61b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af37eb2b0693905dd71dd677f86d47831" id="r_af37eb2b0693905dd71dd677f86d47831"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af37eb2b0693905dd71dd677f86d47831">image_resize</a> (string $full_path, string $thumbnail_path)</td></tr>
<tr class="memdesc:af37eb2b0693905dd71dd677f86d47831"><td class="mdescLeft">&#160;</td><td class="mdescRight">Изменяет размер изображения.  <br /></td></tr>
<tr class="separator:af37eb2b0693905dd71dd677f86d47831"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfcd1cb7963a860013ca9ca1898f54f1" id="r_adfcd1cb7963a860013ca9ca1898f54f1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adfcd1cb7963a860013ca9ca1898f54f1">no_photo</a> ()</td></tr>
<tr class="memdesc:adfcd1cb7963a860013ca9ca1898f54f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Возвращает данные для отсутствующего изображения.  <br /></td></tr>
<tr class="separator:adfcd1cb7963a860013ca9ca1898f54f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89d4e7cb491d0c91282d16ff5abe3138" id="r_a89d4e7cb491d0c91282d16ff5abe3138"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a89d4e7cb491d0c91282d16ff5abe3138">fix_file_extension</a> (string $full_path)</td></tr>
<tr class="memdesc:a89d4e7cb491d0c91282d16ff5abe3138"><td class="mdescLeft">&#160;</td><td class="mdescRight">Выводит изображение через HTTP.  <br /></td></tr>
<tr class="separator:a89d4e7cb491d0c91282d16ff5abe3138"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaaf358ddc8223e4a5a479f645fc43da8" id="r_aaaf358ddc8223e4a5a479f645fc43da8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaaf358ddc8223e4a5a479f645fc43da8">remove_directory</a> (string $path)</td></tr>
<tr class="memdesc:aaaf358ddc8223e4a5a479f645fc43da8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Удаляет директорию и её содержимое, предварительно проверяя права доступа.  <br /></td></tr>
<tr class="separator:aaaf358ddc8223e4a5a479f645fc43da8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a935337e705b7a1b9ea422d2e04932109" id="r_a935337e705b7a1b9ea422d2e04932109"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a935337e705b7a1b9ea422d2e04932109">create_directory</a> (string $directory_name)</td></tr>
<tr class="memdesc:a935337e705b7a1b9ea422d2e04932109"><td class="mdescLeft">&#160;</td><td class="mdescRight">Создаёт директории для категории и копирует файлы <code><a class="el" href="../../de/d20/index_8php.html" title="Точка входа в приложение PhotoRigma.">index.php</a></code>.  <br /></td></tr>
<tr class="separator:a935337e705b7a1b9ea422d2e04932109"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Открытые статические члены</h2></td></tr>
<tr class="memitem:ac28b2ada9c4f3a71f7a2df9bb1387413" id="r_ac28b2ada9c4f3a71f7a2df9bb1387413"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac28b2ada9c4f3a71f7a2df9bb1387413">return_bytes</a> (string|int $val)</td></tr>
<tr class="memdesc:ac28b2ada9c4f3a71f7a2df9bb1387413"><td class="mdescLeft">&#160;</td><td class="mdescRight">Преобразует размер в формате "число[K|M|G]" в количество байт.  <br /></td></tr>
<tr class="separator:ac28b2ada9c4f3a71f7a2df9bb1387413"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9ac814e0001840a4cdbf826d0d6e53e" id="r_ad9ac814e0001840a4cdbf826d0d6e53e"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad9ac814e0001840a4cdbf826d0d6e53e">encodename</a> (string $string)</td></tr>
<tr class="memdesc:ad9ac814e0001840a4cdbf826d0d6e53e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Транслитерирует строку и заменяет знаки пунктуации на "_".  <br /></td></tr>
<tr class="separator:ad9ac814e0001840a4cdbf826d0d6e53e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3163f8e7d71cad9003bf5b3efe644712" id="r_a3163f8e7d71cad9003bf5b3efe644712"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3163f8e7d71cad9003bf5b3efe644712">ubb</a> (string $text)</td></tr>
<tr class="memdesc:a3163f8e7d71cad9003bf5b3efe644712"><td class="mdescLeft">&#160;</td><td class="mdescRight">Преобразует BBCode в HTML.  <br /></td></tr>
<tr class="separator:a3163f8e7d71cad9003bf5b3efe644712"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa76be87bb05ca60ff16f6d47f5a44c32" id="r_aa76be87bb05ca60ff16f6d47f5a44c32"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa76be87bb05ca60ff16f6d47f5a44c32">utf8_wordwrap</a> (string $str, int $width=70, string $break=PHP_EOL)</td></tr>
<tr class="memdesc:aa76be87bb05ca60ff16f6d47f5a44c32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Разбивает строку на несколько строк ограниченной длины.  <br /></td></tr>
<tr class="separator:aa76be87bb05ca60ff16f6d47f5a44c32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41518918c225073130bc7a73983d72ff" id="r_a41518918c225073130bc7a73983d72ff"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a41518918c225073130bc7a73983d72ff">validate_mime_type</a> (string $real_mime_type)</td></tr>
<tr class="memdesc:a41518918c225073130bc7a73983d72ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Проверяет, поддерживается ли указанный MIME-тип изображения.  <br /></td></tr>
<tr class="separator:a41518918c225073130bc7a73983d72ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ecb9d3a6cba675b7a2d72ddc14b53f3" id="r_a8ecb9d3a6cba675b7a2d72ddc14b53f3"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8ecb9d3a6cba675b7a2d72ddc14b53f3">clean_field</a> (string $field)</td></tr>
<tr class="memdesc:a8ecb9d3a6cba675b7a2d72ddc14b53f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Очищает строку от HTML-тегов и специальных символов.  <br /></td></tr>
<tr class="separator:a8ecb9d3a6cba675b7a2d72ddc14b53f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Подробное описание</h2>
<div class="textblock"><p>Интерфейс для центральной точки приложения. </p>
<p>Этот интерфейс определяет контракт для класса <code><a class="el" href="../../d3/d64/classWork.html" title="Основной класс приложения.">Work</a></code>, который является центральной точкой приложения. Он предоставляет методы для управления языковыми данными, объектом пользователя и обеспечивает доступ к функционалу дочерних компонентов через фасады. Все методы вызываются через класс <code><a class="el" href="../../d3/d64/classWork.html" title="Основной класс приложения.">Work</a></code>. Основные возможности:</p><ul>
<li>Установка языковых данных из файла (<code>set_lang</code>).</li>
<li>Установка объекта пользователя через сеттер (<code>set_user</code>).</li>
<li>Делегирование вызовов методов дочерним компонентам:<ul>
<li><code>Work_Helper_Interface</code>: Вспомогательные методы (например, очистка строк, преобразование размеров).</li>
<li><code>Work_CoreLogic_Interface</code>: Базовая логика приложения (например, работа с категориями, новостями).</li>
<li><code>Work_Image_Interface</code>: Работа с изображениями (например, изменение размеров, вывод эскизов).</li>
<li><code>Work_Template_Interface</code>: Формирование данных для шаблонов (например, меню, статистика).</li>
<li><code>Work_Security_Interface</code>: Безопасность приложения (например, проверка входных данных, CAPTCHA).</li>
</ul>
</li>
</ul>
<dl class="section note"><dt>Заметки</dt><dd>Методы данного интерфейса зависят от реализации дочерних компонентов. Некорректная реализация дочерних интерфейсов может привести к ошибкам в работе приложения.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Все методы должны быть реализованы в классе <code><a class="el" href="../../d3/d64/classWork.html" title="Основной класс приложения.">Work</a></code>. Неполная реализация может привести к непредсказуемому поведению приложения.</dd></dl>
<dl class="section see"><dt>См. также</dt><dd><a class="el" href="../../dc/d14/interfacePhotoRigma_1_1Interfaces_1_1User__Interface.html" title="Интерфейс для работы с пользователями и группами.">PhotoRigma\Interfaces\User_Interface</a> Интерфейс для работы с пользователями. </dd>
<dd>
<a class="el" href="../../df/d09/interfacePhotoRigma_1_1Interfaces_1_1Work__Helper__Interface.html" title="Интерфейс для вспомогательных методов.">PhotoRigma\Interfaces\Work_Helper_Interface</a> Интерфейс для вспомогательных методов. </dd>
<dd>
<a class="el" href="../../df/d80/interfacePhotoRigma_1_1Interfaces_1_1Work__CoreLogic__Interface.html" title="Интерфейс, определяющий контракт для классов, реализующих базовую логику приложения.">PhotoRigma\Interfaces\Work_CoreLogic_Interface</a> Интерфейс для базовой логики приложения. </dd>
<dd>
<a class="el" href="../../d1/de5/interfacePhotoRigma_1_1Interfaces_1_1Work__Image__Interface.html" title="Интерфейс для работы с изображениями.">PhotoRigma\Interfaces\Work_Image_Interface</a> Интерфейс для работы с изображениями. </dd>
<dd>
<a class="el" href="../../d5/d9b/interfacePhotoRigma_1_1Interfaces_1_1Work__Template__Interface.html" title="Интерфейс для формирования данных для шаблонов.">PhotoRigma\Interfaces\Work_Template_Interface</a> Интерфейс для формирования данных шаблонов. </dd>
<dd>
<a class="el" href="../../da/d2a/interfacePhotoRigma_1_1Interfaces_1_1Work__Security__Interface.html" title="Интерфейс для работы с безопасностью.">PhotoRigma\Interfaces\Work_Security_Interface</a> Интерфейс для работы с безопасностью. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../d3/dee/Work__Interface_8php_source.html">Work_Interface.php</a> строка <a class="el" href="../../d3/dee/Work__Interface_8php_source.html#l00098">98</a></p>
</div><h2 class="groupheader">Методы</h2>
<a id="a4dfb943f9b750ec6e1e2924a9620c7f5" name="a4dfb943f9b750ec6e1e2924a9620c7f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dfb943f9b750ec6e1e2924a9620c7f5">&#9670;&#160;</a></span>category()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">category </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$cat_id</em></span><span class="paramdefsep"> = </span><span class="paramdefval">0</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$user_flag</em></span><span class="paramdefsep"> = </span><span class="paramdefval">0</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Формирует информационную строку для категории или пользовательского альбома. </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет корректность входных параметров:<ul>
<li><code>$cat_id</code> должен быть целым числом &gt;= <code>0</code>.</li>
<li><code>$user_flag</code> должен принимать значения <code>0</code> (категория) или <code>1</code> (пользовательский альбом).</li>
</ul>
</li>
<li>Получает данные о категории или пользовательском альбоме из базы данных.</li>
<li>Подсчитывает количество фотографий, связанных с категорией или альбомом.</li>
<li>Формирует результирующий массив с информацией о категории или альбоме, включая название, описание, количество фотографий, данные о последней и лучшей фотографии, а также ссылки на них.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$cat_id</td><td>Идентификатор категории или пользователя (если <code>$user_flag = 1</code>):<ul>
<li>Должен быть целым числом &gt;= <code>0</code>. Пример: <code>5</code> (для категории) или <code>123</code> (для пользовательского альбома). </li>
</ul>
</td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$user_flag</td><td>Флаг, указывающий формировать ли информацию о категории (<code>0</code>) или пользовательском альбоме (<code>1</code>):<ul>
<li>По умолчанию: <code>0</code>.</li>
<li>Допустимые значения: <code>0</code> или <code>1</code>.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>array Информационная строка для категории или пользовательского альбома:<ul>
<li>'name' (string): Название категории или альбома.</li>
<li>'description' (string): Описание категории или альбома.</li>
<li>'count_photo' (int): Количество фотографий.</li>
<li>'last_photo' (string): Форматированное название последней фотографии.</li>
<li>'top_photo' (string): Форматированное название лучшей фотографии.</li>
<li>'url_cat' (string): Ссылка на категорию или альбом.</li>
<li>'url_last_photo' (string): Ссылка на последнюю фотографию.</li>
<li>'url_top_photo' (string): Ссылка на лучшую фотографию.</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Выбрасывается, если входные параметры имеют некорректный тип или значение. Пример сообщения: cat_id и user_flag должны быть 0 или положительным целым числом. </td></tr>
    <tr><td class="paramname">PDOException</td><td>Выбрасывается, если возникают ошибки при получении данных из базы данных. Пример сообщения: Не удалось получить данные категории или пользователя. </td></tr>
    <tr><td class="paramname">Exception</td><td>При выполнении запросов к базам данных.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Используются константы:<ul>
<li>TBL_CATEGORY: Таблица для хранения данных о категориях (<code>category</code>).</li>
<li>TBL_USERS: Таблица для хранения данных о пользователях (<code>users</code>).</li>
<li>TBL_PHOTO: Таблица для хранения данных о фотографиях (<code>photo</code>).</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Убедитесь, что:<ul>
<li>Входные параметры <code>$cat_id</code> и <code>$user_flag</code> корректны.</li>
<li>База данных содержит необходимые данные для выполнения запросов.</li>
<li>Пользователь имеет права на просмотр фотографий (если это требуется).</li>
</ul>
</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a> = <span class="keyword">new</span> Work();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Получение данных о категории с ID = 5</span></div>
<div class="line">$category_data = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;category(5, 0);</div>
<div class="line">print_r($category_data);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Получение данных о пользовательском альбоме с ID = 123</span></div>
<div class="line">$user_album_data = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;category(123, 1);</div>
<div class="line">print_r($user_album_data);</div>
<div class="ttc" id="anamespacePhotoRigma_html_a2429001fb0fa404b4fe0ab42a91a9a48"><div class="ttname"><a href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">PhotoRigma\$work</a></div><div class="ttdeci">$work</div><div class="ttdoc">Создание объекта класса Work.</div><div class="ttdef"><b>Определения</b> <a href="../../de/d20/index_8php_source.html#l00265">index.php:265</a></div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="a7fd7e97a953487a9422281b97bd6f083" name="a7fd7e97a953487a9422281b97bd6f083"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fd7e97a953487a9422281b97bd6f083">&#9670;&#160;</a></span>check_field()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">check_field </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$field</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string|false</td>          <td class="paramname"><span class="paramname"><em>$regexp</em></span><span class="paramdefsep"> = </span><span class="paramdefval">false</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>$not_zero</em></span><span class="paramdefsep"> = </span><span class="paramdefval">false</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Проверяет содержимое поля на соответствие регулярному выражению или другим условиям. </p>
<p>Этот метод выполняет следующие проверки:</p><ol type="1">
<li>Если задано регулярное выражение ($regexp):<ul>
<li>Проверяет корректность регулярного выражения.</li>
<li>Проверяет соответствие значения поля этому выражению.</li>
</ul>
</li>
<li>Если флаг $not_zero установлен, проверяет, что значение поля не равно '0'.</li>
<li>Проверяет, что значение поля не содержит запрещённых паттернов из конфигурации.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$field</td><td>Значение поля для проверки:<ul>
<li>Указывается строковое значение, которое необходимо проверить. </li>
</ul>
</td></tr>
    <tr><td class="paramtype">string&#160;|&#160;false</td><td class="paramname">$regexp</td><td>Регулярное выражение (необязательно). Если задано, значение должно соответствовать этому выражению. Если регулярное выражение некорректно, метод завершает выполнение с ошибкой. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$not_zero</td><td>Флаг, указывающий, что значение не должно быть числом 0:<ul>
<li>Если флаг установлен, а значение равно '0', проверка завершается с ошибкой.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>bool True, если поле прошло все проверки, иначе False. Проверки включают соответствие регулярному выражению, отсутствие запрещённых паттернов и выполнение условия $not_zero (если оно задано).</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td>Выбрасывается при возникновении ошибок логирования информации.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Метод использует конфигурацию для проверки на наличие запрещённых паттернов. Конфигурация должна содержать массив скомпилированных регулярных выражений.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод зависит от корректности данных в конфигурации правил проверки. Если правила некорректны, результат может быть непредсказуемым. Также важно убедиться, что регулярное выражение ($regexp) корректно перед использованием.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a> = <span class="keyword">new</span> Work();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Проверка поля на соответствие регулярному выражению и условию not_zero</span></div>
<div class="line">$field_value = <span class="stringliteral">&quot;example123&quot;</span>;</div>
<div class="line">$regexp = <span class="stringliteral">&quot;/^[a-z0-9]+$/i&quot;</span>;</div>
<div class="line">$is_valid = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;check_field($field_value, $regexp, <span class="keyword">true</span>);</div>
<div class="line"><span class="keywordflow">if</span> ($is_valid) {</div>
<div class="line">    echo <span class="stringliteral">&quot;Поле прошло проверку.&quot;</span>;</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    echo <span class="stringliteral">&quot;Поле не прошло проверку.&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a6e6ea2a212c3c2dee206a1753b673b7d" name="a6e6ea2a212c3c2dee206a1753b673b7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e6ea2a212c3c2dee206a1753b673b7d">&#9670;&#160;</a></span>check_input()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">check_input </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$source_name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$field</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$options</em></span><span class="paramdefsep"> = </span><span class="paramdefval">[]</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Проверяет входные данные из различных источников. </p>
<p>Этот метод выполняет проверку данных из различных источников ($_GET, $_POST, $_SESSION, $_COOKIE, $_FILES) на соответствие заданным условиям. Поддерживаются следующие типы проверок:</p><ul>
<li>Проверка наличия поля в источнике данных (параметр 'isset').</li>
<li>Проверка, что значение поля не пустое (параметр 'empty').</li>
<li>Проверка значения поля по регулярному выражению (параметр 'regexp').</li>
<li>Проверка, что значение поля не равно нулю (параметр 'not_zero').</li>
<li>Проверка размера файла для $_FILES (параметр 'max_size') и его MIME-типа.</li>
</ul>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$source_name</td><td>Источник данных ($_GET, $_POST, $_SESSION, $_COOKIE, $_FILES):<ul>
<li>Должен быть одним из допустимых значений: '_GET', '_POST', '_SESSION', '_COOKIE', '_FILES'. </li>
</ul>
</td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$field</td><td>Поле для проверки (имя ключа в массиве источника данных):<ul>
<li>Указывается имя ключа, которое необходимо проверить. </li>
</ul>
</td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$options</td><td>Дополнительные параметры проверки:<ul>
<li>Ключ 'isset' (bool, опционально): Проверять наличие поля в источнике данных.</li>
<li>Ключ 'empty' (bool, опционально): Проверять, что значение поля не пустое.</li>
<li>Ключ 'regexp' (string|false, опционально): Регулярное выражение для проверки значения поля.</li>
<li>Ключ 'not_zero' (bool, опционально): Проверять, что значение поля не равно нулю.</li>
<li>Ключ 'max_size' (int, опционально): Максимальный размер файла (в байтах) для $_FILES.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>bool True, если данные прошли проверку, иначе False. Для $_FILES также учитывается корректность MIME-типа и размера файла.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">RuntimeException</td><td>Выбрасывается, если MIME-тип загруженного файла не поддерживается. </td></tr>
    <tr><td class="paramname">Exception</td><td>Выбрасывается при возникновении ошибок логирования информации.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Для источника данных <code>_SESSION</code> используется внутреннее свойство класса. Метод зависит от корректности данных в источниках ($_GET, $_POST, $_SESSION, $_COOKIE, $_FILES). Если источник данных повреждён или содержит некорректные значения, результат может быть непредсказуемым.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Убедитесь, что переданные параметры проверки ($options) корректны и соответствуют требованиям.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a> = <span class="keyword">new</span> Work();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Проверка поля $_POST[&#39;username&#39;] на наличие и непустое значение</span></div>
<div class="line">$is_valid = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;check_input(<span class="stringliteral">&#39;_POST&#39;</span>, <span class="stringliteral">&#39;username&#39;</span>, [</div>
<div class="line">    <span class="stringliteral">&#39;isset&#39;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">    <span class="stringliteral">&#39;empty&#39;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">]);</div>
<div class="line"><span class="keywordflow">if</span> ($is_valid) {</div>
<div class="line">    echo <span class="stringliteral">&quot;Поле username прошло проверку.&quot;</span>;</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    echo <span class="stringliteral">&quot;Поле username не прошло проверку.&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a8ecb9d3a6cba675b7a2d72ddc14b53f3" name="a8ecb9d3a6cba675b7a2d72ddc14b53f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ecb9d3a6cba675b7a2d72ddc14b53f3">&#9670;&#160;</a></span>clean_field()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static clean_field </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$field</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Очищает строку от HTML-тегов и специальных символов. </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет, что входные данные не являются пустыми (<code>null</code> или пустая строка). Если данные пусты, возвращает пустую строку (&lsquo;&rsquo;'<code>).</code></li>
<li><code>Преобразует входные данные в кодировку UTF-8.</code></li>
<li><code>Удаляет все HTML-теги из строки.</code></li>
<li><code>Экранирует специальные символы (например,</code>&lt;<code>,</code>&gt;<code>,</code>&amp;<code>,</code>"&lt;tt&gt;,&lt;/tt&gt;'`) для защиты от XSS-атак.
         Метод используется для безопасной обработки пользовательского ввода.

@param string $field Строка или данные, которые могут быть преобразованы в строку:
                     - Если входные данные пусты (&lt;tt&gt;null&lt;/tt&gt; или пустая строка), метод вернёт пустую строку (&amp;lsquo;&amp;rsquo;'`).

@return string Очищенная строка или пустая строка (&amp;lsquo;&amp;rsquo;'`), если входные данные пусты.

@warning Метод не обрабатывает вложенные структуры данных (например, массивы).
         Убедитесь, что входные данные могут быть преобразованы в строку.

Пример использования:
@code 
// Очистка строки от HTML-тегов и специальных символов
$dirty_input = '&lt;script&gt;alert("XSS")</li>
</ol>
<p>&lt;/script&gt;'; $cleaned = Work::clean_field($dirty_input); echo $cleaned; // Выведет: &lt;script&gt;alert(&quot;XSS&quot;)&lt;/script&gt;  </p>

</div>
</div>
<a id="a935337e705b7a1b9ea422d2e04932109" name="a935337e705b7a1b9ea422d2e04932109"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a935337e705b7a1b9ea422d2e04932109">&#9670;&#160;</a></span>create_directory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">create_directory </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$directory_name</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Создаёт директории для категории и копирует файлы <code><a class="el" href="../../de/d20/index_8php.html" title="Точка входа в приложение PhotoRigma.">index.php</a></code>. </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Формирует пути для директорий галереи и миниатюр на основе конфигурации.</li>
<li>Проверяет права доступа к родительским директориям.</li>
<li>Рекурсивно создаёт директории для галереи и миниатюр.</li>
<li>Копирует и модифицирует файлы <code><a class="el" href="../../de/d20/index_8php.html" title="Точка входа в приложение PhotoRigma.">index.php</a></code> для новых директорий.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$directory_name</td><td>Имя директории:<ul>
<li>Должен быть строкой, содержащей только допустимые символы для имён директорий.</li>
<li>Не должен содержать запрещённых символов (например, <code>\/:*?"&lt;&gt;|&lt;/tt&gt;).

@return bool Возвращает &lt;tt&gt;true&lt;/tt&gt;, если директории успешно созданы и файлы скопированы.

@throws RuntimeException Выбрасывается в следующих случаях:
                          - Если родительская директория недоступна для записи.
                          - Если не удалось создать директории.
                          - Если исходные файлы &lt;tt&gt;index.php&lt;/tt&gt; не существуют.
                          - Если не удалось прочитать или записать файлы &lt;tt&gt;index.php&lt;/tt&gt;.

@warning Используйте этот метод с осторожностью, так как он создаёт директории и изменяет файлы.

Пример использования:
@code 
// Создание объекта
$work = new Work();

// Создание директорий для новой категории
$directoryName = 'new_category';
$result = $work-&gt;create_directory($directoryName);
if ($result) {
    echo "Директории успешно созданы!"; }  </code></li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af970fc714c16e27d2d60d698522a8504" name="af970fc714c16e27d2d60d698522a8504"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af970fc714c16e27d2d60d698522a8504">&#9670;&#160;</a></span>create_menu()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">create_menu </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$action</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$menu</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Формирует массив данных для меню в зависимости от типа и активного пункта. </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет корректность входных параметров:<ul>
<li>Тип меню должен быть равен одной из констант: SHORT_MENU или LONG_MENU.</li>
<li>Активный пункт меню должен быть строкой.</li>
</ul>
</li>
<li>Определяет тип меню:<ul>
<li>SHORT_MENU: Краткое горизонтальное меню.</li>
<li>LONG_MENU: Полное вертикальное меню.</li>
</ul>
</li>
<li>Получает данные меню из базы данных:<ul>
<li>Условие выборки зависит от типа меню.</li>
<li>Данные фильтруются на основе прав доступа текущего пользователя.</li>
</ul>
</li>
<li>Для каждого пункта меню проверяются права доступа:<ul>
<li>Если пункт видим, он добавляется в результат.</li>
<li>URL формируется на основе активного пункта меню.</li>
<li>Название пункта локализуется с использованием языковых строк. Метод предназначен для создания данных меню.</li>
</ul>
</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$action</td><td>Активный пункт меню:<ul>
<li>Указывается строка, соответствующая активному пункту меню (например, 'home', 'profile'). </li>
</ul>
</td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$menu</td><td>Тип меню:<ul>
<li>SHORT_MENU (0): Краткое горизонтальное меню.</li>
<li>LONG_MENU (1): Полное вертикальное меню. Другие значения недопустимы и приведут к выбросу исключения InvalidArgumentException.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>array Массив с данными для меню. Каждый элемент массива содержит:<ul>
<li>Ключ 'url': URL пункта меню (null, если пункт активен).</li>
<li>Ключ 'name': Название пункта меню (локализованное или дефолтное значение). Если меню пустое, возвращается пустой массив.</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Выбрасывается, если передан некорректный $menu или $action. </td></tr>
    <tr><td class="paramname">RuntimeException</td><td>Выбрасывается, если произошла ошибка при выполнении запроса к базе данных. </td></tr>
    <tr><td class="paramname">Exception</td><td>При выполнении запросов к базам данных.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Данные для меню берутся из таблицы базы данных. Константы SHORT_MENU и LONG_MENU определяют тип меню:<ul>
<li>SHORT_MENU: Краткое горизонтальное меню.</li>
<li>LONG_MENU: Полное вертикальное меню.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Убедитесь, что передаваемые параметры корректны, так как это может привести к ошибкам. Также убедитесь, что права доступа пользователя настроены правильно.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a> = <span class="keyword">new</span> Work();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Создание горизонтального меню</span></div>
<div class="line">$short_menu = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;create_menu(<span class="stringliteral">&#39;home&#39;</span>, SHORT_MENU);</div>
<div class="line">print_r($short_menu);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Создание вертикального меню</span></div>
<div class="line">$long_menu = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;create_menu(<span class="stringliteral">&#39;profile&#39;</span>, LONG_MENU);</div>
<div class="line">print_r($long_menu);</div>
</div><!-- fragment --> 
<p class="reference">Перекрестные ссылки <a class="el" href="../../de/d20/index_8php_source.html#l00328">PhotoRigma\$action</a>.</p>

</div>
</div>
<a id="a930a20fbdd1b0e274b7e648d966516c5" name="a930a20fbdd1b0e274b7e648d966516c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a930a20fbdd1b0e274b7e648d966516c5">&#9670;&#160;</a></span>create_photo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">create_photo </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$type</em></span><span class="paramdefsep"> = </span><span class="paramdefval">'top'</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$id_photo</em></span><span class="paramdefsep"> = </span><span class="paramdefval">0</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Генерирует блок данных для вывода изображений различных типов. </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет корректность входных параметров <code>$type</code> и <code>$id_photo</code>.</li>
<li>Проверяет права пользователя на просмотр изображений.</li>
<li>Формирует данные для вывода изображения в зависимости от типа:<ul>
<li>&lsquo;'top&rsquo;<code>: Лучшее изображение (по рейтингу). -</code>'last'<code>: Последнее загруженное изображение. -</code>'cat'<code>: Изображение из конкретной категории по</code>$id_photo<code>. -</code>'rand'`: Любое случайное изображение.</li>
</ul>
</li>
<li>Возвращает массив данных для вывода изображения или данные по умолчанию, если изображение недоступно.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$type</td><td>Тип изображения:<ul>
<li>&lsquo;'top&rsquo;<code>: Лучшее изображение (по рейтингу). -</code>'last'<code>: Последнее загруженное изображение. -</code>'cat'<code>: Изображение из конкретной категории (требует указания</code>$id_photo<code>). -</code>'rand'<code>: Любое случайное изображение. По умолчанию:</code>'top'<code>. Допустимые значения:</code>'top'<code>,</code>'last'<code>,</code>'cat'<code>,</code>'rand'<code>. @param int $id_photo Идентификатор фото. Используется только при</code>$type == 'cat'<code>. Должен быть целым числом &gt;=</code>0<code>. По умолчанию:</code>0`.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>array Массив данных для вывода изображения:<ul>
<li>&lsquo;'name_block&rsquo;<code>(string): Название блока изображения (например, "Лучшее фото"). -</code>'url'<code>(string): URL для просмотра полного изображения. -</code>'thumbnail_url'<code>(string): URL для миниатюры изображения. -</code>'name'<code>(string): Название изображения. -</code>'description'<code>(string): Описание изображения. -</code>'category_name'<code>(string): Название категории. -</code>'category_description'<code>(string): Описание категории. -</code>'rate'<code>(string): Рейтинг изображения (например, "Рейтинг: 5/10"). -</code>'url_user'<code>(string|null): URL профиля пользователя, добавившего изображение. -</code>'real_name'<code>(string): Реальное имя пользователя. -</code>'category_url'<code>(string): URL категории или пользовательского альбома. -</code>'width'<code>(int): Ширина изображения после масштабирования. -</code>'height'` (int): Высота изображения после масштабирования.</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Выбрасывается, если передан недопустимый <code>$type</code> или <code>$id_photo &lt; 0</code>. Пример сообщения: Некорректный идентификатор фотографии | Значение: {$id_photo}. </td></tr>
    <tr><td class="paramname">RuntimeException</td><td>Выбрасывается, если файл изображения недоступен или не существует. </td></tr>
    <tr><td class="paramname">Exception</td><td>Выбрасывается при записи ошибок в лог.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Если изображение недоступно, метод возвращает данные по умолчанию.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Убедитесь, что:<ul>
<li>Пользователь имеет право на просмотр изображений.</li>
<li>Передаются допустимые значения для <code>$type</code> и <code>$id_photo</code>.</li>
</ul>
</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a> = <span class="keyword">new</span> Work();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Получение данных для вывода лучшего изображения</span></div>
<div class="line">$top_photo = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;create_photo(<span class="stringliteral">&#39;top&#39;</span>);</div>
<div class="line">print_r($top_photo);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Получение данных для вывода изображения из категории с ID = 5</span></div>
<div class="line">$category_photo = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;create_photo(<span class="stringliteral">&#39;cat&#39;</span>, 5);</div>
<div class="line">print_r($category_photo);</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a84a1eeee53079a8e60fea1d1e0d94639" name="a84a1eeee53079a8e60fea1d1e0d94639"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84a1eeee53079a8e60fea1d1e0d94639">&#9670;&#160;</a></span>del_photo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">del_photo </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$photo_id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Удаляет изображение с указанным идентификатором, а также все упоминания об этом изображении. </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет корректность входного параметра <code>photo_id</code>.</li>
<li>Получает данные об изображении из базы данных.</li>
<li>Удаляет файлы изображений (полноразмерные и эскизы) с диска.</li>
<li>Удаляет запись об изображении из базы данных.</li>
<li>Логирует ошибки, если они возникают.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$photo_id</td><td>Идентификатор удаляемого изображения:<ul>
<li>Должен быть положительным целым числом. Пример: <code>42</code>.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>bool Возвращает:<ul>
<li><code>true</code>, если удаление успешно.</li>
<li><code>false</code>, если произошла ошибка.</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Выбрасывается, если параметр <code>photo_id</code> имеет некорректный тип или значение. Пример сообщения: Неверное значение параметра photo_id | Ожидалось положительное целое число. </td></tr>
    <tr><td class="paramname">RuntimeException</td><td>Выбрасывается, если возникает ошибка при выполнении запросов к базе данных или удалении файлов. Пример сообщения: Не удалось найти изображение | Переменная photo_id = [значение]. </td></tr>
    <tr><td class="paramname">Exception</td><td>Выбрасывается при записи ошибок в лог.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Метод автоматически удаляет связанные записи в базе данных благодаря использованию внешних ключей.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Убедитесь, что:<ul>
<li>Скрипт имеет необходимые права на запись и чтение для удаления файлов.</li>
<li>Удаление файлов и записей из базы данных необратимо. Передайте корректный идентификатор изображения.</li>
</ul>
</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a> = <span class="keyword">new</span> Work();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Удаление изображения с ID = 42</span></div>
<div class="line">$result = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;del_photo(42);</div>
<div class="line"><span class="keywordflow">if</span> ($result) {</div>
<div class="line">    echo <span class="stringliteral">&quot;Изображение успешно удалено.&quot;</span>;</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    echo <span class="stringliteral">&quot;Не удалось удалить изображение.&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ad9ac814e0001840a4cdbf826d0d6e53e" name="ad9ac814e0001840a4cdbf826d0d6e53e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9ac814e0001840a4cdbf826d0d6e53e">&#9670;&#160;</a></span>encodename()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static encodename </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$string</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Транслитерирует строку и заменяет знаки пунктуации на "_". </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет, что входная строка не является пустой. Если строка пустая, она возвращается без обработки.</li>
<li>Транслитерирует не латинские символы в латиницу.</li>
<li>Заменяет все символы, кроме букв и цифр, на <code>"_"</code>:<ul>
<li>Заменяет множественные подчёркивания на одно.</li>
<li>Удаляет подчёркивания в начале и конце строки.</li>
</ul>
</li>
<li>Если после обработки строка становится пустой, генерируется уникальная последовательность длиной 16 символов. Метод используется для создания "безопасных" имен файлов или URL.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$string</td><td>Исходная строка:<ul>
<li>Если строка пустая, она возвращается без обработки. Рекомендуется использовать строки в кодировке UTF-8.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>string Строка после транслитерации и замены символов:<ul>
<li>Если после обработки строка становится пустой, генерируется уникальная последовательность.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод не гарантирует сохранение исходного формата строки, так как все специальные символы заменяются на <code>"_"</code>.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Транслитерация строки с заменой знаков пунктуации</span></div>
<div class="line">$encoded = Work::encodename(<span class="stringliteral">&#39;Привет, мир!&#39;</span>);</div>
<div class="line">echo $encoded; <span class="comment">// Выведет: Privet_mir</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Обработка пустой строки</span></div>
<div class="line">$encoded = Work::encodename(<span class="stringliteral">&#39;&#39;</span>);</div>
<div class="line">echo $encoded; <span class="comment">// Выведет: пустую строку</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Обработка строки без кириллицы и знаков пунктуации</span></div>
<div class="line">$encoded = Work::encodename(<span class="stringliteral">&#39;12345&#39;</span>);</div>
<div class="line">echo $encoded; <span class="comment">// Выведет: 12345</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Генерация уникальной последовательности для пустой строки после обработки</span></div>
<div class="line">$encoded = Work::encodename(<span class="stringliteral">&#39;!!!&#39;</span>);</div>
<div class="line">echo $encoded; <span class="comment">// Выведет: уникальную последовательность из 16 символов</span></div>
</div><!-- fragment --> 
</div>
</div>
<a id="a4289bbbeca07e599a9366a812d069972" name="a4289bbbeca07e599a9366a812d069972"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4289bbbeca07e599a9366a812d069972">&#9670;&#160;</a></span>filt_email()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">filt_email </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$email</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Заменяет символы в email-адресах для защиты от парсинга ботами. </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет корректность формата email.</li>
<li>Если email некорректен или пуст, возвращает пустую строку.</li>
<li>Заменяет символы '@' и '.' на '[at]' и '[dot]' соответственно. Метод предназначен для затруднения автоматического парсинга email-адресов ботами.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$email</td><td>Email-адрес для обработки:<ul>
<li>Должен быть непустым и соответствовать формату email (например, "example@example.com").</li>
<li>Если email некорректен или пуст, метод возвращает пустую строку.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>string Обработанный email-адрес, где символы '@' и '.' заменены на '[at]' и '[dot]'. Если входной email некорректен или пуст, возвращается пустая строка.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td>Выбрасывается при возникновении ошибок логирования.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Метод использует базовую проверку формата email. Если требуется более строгая валидация, следует учитывать дополнительные правила.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Убедитесь, что входной email соответствует формату перед вызовом метода. Если email некорректен или пуст, метод вернёт пустую строку.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a> = <span class="keyword">new</span> Work();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Обработка email-адреса</span></div>
<div class="line">$email = <span class="stringliteral">&quot;example@example.com&quot;</span>;</div>
<div class="line">$filtered_email = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;filt_email($email);</div>
<div class="line"><span class="keywordflow">if</span> (!empty($filtered_email)) {</div>
<div class="line">    echo <span class="stringliteral">&quot;Обработанный email: {$filtered_email}&quot;</span>;</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    echo <span class="stringliteral">&quot;Email некорректен или пуст.&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a89d4e7cb491d0c91282d16ff5abe3138" name="a89d4e7cb491d0c91282d16ff5abe3138"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89d4e7cb491d0c91282d16ff5abe3138">&#9670;&#160;</a></span>fix_file_extension()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fix_file_extension </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$full_path</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Выводит изображение через HTTP. </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет существование и доступность файла:<ul>
<li>Если файл не существует или недоступен для чтения, отправляется HTTP-статус <code>404 Not Found</code>.</li>
</ul>
</li>
<li>Определяет MIME-тип файла:<ul>
<li>Если MIME-тип не соответствует изображению, отправляется HTTP-статус <code>500 Internal Server Error</code>.</li>
</ul>
</li>
<li>Проверяет размер файла:<ul>
<li>Если размер превышает 10 МБ или неизвестен, отправляется HTTP-статус <code>413 Payload Too Large</code>.</li>
</ul>
</li>
<li>Устанавливает заголовки для вывода изображения:<ul>
<li><code>Content-Type</code>: MIME-тип файла.</li>
<li><code>Content-Disposition</code>: Имя файла для заголовка.</li>
<li><code>Content-Length</code>: Размер файла.</li>
<li>Дополнительные заголовки безопасности.</li>
</ul>
</li>
<li>Отправляет содержимое файла через HTTP.</li>
<li>Завершает выполнение скрипта после отправки заголовков и содержимого файла.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$full_path</td><td>Полный путь к файлу:<ul>
<li>Путь должен быть абсолютным.</li>
<li>Файл должен существовать и быть доступным для чтения. </li>
</ul>
</td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$name_file</td><td>Имя файла для заголовка <code>Content-Disposition</code>:<ul>
<li>Имя должно быть корректным (например, без запрещённых символов).</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>void Метод ничего не возвращает. Завершает выполнение скрипта после отправки заголовков и содержимого файла.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td>Выбрасывается при возникновении ошибок логирования информации.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Метод завершает выполнение скрипта (<code>exit</code>), отправляя заголовки и содержимое файла. Дополнительные заголовки безопасности:<ul>
<li><code>X-Content-Type-Options: nosniff</code></li>
<li><code>X-Frame-Options: DENY</code></li>
<li><code>X-XSS-Protection: 1; mode=block</code></li>
<li><code>Referrer-Policy: no-referrer</code></li>
<li>&lsquo;Content-Security-Policy: default-src 'self&rsquo;; img-src 'self' data:;`</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод завершает выполнение скрипта (<code>exit</code>), отправляя заголовки и содержимое файла. Убедитесь, что файл существует и доступен для чтения перед вызовом метода.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a> = <span class="keyword">new</span> Work();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Вывод изображения через HTTP</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;image_attach(<span class="stringliteral">&#39;/path/to/image.jpg&#39;</span>, <span class="stringliteral">&#39;example.jpg&#39;</span>);</div>
</div><!-- fragment --><p>Корректировка расширения файла в соответствии с его MIME-типом.</p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет путь к файлу на корректность.</li>
<li>Определяет реальный MIME-тип файла.</li>
<li>Проверяет соответствие MIME-типа поддерживаемым форматам:<ul>
<li>'image/jpeg' -&gt; 'jpg'</li>
<li>'image/png' -&gt; 'png'</li>
<li>'image/gif' -&gt; 'gif'</li>
<li>'image/webp' -&gt; 'webp'</li>
<li>'image/tiff' -&gt; 'tiff'</li>
<li>'image/svg+xml' -&gt; 'svg'</li>
<li>'image/bmp' -&gt; 'bmp'</li>
<li>'image/x-icon' -&gt; 'ico'</li>
<li>'image/avif' -&gt; 'avif'</li>
<li>'image/heic' -&gt; 'heic'</li>
<li>'image/vnd.adobe.photoshop' -&gt; 'psd'</li>
<li>'image/x-canon-cr2' -&gt; 'cr2'</li>
<li>'image/x-nikon-nef' -&gt; 'nef'</li>
<li>'image/x-xbitmap' -&gt; 'xbm'</li>
<li>'image/x-portable-anymap' -&gt; 'pnm'</li>
<li>'image/x-pcx' -&gt; 'pcx'</li>
</ul>
</li>
<li>Если расширение отсутствует или некорректное, оно добавляется или исправляется.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$full_path</td><td>Полный путь к файлу:<ul>
<li>Путь должен быть абсолютным.</li>
<li>Файл должен существовать и быть доступным для чтения.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>string Полный путь к файлу с правильным расширением:<ul>
<li>Если расширение было изменено или добавлено, возвращается новый путь.</li>
<li>Если расширение уже корректное, возвращается исходный путь.</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Выбрасывается, если путь к файлу имеет недопустимый формат. </td></tr>
    <tr><td class="paramname">RuntimeException</td><td>Выбрасывается, если:<ul>
<li>MIME-тип файла не поддерживается.</li>
<li>Файл недоступен для чтения. </li>
</ul>
</td></tr>
    <tr><td class="paramname">Exception</td><td>Выбрасывается при возникновении ошибок логирования информации.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод завершает выполнение с ошибкой, если MIME-тип файла не поддерживается. Убедитесь, что файл существует и доступен для чтения перед вызовом метода.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a> = <span class="keyword">new</span> Work();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Корректировка расширения файла</span></div>
<div class="line">$full_path = <span class="stringliteral">&#39;/path/to/file_without_extension&#39;</span>;</div>
<div class="line">$corrected_path = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;fix_file_extension($full_path);</div>
<div class="line">echo <span class="stringliteral">&quot;Исправленный путь: {$corrected_path}&quot;</span>;</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a19ab20c34a49c9684a03c09c62f8af46" name="a19ab20c34a49c9684a03c09c62f8af46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19ab20c34a49c9684a03c09c62f8af46">&#9670;&#160;</a></span>gen_captcha()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gen_captcha </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Генерирует математический CAPTCHA-вопрос и ответ. </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Генерирует случайные числа в диапазоне от 1 до 9.</li>
<li>Формирует математическое выражение, которое может включать сложение (<code>+</code>) или умножение (<code>x</code>) с использованием скобок.</li>
<li>Вычисляет правильный ответ для сгенерированного выражения. Метод используется для защиты от спам-ботов.</li>
</ol>
<dl class="section return"><dt>Возвращает</dt><dd>array Массив с ключами 'question' и 'answer':<ul>
<li>Ключ 'question' содержит строку математического выражения (например, "2 x (3 + 4)").</li>
<li>Ключ 'answer' содержит целочисленный результат вычисления (например, 14).</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Random</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>RandomException Выбрасывается, если произошла ошибка при генерации случайных чисел.</p>
<dl class="section note"><dt>Заметки</dt><dd>Метод использует криптографически безопасную функцию для генерации случайных чисел. Если требуется замена на менее безопасную функцию, это должно быть явно указано в конфигурации.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Убедитесь, что PHP поддерживает криптографически безопасные функции генерации случайных чисел.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a> = <span class="keyword">new</span> Work();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Генерация CAPTCHA-вопроса и ответа</span></div>
<div class="line">$captcha = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;gen_captcha();</div>
<div class="line">echo <span class="stringliteral">&quot;Вопрос: {$captcha[&#39;question&#39;]}\n&quot;</span>;</div>
<div class="line">echo <span class="stringliteral">&quot;Ответ: {$captcha[&#39;answer&#39;]}\n&quot;</span>;</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a9c2ee4da4bf10547c3aff7296d707c66" name="a9c2ee4da4bf10547c3aff7296d707c66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c2ee4da4bf10547c3aff7296d707c66">&#9670;&#160;</a></span>get_languages()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">get_languages </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Загружает доступные языки из директории <code>/language/</code>. </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет существование и доступность директории <code>/language/</code>.</li>
<li>Перебирает поддиректории в <code>/language/</code> и загружает данные о доступных языках.</li>
<li>Для каждого языка проверяет наличие корректного файла конфигурации с названием языка.</li>
<li>Возвращает массив с данными о доступных языках или выбрасывает исключение, если языки не найдены.</li>
</ol>
<dl class="section return"><dt>Возвращает</dt><dd>array Массив с данными о доступных языках. Каждый элемент массива содержит:<ul>
<li><code>value</code>: Имя директории языка (строка).</li>
<li><code>name</code>: Название языка (строка).</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">RuntimeException</td><td>Выбрасывается, если:<ul>
<li>Директория <code>/language/</code> недоступна или не существует.</li>
<li>Ни один язык не найден в указанной директории. </li>
</ul>
</td></tr>
    <tr><td class="paramname">Exception</td><td>Выбрасывается при записи ошибок в лог.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Метод автоматически возвращает пустой массив, если языки не найдены.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Убедитесь, что:<ul>
<li>Директория <code>/language/</code> содержит корректные поддиректории с файлами конфигурации.</li>
<li>Файлы конфигурации содержат корректное название языка. Если директория <code>/language/</code> пуста или содержит недоступные поддиректории, метод выбрасывает исключение.</li>
</ul>
</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a> = <span class="keyword">new</span> Work();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Получение списка доступных языков</span></div>
<div class="line">$languages = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;get_languages();</div>
<div class="line"><span class="keywordflow">foreach</span> ($languages as $language) {</div>
<div class="line">    echo <span class="stringliteral">&quot;Язык: &quot;</span> . $language[<span class="stringliteral">&#39;name&#39;</span>] . <span class="stringliteral">&quot; (ID: &quot;</span> . $language[<span class="stringliteral">&#39;value&#39;</span>] . <span class="stringliteral">&quot;)\n&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a8d2f43c00af0c9574caa0455df82c613" name="a8d2f43c00af0c9574caa0455df82c613"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d2f43c00af0c9574caa0455df82c613">&#9670;&#160;</a></span>get_themes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">get_themes </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Загружает доступные темы из директории <code>/themes/</code>. </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет существование и доступность директории <code>/themes/</code>.</li>
<li>Перебирает поддиректории в <code>/themes/</code> и загружает имена доступных тем.</li>
<li>Возвращает массив с именами доступных тем или выбрасывает исключение, если темы не найдены.</li>
</ol>
<dl class="section return"><dt>Возвращает</dt><dd>array Массив с именами доступных тем (строки).</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">RuntimeException</td><td>Выбрасывается, если:<ul>
<li>Директория <code>/themes/</code> не существует или недоступна для чтения.</li>
<li>Ни одна тема не найдена в указанной директории. </li>
</ul>
</td></tr>
    <tr><td class="paramname">Exception</td><td>Выбрасывается при записи ошибок в лог.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Метод автоматически возвращает пустой массив, если темы не найдены.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Убедитесь, что:<ul>
<li>Директория <code>/themes/</code> существует и содержит корректные поддиректории.</li>
<li>Поддиректории находятся внутри директории <code>/themes/</code>. Если директория <code>/themes/</code> пуста или содержит недоступные поддиректории, метод выбрасывает исключение.</li>
</ul>
</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a> = <span class="keyword">new</span> Work();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Получение списка доступных тем</span></div>
<div class="line">$themes = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;get_themes();</div>
<div class="line"><span class="keywordflow">foreach</span> ($themes as $theme) {</div>
<div class="line">    echo <span class="stringliteral">&quot;Доступная тема: $theme\n&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="af37eb2b0693905dd71dd677f86d47831" name="af37eb2b0693905dd71dd677f86d47831"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af37eb2b0693905dd71dd677f86d47831">&#9670;&#160;</a></span>image_resize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">image_resize </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$full_path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$thumbnail_path</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Изменяет размер изображения. </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет корректность путей к исходному изображению и файлу эскиза.</li>
<li>Проверяет существование и доступность исходного изображения для чтения.</li>
<li>Проверяет доступность директории для сохранения эскиза для записи.</li>
<li>Получает размеры исходного изображения и проверяет их на соответствие максимальным значениям.</li>
<li>Рассчитывает размеры эскиза на основе конфигурации (<code>temp_photo_w</code>, <code>temp_photo_h</code>).</li>
<li>Если файл эскиза уже существует и его размеры совпадают с расчётными, метод завершает работу.</li>
<li>Определяет MIME-тип исходного изображения.</li>
<li>Выбирает библиотеку для обработки изображения в следующем порядке приоритета:<ul>
<li>GraphicsMagick (если доступен),</li>
<li>ImageMagick (если доступен),</li>
<li>GD (если предыдущие библиотеки недоступны или вызвали ошибку).</li>
</ul>
</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$full_path</td><td>Путь к исходному изображению:<ul>
<li>Путь должен быть абсолютным.</li>
<li>Файл должен существовать и быть доступным для чтения. </li>
</ul>
</td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$thumbnail_path</td><td>Путь для сохранения эскиза:<ul>
<li>Путь должен быть абсолютным.</li>
<li>Директория должна быть доступна для записи.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>bool True, если операция выполнена успешно, иначе False.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Выбрасывается, если пути к файлам некорректны или имеют недопустимый формат. </td></tr>
    <tr><td class="paramname">RuntimeException</td><td>Выбрасывается, если возникли ошибки при проверке файлов, директорий или размеров изображения. </td></tr>
    <tr><td class="paramname">Exception</td><td>Выбрасывается при возникновении ошибок логирования информации.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Метод использует следующие константы класса для ограничения размеров исходного изображения:<ul>
<li><code>MAX_IMAGE_WIDTH</code>: Максимальная ширина исходного изображения (в пикселях). Значение: 5000.</li>
<li><code>MAX_IMAGE_HEIGHT</code>: Максимальная высота исходного изображения (в пикселях). Значение: 5000.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод зависит от корректности данных в конфигурации (<code>temp_photo_w</code>, <code>temp_photo_h</code>). Если эти параметры некорректны, результат может быть непредсказуемым. Убедитесь, что пути к файлам и директориям корректны перед вызовом метода.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a> = <span class="keyword">new</span> Work();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Изменение размера изображения</span></div>
<div class="line">$full_path = <span class="stringliteral">&#39;/path/to/source_image.jpg&#39;</span>;</div>
<div class="line">$thumbnail_path = <span class="stringliteral">&#39;/path/to/thumbnail.jpg&#39;</span>;</div>
<div class="line">$success = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;image_resize($full_path, $thumbnail_path);</div>
<div class="line"><span class="keywordflow">if</span> ($success) {</div>
<div class="line">    echo <span class="stringliteral">&quot;Эскиз успешно создан.&quot;</span>;</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    echo <span class="stringliteral">&quot;Ошибка при создании эскиза.&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="abfa7c6c53ae460403a3d0b3923e71a90" name="abfa7c6c53ae460403a3d0b3923e71a90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfa7c6c53ae460403a3d0b3923e71a90">&#9670;&#160;</a></span>news()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">news </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$news_id_or_limit</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$act</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Получает данные о новостях в зависимости от типа запроса. </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет корректность входных параметров <code>$news_id_or_limit</code> и <code>$act</code>.</li>
<li>Выполняет запрос к базе данных для получения данных о новостях:<ul>
<li>Для &lsquo;$act = 'id&rsquo;<code>: Возвращает новость по её ID.</code></li>
<li><code>Для</code>$act = 'last'`: Возвращает список последних новостей с сортировкой по дате редактирования.</li>
</ul>
</li>
<li>Возвращает массив с данными о новостях или пустой массив, если новости не найдены.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$news_id_or_limit</td><td>Количество новостей или ID новости (в зависимости от параметра <code>$act</code>):<ul>
<li>Должен быть положительным целым числом. Пример: <code>5</code> (для ID новости) или <code>10</code> (для количества новостей). </li>
</ul>
</td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$act</td><td>Тип запроса:<ul>
<li>&lsquo;'id&rsquo;<code>: Получение новости по её ID. -</code>'last'`: Получение списка последних новостей.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>array Массив с данными о новостях. Если новостей нет, возвращается пустой массив.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Выбрасывается, если передан некорректный <code>$act</code> или <code>$news_id_or_limit</code>. Пример сообщения: Некорректный ID новости | Переменная $news_id_or_limit = [значение]. Пример сообщения: Некорректное количество новостей | Переменная $news_id_or_limit = [значение]. Пример сообщения: Некорректный тип запроса | Переменная $act = '$act'. </td></tr>
    <tr><td class="paramname">RuntimeException</td><td>Выбрасывается, если произошла ошибка при выполнении запроса к базе данных. Пример сообщения: Не удалось получить данные из базы данных | Тип запроса: '$act'. </td></tr>
    <tr><td class="paramname">Exception</td><td>При выполнении запросов к базам данных.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Метод автоматически возвращает пустой массив, если новости не найдены.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Убедитесь, что:<ul>
<li>Передаются допустимые значения для <code>$news_id_or_limit</code> и <code>$act</code>.</li>
<li>База данных содержит необходимые данные для выполнения запросов.</li>
</ul>
</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a> = <span class="keyword">new</span> Work();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Получение новости с ID = 5</span></div>
<div class="line">$news_by_id = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;news(5, <span class="stringliteral">&#39;id&#39;</span>);</div>
<div class="line">print_r($news_by_id);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Получение 10 последних новостей</span></div>
<div class="line">$news_list = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;news(10, <span class="stringliteral">&#39;last&#39;</span>);</div>
<div class="line">print_r($news_list);</div>
</div><!-- fragment --> 
</div>
</div>
<a id="adfcd1cb7963a860013ca9ca1898f54f1" name="adfcd1cb7963a860013ca9ca1898f54f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfcd1cb7963a860013ca9ca1898f54f1">&#9670;&#160;</a></span>no_photo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">no_photo </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Возвращает данные для отсутствующего изображения. </p>
<p>Этот метод формирует массив данных, который используется для представления информации об отсутствующем изображении. Это может быть полезно, например, если изображение не найдено или недоступно. Метод использует конфигурацию приложения для формирования URL-адресов и путей:</p><ul>
<li><code>site_url</code>: Базовый URL сайта.</li>
<li><code>site_dir</code>: Базовая директория сайта.</li>
<li><code>gallery_folder</code>: Директория для хранения изображений.</li>
<li><code>thumbnail_folder</code>: Директория для хранения эскизов.</li>
</ul>
<dl class="section return"><dt>Возвращает</dt><dd>array Массив данных об изображении или его отсутствии:<ul>
<li>&lsquo;'url&rsquo;<code>(string): URL полноразмерного изображения. -</code>'thumbnail_url'<code>(string): URL эскиза изображения. -</code>'name'<code>(string): Название изображения. Значение по умолчанию:</code>'No photo'<code>. -</code>'description'<code>(string): Описание изображения. Значение по умолчанию:</code>'No photo available'<code>. -</code>'category_name'<code>(string): Название категории. Значение по умолчанию:</code>'No category'<code>. -</code>'category_description'<code>(string): Описание категории. Значение по умолчанию:</code>'No category available'<code>. -</code>'rate'<code>(string): Рейтинг изображения. Значение по умолчанию:</code>'Rate: 0/0'<code>. -</code>'url_user'<code>(string): URL пользователя. Значение по умолчанию: пустая строка (</code>''<code>). -</code>'real_name'<code>(string): Имя пользователя. Значение по умолчанию:</code>'No user'<code>. -</code>'full_path'<code>(string): Полный путь к изображению. Формируется на основе конфигурации. -</code>'thumbnail_path'<code>(string): Полный путь к эскизу. Формируется на основе конфигурации. -</code>'file'<code>(string): Имя файла. Значение по умолчанию:</code>'no_foto.png'`.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод зависит от корректности данных в конфигурации (<code>site_url</code>, <code>site_dir</code>, <code>gallery_folder</code>, <code>thumbnail_folder</code>). Если эти параметры некорректны, результат может быть непредсказуемым.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a> = <span class="keyword">new</span> Work();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Получение данных для отсутствующего изображения</span></div>
<div class="line">$noPhotoData = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;no_photo();</div>
<div class="line">echo <span class="stringliteral">&quot;URL изображения: {$noPhotoData[&#39;url&#39;]}\n&quot;</span>;</div>
<div class="line">echo <span class="stringliteral">&quot;Описание: {$noPhotoData[&#39;description&#39;]}\n&quot;</span>;</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a35f2b39b21e9ee39a5878708e9211198" name="a35f2b39b21e9ee39a5878708e9211198"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35f2b39b21e9ee39a5878708e9211198">&#9670;&#160;</a></span>process_rating()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">process_rating </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$table</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$photo_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$user_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$rate_value</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Добавляет новую оценку в таблицу и возвращает среднюю оценку фотографии. </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет корректность входных параметров <code>$table</code>, <code>$photo_id</code>, <code>$user_id</code> и <code>$rate_value</code>.</li>
<li>Вставляет новую оценку в указанную таблицу.</li>
<li>Пересчитывает среднюю оценку для фотографии автоматически через триггеры и функции в СУБД.</li>
<li>Возвращает среднюю оценку для указанной фотографии или <code>0</code>, если оценок нет.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$table</td><td>Имя таблицы для вставки оценки:<ul>
<li>&lsquo;'rate_user&rsquo;<code>: Таблица с оценками фотографий от пользователей. -</code>'rate_moder'`: Таблица с оценками фотографий от модераторов. </li>
</ul>
</td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$photo_id</td><td>ID фотографии:<ul>
<li>Должен быть положительным целым числом. </li>
</ul>
</td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$user_id</td><td>ID пользователя:<ul>
<li>Должен быть положительным целым числом. </li>
</ul>
</td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$rate_value</td><td>Значение оценки:<ul>
<li>Должен быть целым числом в диапазоне допустимых значений (например, 1–5).</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>float Возвращает число с плавающей точкой, представляющее среднюю оценку. Если оценок нет, возвращается <code>0</code>.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Выбрасывается, если переданы некорректные параметры. Пример сообщения: Некорректное значение параметра table | Ожидалось 'rate_user' или 'rate_moder'. </td></tr>
    <tr><td class="paramname">RuntimeException</td><td>Выбрасывается, если не удалось добавить оценку. Пример сообщения: Не удалось добавить оценку для фотографии с ID: {$photo_id}. </td></tr>
    <tr><td class="paramname">Exception</td><td>При выполнении запросов к базам данных.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Метод автоматически пересчитывает среднюю оценку через триггеры и функции в СУБД.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Убедитесь, что:<ul>
<li>Параметр <code>$table</code> соответствует одной из допустимых таблиц (&lsquo;'rate_user&rsquo;<code>или</code>'rate_moder'`).</li>
<li>В СУБД настроены триггеры и функции для перерасчета средней оценки.</li>
</ul>
</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a> = <span class="keyword">new</span> Work();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Добавление оценки и получение средней оценки</span></div>
<div class="line">$averageRate = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;process_rating(<span class="stringliteral">&#39;rate_user&#39;</span>, 123, 456, 5);</div>
<div class="line">echo <span class="stringliteral">&quot;Средняя оценка: {$averageRate}&quot;</span>;</div>
</div><!-- fragment --> 
</div>
</div>
<a id="aaaf358ddc8223e4a5a479f645fc43da8" name="aaaf358ddc8223e4a5a479f645fc43da8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaaf358ddc8223e4a5a479f645fc43da8">&#9670;&#160;</a></span>remove_directory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">remove_directory </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$path</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Удаляет директорию и её содержимое, предварительно проверяя права доступа. </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет существование указанной директории.</li>
<li>Проверяет права доступа к директории (должна быть доступна для записи).</li>
<li>Рекурсивно удаляет все файлы и поддиректории внутри директории.</li>
<li>Удаляет саму директорию.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$path</td><td>Путь к директории:<ul>
<li>Должен быть строкой, указывающей на существующую директорию.</li>
<li>Директория должна быть доступна для записи.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>bool Возвращает <code>true</code>, если директория успешно удалена.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">RuntimeException</td><td>Выбрасывается в следующих случаях:<ul>
<li>Если директория не существует.</li>
<li>Если директория недоступна для записи.</li>
<li>Если не удалось удалить файл или поддиректорию внутри директории.</li>
<li>Если не удалось удалить саму директорию.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Метод рекурсивно удаляет все файлы и поддиректории внутри директории.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Используйте этот метод с осторожностью, так как удаление директории необратимо. Убедитесь, что переданная директория действительно должна быть удалена.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a> = <span class="keyword">new</span> Work();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Удаление директории</span></div>
<div class="line">$path = <span class="stringliteral">&#39;/path/to/directory&#39;</span>;</div>
<div class="line">$result = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;remove_directory($path);</div>
<div class="line"><span class="keywordflow">if</span> ($result) {</div>
<div class="line">    echo <span class="stringliteral">&quot;Директория успешно удалена!&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ac28b2ada9c4f3a71f7a2df9bb1387413" name="ac28b2ada9c4f3a71f7a2df9bb1387413"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac28b2ada9c4f3a71f7a2df9bb1387413">&#9670;&#160;</a></span>return_bytes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static return_bytes </td>
          <td>(</td>
          <td class="paramtype">string|int</td>          <td class="paramname"><span class="paramname"><em>$val</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Преобразует размер в формате "число[K|M|G]" в количество байт. </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет корректность входных данных.</li>
<li>Преобразует размер, заданный в формате "число[K|M|G]", в количество байт:<ul>
<li>K (килобайты): умножается на 1024.</li>
<li>M (мегабайты): умножается на 1024².</li>
<li>G (гигабайты): умножается на 1024³.</li>
</ul>
</li>
<li>Если суффикс отсутствует или недопустим, значение считается в байтах.</li>
<li>Отрицательные числа преобразуются в положительные.</li>
<li>Возвращает <code>0</code>, если входные данные некорректны.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string&#160;|&#160;int</td><td class="paramname">$val</td><td>Размер в формате "число[K|M|G]" или число:<ul>
<li>Допустимые суффиксы: <code>K</code>, <code>M</code>, <code>G</code>.</li>
<li>Если суффикс недопустим, он игнорируется, и значение преобразуется в число.</li>
<li>Отрицательные числа преобразуются в положительные.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>int Размер в байтах. Возвращает <code>0</code> для некорректных входных данных.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод чувствителен к формату входных данных. Убедитесь, что они корректны.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Преобразование с допустимым суффиксом</span></div>
<div class="line">$bytes = Work::return_bytes(<span class="stringliteral">&#39;2M&#39;</span>);</div>
<div class="line">echo $bytes; <span class="comment">// Выведет: 2097152</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Преобразование отрицательного значения</span></div>
<div class="line">$bytes = Work::return_bytes(<span class="stringliteral">&#39;-1G&#39;</span>);</div>
<div class="line">echo $bytes; <span class="comment">// Выведет: 1073741824</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Преобразование с недопустимым суффиксом</span></div>
<div class="line">$bytes = Work::return_bytes(<span class="stringliteral">&#39;10X&#39;</span>);</div>
<div class="line">echo $bytes; <span class="comment">// Выведет: 10</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Преобразование некорректных данных</span></div>
<div class="line">$bytes = Work::return_bytes(<span class="stringliteral">&#39;abc&#39;</span>);</div>
<div class="line">echo $bytes; <span class="comment">// Выведет: 0</span></div>
</div><!-- fragment --> 
</div>
</div>
<a id="aed2ddce38e1559f3014f076e11a2cbe9" name="aed2ddce38e1559f3014f076e11a2cbe9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed2ddce38e1559f3014f076e11a2cbe9">&#9670;&#160;</a></span>set_lang()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">set_lang </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$lang</em></span><span class="paramdefsep"> = </span><span class="paramdefval">'main'</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Устанавливает языковые данные из файла и передаёт их в дочерние классы. </p>
<p>Этот метод используется для установки массива языковых данных ($lang) из файла. Выполняются следующие шаги:</p><ol type="1">
<li>Формируется путь к файлу языковых данных на основе текущего языка сессии или конфигурации.</li>
<li>Проверяется существование и доступность файла для чтения.</li>
<li>Загружаются данные из файла, которые должны быть массивом с ключом &lsquo;'lang&rsquo;<code>.</code></li>
<li><code>Проверяется корректность массива через метод</code>process_lang_array()<code>.</code></li>
<li><code>Логируются изменения (если они есть).</code></li>
<li><code>Обновляются языковые данные в текущем классе и передаются в дочерние классы (</code>Work_Template<code>и </code>Work_CoreLogic`).</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$lang</td><td>Имя файла языковых данных:<ul>
<li>Должен быть непустой строкой.</li>
<li>Должен соответствовать имени файла в директории языковых данных.</li>
<li>По умолчанию: 'main'.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Если имя файла некорректно (пустое или не существует). Пример сообщения: "Некорректное имя языкового файла | Поле не должно быть
                                 пустым". Если массив языковых данных некорректен (не содержит ключ 'lang' или содержит ошибки). Пример сообщения: "Обнаружены ошибки в массиве языковых
                                 данных | Ошибки:
                                 [список ошибок]". </td></tr>
    <tr><td class="paramname">RuntimeException</td><td>Если файл языковых данных недоступен для чтения. Пример сообщения: "Файл языковых данных недоступен для чтения | Путь: [путь к
                                 файлу]". </td></tr>
    <tr><td class="paramname">JsonException</td><td>При ошибках кодирования JSON. </td></tr>
    <tr><td class="paramname">Exception</td><td>При ошибках логирования.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Этот метод является точкой входа для установки языковых данных. Все проверки и обработка выполняются в защищённом методе _set_lang_internal().</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Если файл языковых данных отсутствует или содержит ошибки, метод выбрасывает исключение.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Вызов метода из клиентского кода</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a> = new \PhotoRigma\Classes\Work();</div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;set_lang(<span class="stringliteral">&#39;main&#39;</span>);</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a75c62c77591a021c5555660ce20e84b3" name="a75c62c77591a021c5555660ce20e84b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75c62c77591a021c5555660ce20e84b3">&#9670;&#160;</a></span>set_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">set_user </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d14/interfacePhotoRigma_1_1Interfaces_1_1User__Interface.html">User_Interface</a></td>          <td class="paramname"><span class="paramname"><em>$user</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Установка объекта пользователя через сеттер. </p>
<p>Этот метод позволяет установить объект пользователя, реализующий интерфейс <code>User_Interface</code>. Метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет, что переданный объект является экземпляром класса, реализующего интерфейс <code>User_Interface</code>.</li>
<li>Передаёт объект пользователя в связанные компоненты системы (<code>Work_Template</code> и <code>Work_CoreLogic</code>) для дальнейшего использования.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">User_Interface</td><td class="paramname">$user</td><td>Объект пользователя:<ul>
<li>Должен быть экземпляром класса, реализующего интерфейс <code>User_Interface</code>.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Если передан некорректный объект (не экземпляр интерфейса <code>User_Interface</code>).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Метод проверяет тип переданного объекта. Объект пользователя используется в связанных компонентах системы (например, для авторизации, управления правами доступа и т.д.).</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Некорректный объект (не экземпляр интерфейса <code>User_Interface</code>) вызывает исключение.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта Work и установка пользователя</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a> = new \PhotoRigma\Classes\Work();</div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a> = new \PhotoRigma\Classes\User(<a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a1fa3127fc82f96b1436d871ef02be319">$db</a>, $_SESSION);</div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;set_user(<a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>);</div>
<div class="ttc" id="anamespacePhotoRigma_html_a1fa3127fc82f96b1436d871ef02be319"><div class="ttname"><a href="../../de/d90/namespacePhotoRigma.html#a1fa3127fc82f96b1436d871ef02be319">PhotoRigma\$db</a></div><div class="ttdeci">$db</div><div class="ttdoc">Создание объекта класса Database для работы с основной БД.</div><div class="ttdef"><b>Определения</b> <a href="../../de/d20/index_8php_source.html#l00254">index.php:254</a></div></div>
<div class="ttc" id="anamespacePhotoRigma_html_a598ca4e71b15a1313ec95f0df1027ca5"><div class="ttname"><a href="../../de/d90/namespacePhotoRigma.html#a598ca4e71b15a1313ec95f0df1027ca5">PhotoRigma\$user</a></div><div class="ttdeci">$user</div><div class="ttdoc">Создание объекта класса User.</div><div class="ttdef"><b>Определения</b> <a href="../../de/d20/index_8php_source.html#l00281">index.php:281</a></div></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="../../dc/d14/interfacePhotoRigma_1_1Interfaces_1_1User__Interface.html" title="Интерфейс для работы с пользователями и группами.">PhotoRigma\Classes\User_Interface</a> Интерфейс, которому должен соответствовать объект пользователя. </dd></dl>

<p class="reference">Перекрестные ссылки <a class="el" href="../../de/d20/index_8php_source.html#l00281">PhotoRigma\$user</a>.</p>

</div>
</div>
<a id="a096b7e5c3f9fb908fbb30e1adc2ac61b" name="a096b7e5c3f9fb908fbb30e1adc2ac61b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a096b7e5c3f9fb908fbb30e1adc2ac61b">&#9670;&#160;</a></span>size_image()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_image </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$path_image</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Вычисляет размеры для вывода эскиза изображения. </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет существование файла.</li>
<li>Получает реальные размеры изображения.</li>
<li>Вычисляет ширину и высоту эскиза на основе реальных размеров изображения и конфигурационных параметров:<ul>
<li><code>temp_photo_w</code>: Целевая ширина эскиза (в пикселях).</li>
<li><code>temp_photo_h</code>: Целевая высота эскиза (в пикселях).</li>
</ul>
</li>
<li>Если изображение меньше целевого размера, возвращаются оригинальные размеры.</li>
<li>В противном случае размеры масштабируются пропорционально.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$path_image</td><td>Путь к файлу изображения:<ul>
<li>Путь должен быть абсолютным.</li>
<li>Файл должен существовать и быть доступным для чтения.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>array Массив с шириной и высотой эскиза:<ul>
<li>Ключ &lsquo;'width&rsquo;<code>(int): Ширина эскиза (целое число ≥ 0).</code></li>
<li><code>Ключ</code>'height'` (int): Высота эскиза (целое число ≥ 0). Размеры могут совпадать с оригинальными размерами изображения, если оно меньше целевого размера.</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">RuntimeException</td><td>Выбрасывается в следующих случаях:<ul>
<li>Если файл не существует.</li>
<li>Если не удалось получить размеры изображения.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод зависит от корректности данных в конфигурации (<code>temp_photo_w</code> и <code>temp_photo_h</code>). Если эти параметры некорректны, результат может быть непредсказуемым.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a> = <span class="keyword">new</span> Work();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Вычисление размеров эскиза для изображения</span></div>
<div class="line">$path = <span class="stringliteral">&#39;/path/to/image.jpg&#39;</span>;</div>
<div class="line">$sizes = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;size_image($path);</div>
<div class="line">echo <span class="stringliteral">&quot;Ширина: {$sizes[&#39;width&#39;]}, Высота: {$sizes[&#39;height&#39;]}&quot;</span>;</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a9143fed87a3064985e0b51fe5fbb4ac3" name="a9143fed87a3064985e0b51fe5fbb4ac3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9143fed87a3064985e0b51fe5fbb4ac3">&#9670;&#160;</a></span>template_best_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">template_best_user </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$best_user</em></span><span class="paramdefsep"> = </span><span class="paramdefval">1</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Формирует список пользователей, загрузивших наибольшее количество изображений. </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Выполняет запрос к базе данных для получения списка пользователей с наибольшим количеством загруженных фотографий.</li>
<li>Ограничивает количество результатов параметром $best_user.</li>
<li>Возвращает массив данных для вывода в шаблон, включая ссылки на профили пользователей и количество загруженных фотографий. Если данные отсутствуют, добавляется запись "пустого" пользователя.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$best_user</td><td>Количество лучших пользователей для вывода:<ul>
<li>Должно быть положительным целым числом.</li>
<li>Если передано недопустимое значение, выбрасывается исключение InvalidArgumentException.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>array Массив данных для вывода в шаблон:<ul>
<li>'NAME_BLOCK': Название блока (локализованное).</li>
<li>'L_USER_NAME': Подпись для имени пользователя (локализованная строка).</li>
<li>'L_USER_PHOTO': Подпись для количества фотографий (локализованная строка).</li>
<li>'user_url': Ссылка на профиль пользователя (null, если данных нет).</li>
<li>'user_name': Имя пользователя ('&mdash;', если данных нет).</li>
<li>'user_photo': Количество загруженных фотографий ('-', если данных нет).</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Выбрасывается, если параметр $best_user не является положительным целым числом. </td></tr>
    <tr><td class="paramname">Exception</td><td>При выполнении запросов к базам данных.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Если запрос к базе данных не возвращает данных, добавляется запись "пустого" пользователя:<ul>
<li>'user_url': null.</li>
<li>'user_name': '&mdash;'.</li>
<li>'user_photo': '-'.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Убедитесь, что таблицы базы данных содержат корректные данные. Ошибки в структуре таблиц могут привести к некорректному результату.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a> = <span class="keyword">new</span> Work();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Формирование списка лучших пользователей</span></div>
<div class="line">$bestUsers = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;template_best_user(3);</div>
<div class="line">print_r($bestUsers);</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a116ebcf799d07566a74e7e765aecc1b7" name="a116ebcf799d07566a74e7e765aecc1b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a116ebcf799d07566a74e7e765aecc1b7">&#9670;&#160;</a></span>template_stat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">template_stat </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Генерирует массив статистических данных для шаблона. </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Выполняет запросы к базе данных для получения статистической информации:<ul>
<li>Количество пользователей, администраторов и модераторов.</li>
<li>Количество категорий (включая пользовательские альбомы).</li>
<li>Количество фотографий.</li>
<li>Количество пользовательских и модераторских оценок.</li>
<li>Список онлайн-пользователей.</li>
</ul>
</li>
<li>Возвращает ассоциативный массив с локализованными подписями и данными для вывода статистики.</li>
</ol>
<dl class="section return"><dt>Возвращает</dt><dd>array Ассоциативный массив данных для вывода статистики:<ul>
<li>'NAME_BLOCK': Название блока статистики (локализованное).</li>
<li>'L_STAT_REGIST': Подпись для количества зарегистрированных пользователей.</li>
<li>'D_STAT_REGIST': Количество зарегистрированных пользователей.</li>
<li>'L_STAT_PHOTO': Подпись для количества фотографий.</li>
<li>'D_STAT_PHOTO': Количество фотографий.</li>
<li>'L_STAT_CATEGORY': Подпись для количества категорий.</li>
<li>'D_STAT_CATEGORY': Количество категорий (включая пользовательские альбомы).</li>
<li>'L_STAT_USER_ADMIN': Подпись для количества администраторов.</li>
<li>'D_STAT_USER_ADMIN': Количество администраторов.</li>
<li>'L_STAT_USER_MODER': Подпись для количества модераторов.</li>
<li>'D_STAT_USER_MODER': Количество модераторов.</li>
<li>'L_STAT_RATE_USER': Подпись для количества пользовательских оценок.</li>
<li>'D_STAT_RATE_USER': Количество пользовательских оценок.</li>
<li>'L_STAT_RATE_MODER': Подпись для количества модераторских оценок.</li>
<li>'D_STAT_RATE_MODER': Количество модераторских оценок.</li>
<li>'L_STAT_ONLINE': Подпись для онлайн-пользователей.</li>
<li>'D_STAT_ONLINE': Список онлайн-пользователей (HTML-ссылки) или сообщение об отсутствии онлайн-пользователей.</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">RuntimeException</td><td>Выбрасывается при ошибке выполнения запросов к базе данных. </td></tr>
    <tr><td class="paramname">Exception</td><td>При выполнении запросов к базам данных.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Данные берутся из таблиц и представлений базы данных:<ul>
<li>Пользователи, администраторы, модераторы.</li>
<li>Категории и фотографии.</li>
<li>Оценки пользователей и модераторов.</li>
<li>Онлайн-пользователи.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Убедитесь, что структура базы данных корректна. Ошибки в структуре таблиц могут привести к некорректной статистике.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a> = <span class="keyword">new</span> Work();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Генерация статистических данных</span></div>
<div class="line">$statData = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;template_stat();</div>
<div class="line">print_r($statData);</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a1f3df8874c79377e6a8b4398ea6ad774" name="a1f3df8874c79377e6a8b4398ea6ad774"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f3df8874c79377e6a8b4398ea6ad774">&#9670;&#160;</a></span>template_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">template_user </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Формирует данные для блока пользователя. </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет статус авторизации пользователя:<ul>
<li>Если пользователь не авторизован, формируется блок со ссылками на вход, восстановление пароля и регистрацию.</li>
<li>Если пользователь авторизован, формируется блок с приветствием, группой и аватаром.</li>
</ul>
</li>
<li>Для авторизованных пользователей проверяется существование аватара:<ul>
<li>Если аватар недоступен или имеет недопустимый формат, используется дефолтный аватар.</li>
</ul>
</li>
<li>Возвращает массив данных для блока пользователя, который используется для отображения в шаблоне.</li>
</ol>
<dl class="section return"><dt>Возвращает</dt><dd>array Массив с данными для блока пользователя:<ul>
<li>Для неавторизованных пользователей:<ul>
<li>'NAME_BLOCK': Название блока (локализованное).</li>
<li>'CSRF_TOKEN': CSRF-токен для защиты формы.</li>
<li>'L_LOGIN', 'L_PASSWORD', 'L_ENTER', 'L_FORGOT_PASSWORD', 'L_REGISTRATION': Локализованные строки.</li>
<li>'U_LOGIN', 'U_FORGOT_PASSWORD', 'U_REGISTRATION': URL для входа, восстановления пароля и регистрации.</li>
</ul>
</li>
<li>Для авторизованных пользователей:<ul>
<li>'NAME_BLOCK': Название блока (локализованное).</li>
<li>'L_HI_USER': Приветствие с именем пользователя (локализованное).</li>
<li>'L_GROUP': Группа пользователя (локализованная строка).</li>
<li>'U_AVATAR': URL аватара (или дефолтного аватара, если файл недоступен или некорректен).</li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">RuntimeException</td><td>Выбрасывается, если объект пользователя не установлен или данные некорректны. </td></tr>
    <tr><td class="paramname">Random</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>RandomException Выбрасывается при ошибке генерации CSRF-токена. </p><dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td>Выбрасывается при ошибках проверки MIME-типа файла или логирования.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Статус авторизации проверяется через внутренние данные пользователя. Дефолтный аватар определяется конфигурацией системы.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Убедитесь, что объект пользователя корректно установлен перед вызовом метода. Также убедитесь, что конфигурация аватаров настроена правильно.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a> = <span class="keyword">new</span> Work();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Формирование данных для блока пользователя</span></div>
<div class="line">$userData = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;template_user();</div>
<div class="line">print_r($userData);</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a3163f8e7d71cad9003bf5b3efe644712" name="a3163f8e7d71cad9003bf5b3efe644712"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3163f8e7d71cad9003bf5b3efe644712">&#9670;&#160;</a></span>ubb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ubb </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$text</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Преобразует BBCode в HTML. </p>
<p>Этот метод преобразует BBCode-теги в соответствующие HTML-теги. Поддерживаются следующие BBCode-теги:</p><ul>
<li>[b]Жирный текст[/b] -&gt; <code>&lt;strong&gt;Жирный текст&lt;/strong&gt;</code></li>
<li>[u]Подчёркнутый текст[/u] -&gt; <code>&lt;u&gt;Подчёркнутый текст&lt;/u&gt;</code></li>
<li>[i]Курсив[/i] -&gt; <code>&lt;em&gt;Курсив&lt;/em&gt;</code></li>
<li>[url]Ссылка[/url], [url=URL]Текст ссылки[/url] -&gt; <code>&lt;a href="URL" target="_blank" rel="noopener
         noreferrer"&gt;Текст ссылки&lt;/a&gt;</code></li>
<li>[color=COLOR]Цвет текста[/color] -&gt; <code>&lt;span style="color: COLOR;"&gt;Цвет текста&lt;/span&gt;</code></li>
<li>[size=SIZE]Размер текста[/size] -&gt; <code>&lt;span style="font-size: SIZE;"&gt;Размер текста&lt;/span&gt;</code></li>
<li>[quote]Цитата[/quote], [quote=AUTHOR]Цитата автора[/quote] -&gt; <code>&lt;blockquote&gt;Цитата&lt;/blockquote&gt;</code></li>
<li>[list], [list=1], [list=a] — списки -&gt; <code>&lt;ul&gt;</code>, <code>&lt;ol&gt;</code> с соответствующими элементами <code>&lt;li&gt;</code></li>
<li>[code]Блок кода[/code] -&gt; <code>&lt;pre&gt;&lt;code&gt;Блок кода&lt;/code&gt;&lt;/pre&gt;</code></li>
<li>[spoiler]Спойлер[/spoiler] -&gt; <code>&lt;details&gt;&lt;summary&gt;Спойлер&lt;/summary&gt;Содержимое&lt;/details&gt;</code></li>
<li>[hr] — горизонтальная линия -&gt; <code>&lt;hr&gt;</code></li>
<li>[br] — перенос строки -&gt; <code>&lt;br&gt;</code></li>
<li>[left], [center], [right] — выравнивание текста -&gt; <code>&lt;div style="text-align: left|center|right;"&gt;</code></li>
<li>[img]Изображение[/img] -&gt; <code>&lt;img src="URL" alt="Изображение"&gt;</code> Метод защищает от XSS-атак и ограничивает глубину рекурсии для вложенных тегов.</li>
</ul>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$text</td><td>Текст с BBCode:<ul>
<li>Если строка пустая, она возвращается без обработки. Рекомендуется использовать строки в кодировке UTF-8.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>string Текст с HTML-разметкой:<ul>
<li>Некорректные BBCode-теги игнорируются или преобразуются в текст.</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td>Выбрасывается, если произошла ошибка при обработке BBCode.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод ограничивает глубину рекурсии для вложенных тегов (максимум 10 уровней). Некорректные URL или изображения заменяются на безопасные значения или удаляются.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Преобразование жирного текста</span></div>
<div class="line">$html = Work::ubb(<span class="stringliteral">&#39;[b]Bold text[/b]&#39;</span>);</div>
<div class="line">echo $html; <span class="comment">// Выведет: &lt;strong&gt;Bold text&lt;/strong&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Преобразование ссылки</span></div>
<div class="line">$html = Work::ubb(<span class="stringliteral">&#39;[url=https://example.com]Example[/url]&#39;</span>);</div>
<div class="line">echo $html; <span class="comment">// Выведет: &lt;a href=&quot;https://example.com&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Example&lt;/a&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Преобразование цитаты</span></div>
<div class="line">$html = Work::ubb(<span class="stringliteral">&#39;[quote=Author]This is a quote.[/quote]&#39;</span>);</div>
<div class="line">echo $html; <span class="comment">// Выведет: &lt;blockquote&gt;&lt;cite&gt;Author:&lt;/cite&gt;This is a quote.&lt;/blockquote&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Преобразование списка</span></div>
<div class="line">$html = Work::ubb(<span class="stringliteral">&#39;[list][*]Item 1[*]Item 2[/list]&#39;</span>);</div>
<div class="line">echo $html; <span class="comment">// Выведет: &lt;ul&gt;&lt;li&gt;Item 1&lt;/li&gt;&lt;li&gt;Item 2&lt;/li&gt;&lt;/ul&gt;</span></div>
</div><!-- fragment --> 
</div>
</div>
<a id="a1e1a4ab6b213ada0d89c77a24d8ffe32" name="a1e1a4ab6b213ada0d89c77a24d8ffe32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e1a4ab6b213ada0d89c77a24d8ffe32">&#9670;&#160;</a></span>url_check()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">url_check </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Проверяет URL на наличие вредоносного кода. </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Анализирует строку запроса из глобального массива &lsquo;$_SERVER['QUERY_STRING&rsquo;]`.</li>
<li>Проверяет строку запроса на наличие запрещённых паттернов, определённых в конфигурации.</li>
<li>Логирует информацию о попытке взлома, если обнаружены запрещённые паттерны.</li>
</ol>
<dl class="section return"><dt>Возвращает</dt><dd>bool True, если URL безопасен (не содержит запрещённых паттернов), иначе False.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td>Выбрасывается при возникновении ошибок логирования информации.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Метод работает с глобальным массивом &lsquo;$_SERVER['QUERY_STRING&rsquo;]`. Убедитесь, что этот массив доступен и содержит корректные данные.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод зависит от корректности данных в конфигурации правил проверки. Если правила некорректны, результат может быть непредсказуемым.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a> = <span class="keyword">new</span> Work();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Проверка безопасности URL</span></div>
<div class="line">$is_safe = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;url_check();</div>
<div class="line"><span class="keywordflow">if</span> ($is_safe) {</div>
<div class="line">    echo <span class="stringliteral">&quot;URL безопасен.&quot;</span>;</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    echo <span class="stringliteral">&quot;URL содержит запрещённые паттерны.&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="aa76be87bb05ca60ff16f6d47f5a44c32" name="aa76be87bb05ca60ff16f6d47f5a44c32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa76be87bb05ca60ff16f6d47f5a44c32">&#9670;&#160;</a></span>utf8_wordwrap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static utf8_wordwrap </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$str</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$width</em></span><span class="paramdefsep"> = </span><span class="paramdefval">70</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$break</em></span><span class="paramdefsep"> = </span><span class="paramdefval">PHP_EOL</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Разбивает строку на несколько строк ограниченной длины. </p>
<p>Этот метод разбивает строку на несколько строк, каждая из которых имеет длину не более указанной. Разрыв строки выполняется только по пробелам, чтобы сохранить читаемость текста. Поддерживается работа с UTF-8 символами. Если параметры некорректны (например, <code>$width &lt;= 0</code> или <code>$break</code> пустой), возвращается исходная строка.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$str</td><td>Исходная строка:<ul>
<li>Рекомендуется использовать строки в кодировке UTF-8.</li>
<li>Если строка пустая или её длина меньше или равна <code>$width</code>, она возвращается без изменений. </li>
</ul>
</td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$width</td><td>Максимальная длина строки (по умолчанию 70):<ul>
<li>Должен быть положительным целым числом. </li>
</ul>
</td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$break</td><td>Символ разрыва строки (по умолчанию PHP_EOL):<ul>
<li>Не должен быть пустой строкой.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>string Строка, разбитая на несколько строк:<ul>
<li>В случае некорректных параметров возвращается исходная строка.</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td>Выбрасывается при возникновении ошибок логирования информации.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод корректно работает только с UTF-8 символами. Если параметры некорректны (например, <code>$width &lt;= 0</code> или <code>$break</code> пустой), возвращается исходная строка.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Разбивка строки на части длиной 10 символов</span></div>
<div class="line">$wrapped = Work::utf8_wordwrap(<span class="stringliteral">&#39;This is a very long string that needs to be wrapped.&#39;</span>, 10);</div>
<div class="line">echo $wrapped;</div>
<div class="line"><span class="comment">// Выведет:</span></div>
<div class="line"><span class="comment">// This is a</span></div>
<div class="line"><span class="comment">// very long</span></div>
<div class="line"><span class="comment">// string that</span></div>
<div class="line"><span class="comment">// needs to be</span></div>
<div class="line"><span class="comment">// wrapped.</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Разбивка строки с пользовательским символом разрыва</span></div>
<div class="line">$wrapped = Work::utf8_wordwrap(<span class="stringliteral">&#39;This is another example.&#39;</span>, 15, <span class="stringliteral">&#39;---&#39;</span>);</div>
<div class="line">echo $wrapped;</div>
<div class="line"><span class="comment">// Выведет:</span></div>
<div class="line"><span class="comment">// This is another---</span></div>
<div class="line"><span class="comment">// example.</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Некорректные параметры</span></div>
<div class="line">$wrapped = Work::utf8_wordwrap(<span class="stringliteral">&#39;Short text&#39;</span>, 0);</div>
<div class="line">echo $wrapped; <span class="comment">// Выведет: Short text</span></div>
</div><!-- fragment --> 
</div>
</div>
<a id="a41518918c225073130bc7a73983d72ff" name="a41518918c225073130bc7a73983d72ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41518918c225073130bc7a73983d72ff">&#9670;&#160;</a></span>validate_mime_type()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static validate_mime_type </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$real_mime_type</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Проверяет, поддерживается ли указанный MIME-тип изображения. </p>
<p>Этот метод проверяет, поддерживается ли указанный MIME-тип хотя бы одной из доступных библиотек:</p><ul>
<li>Imagick: Поддерживает широкий спектр форматов, включая JPEG, PNG, GIF, WebP, TIFF, SVG, BMP, ICO, AVIF, HEIC, PSD, CR2, NEF и другие.</li>
<li>Gmagick: Поддерживает основные форматы, такие как JPEG, PNG, GIF, WebP, TIFF, SVG, BMP, ICO, AVIF, HEIC.</li>
<li>Встроенные функции PHP (GD): Поддерживаются только базовые форматы, такие как JPEG, PNG, GIF, WebP. Если MIME-тип не поддерживается ни одной библиотекой, возвращается <code>false</code>.</li>
</ul>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$real_mime_type</td><td>Реальный MIME-тип файла:<ul>
<li>Должен быть корректным MIME-типом для изображений.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>bool True, если MIME-тип поддерживается хотя бы одной библиотекой, иначе false.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td>Выбрасывается при возникновении ошибок логирования информации.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод зависит от доступности библиотек (Imagick, Gmagick) и встроенных функций PHP по работе с изображениями (GD). Если ни одна из библиотек недоступна, метод может некорректно работать.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Проверка поддерживаемого MIME-типа</span></div>
<div class="line">$is_supported = Work::validate_mime_type(<span class="stringliteral">&#39;image/jpeg&#39;</span>);</div>
<div class="line">var_dump($is_supported); <span class="comment">// Выведет: true</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Проверка неподдерживаемого MIME-типа</span></div>
<div class="line">$is_supported = Work::validate_mime_type(<span class="stringliteral">&#39;application/pdf&#39;</span>);</div>
<div class="line">var_dump($is_supported); <span class="comment">// Выведет: false</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Проверка MIME-типа, поддерживаемого только через Imagick</span></div>
<div class="line">$is_supported = Work::validate_mime_type(<span class="stringliteral">&#39;image/vnd.adobe.photoshop&#39;</span>);</div>
<div class="line">var_dump($is_supported); <span class="comment">// Выведет: true (если Imagick доступен)</span></div>
</div><!-- fragment --> 
</div>
</div>
<hr/>Объявления и описания членов интерфейса находятся в файле:<ul>
<li>include/<a class="el" href="../../d3/dee/Work__Interface_8php_source.html">Work_Interface.php</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../de/d90/namespacePhotoRigma.html">PhotoRigma</a></li><li class="navelem"><a class="el" href="../../dd/db0/namespacePhotoRigma_1_1Interfaces.html">Interfaces</a></li><li class="navelem"><a class="el" href="../../da/d79/interfacePhotoRigma_1_1Interfaces_1_1Work__Interface.html">Work_Interface</a></li>
    <li class="footer">Создано системой <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
