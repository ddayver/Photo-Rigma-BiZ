<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Photo-Rigma-BiZ: Класс Work_Template</title>
<link rel="icon" href="../../favicon.ico" type="image/x-icon" />
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo-1.png"/></td>
  <td id="projectalign">
   <div id="projectname">Photo-Rigma-BiZ<span id="projectnumber">&#160;0.4.0</span>
   </div>
   <div id="projectbrief">Gallery_Photo-Rigma-BiZ</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Поиск',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Загрузка...</div>
<div class="SRStatus" id="Searching">Поиск...</div>
<div class="SRStatus" id="NoMatches">Не найдено</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Открытые члены</a> &#124;
<a href="#pro-methods">Защищенные члены</a> &#124;
<a href="#pri-attribs">Закрытые данные</a> &#124;
<a href="../../d8/d1a/classPhotoRigma_1_1Classes_1_1Work__Template-members.html">Полный список членов класса</a>  </div>
  <div class="headertitle"><div class="title">Класс Work_Template</div></div>
</div><!--header-->
<div class="contents">

<p>Класс Work_Template отвечает за формирование данных для шаблонов.  
 <a href="#details">Подробнее...</a></p>
<div id="dynsection-0" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Граф наследования:Work_Template:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d2/d0a/classPhotoRigma_1_1Classes_1_1Work__Template__inherit__graph.png" border="0" usemap="#aWork__Template_inherit__map" alt="Inheritance graph"/></div>
<map name="aWork__Template_inherit__map" id="aWork__Template_inherit__map">
<area shape="rect" title="Класс Work_Template отвечает за формирование данных для шаблонов." alt="" coords="34,78,147,103"/>
<area shape="rect" href="../../d8/d8a/interfacePhotoRigma_1_1Classes_1_1Work__Template__Interface.html" title="Интерфейс Work_Template_Interface определяет контракт для классов, формирующих данные для шаблонов." alt="" coords="5,5,176,30"/>
<area shape="poly" title=" " alt="" coords="93,46,93,78,88,78,88,46"/>
</map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">см. легенду</a>]</span></center></div>
<div id="dynsection-1" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Граф связей класса Work_Template:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d9d/classPhotoRigma_1_1Classes_1_1Work__Template__coll__graph.png" border="0" usemap="#aWork__Template_coll__map" alt="Collaboration graph"/></div>
<map name="aWork__Template_coll__map" id="aWork__Template_coll__map">
<area shape="rect" title="Класс Work_Template отвечает за формирование данных для шаблонов." alt="" coords="168,179,280,203"/>
<area shape="rect" href="../../d8/d8a/interfacePhotoRigma_1_1Classes_1_1Work__Template__Interface.html" title="Интерфейс Work_Template_Interface определяет контракт для классов, формирующих данные для шаблонов." alt="" coords="5,92,176,117"/>
<area shape="poly" title=" " alt="" coords="123,123,207,176,204,181,120,127"/>
<area shape="rect" href="../../da/d88/interfacePhotoRigma_1_1Classes_1_1Database__Interface.html" title="Интерфейс Database_Interface определяет методы для работы с базой данных." alt="" coords="157,5,291,30"/>
<area shape="poly" title=" " alt="" coords="226,45,226,178,221,178,221,45"/>
<area shape="rect" href="../../df/dfe/classPhotoRigma_1_1Classes_1_1User.html" title="Класс по работе с пользователями и хранению данных о текущем пользователе." alt="" coords="272,92,322,117"/>
<area shape="poly" title=" " alt="" coords="246,40,289,90,285,94,242,43"/>
<area shape="poly" title=" " alt="" coords="279,130,236,180,232,177,275,126"/>
<area shape="rect" href="../../d0/d4f/interfacePhotoRigma_1_1Classes_1_1User__Interface.html" title="Интерфейс для работы с пользователями и группами." alt="" coords="316,5,423,30"/>
<area shape="poly" title=" " alt="" coords="352,43,309,94,305,90,348,40"/>
</map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">см. легенду</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Открытые члены</h2></td></tr>
<tr class="memitem:aebda93a95626971f99ba32c8ac7b4f30" id="r_aebda93a95626971f99ba32c8ac7b4f30"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aebda93a95626971f99ba32c8ac7b4f30">__construct</a> (<a class="el" href="../../da/d88/interfacePhotoRigma_1_1Classes_1_1Database__Interface.html">Database_Interface</a> $db, array $config)</td></tr>
<tr class="memdesc:aebda93a95626971f99ba32c8ac7b4f30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Конструктор класса.  <br /></td></tr>
<tr class="separator:aebda93a95626971f99ba32c8ac7b4f30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96d631a05b563f91f5494b409b357cbc" id="r_a96d631a05b563f91f5494b409b357cbc"><td class="memItemLeft" align="right" valign="top">&amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a96d631a05b563f91f5494b409b357cbc">__get</a> (string $name)</td></tr>
<tr class="memdesc:a96d631a05b563f91f5494b409b357cbc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Получает значение приватного свойства.  <br /></td></tr>
<tr class="separator:a96d631a05b563f91f5494b409b357cbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c8aa5e8f1335dd150232b9ba442d694" id="r_a7c8aa5e8f1335dd150232b9ba442d694"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7c8aa5e8f1335dd150232b9ba442d694">__set</a> (string $name, array $value)</td></tr>
<tr class="memdesc:a7c8aa5e8f1335dd150232b9ba442d694"><td class="mdescLeft">&#160;</td><td class="mdescRight">Устанавливает значение приватного свойства.  <br /></td></tr>
<tr class="separator:a7c8aa5e8f1335dd150232b9ba442d694"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c45daa80235f514090aa7789f5e93b3" id="r_a0c45daa80235f514090aa7789f5e93b3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0c45daa80235f514090aa7789f5e93b3">__isset</a> (string $name)</td></tr>
<tr class="separator:a0c45daa80235f514090aa7789f5e93b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf95d95540a3e47c5905a47db3424ed9" id="r_aaf95d95540a3e47c5905a47db3424ed9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaf95d95540a3e47c5905a47db3424ed9">set_lang</a> (array $lang)</td></tr>
<tr class="memdesc:aaf95d95540a3e47c5905a47db3424ed9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Установка языковых данных через сеттер.  <br /></td></tr>
<tr class="separator:aaf95d95540a3e47c5905a47db3424ed9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac632034f4e83ba35a7b3e2124829e0c2" id="r_ac632034f4e83ba35a7b3e2124829e0c2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac632034f4e83ba35a7b3e2124829e0c2">set_user</a> (<a class="el" href="../../df/dfe/classPhotoRigma_1_1Classes_1_1User.html">User</a> $user)</td></tr>
<tr class="memdesc:ac632034f4e83ba35a7b3e2124829e0c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Установка данных пользователя через сеттер.  <br /></td></tr>
<tr class="separator:ac632034f4e83ba35a7b3e2124829e0c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af970fc714c16e27d2d60d698522a8504" id="r_af970fc714c16e27d2d60d698522a8504"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af970fc714c16e27d2d60d698522a8504">create_menu</a> (string $action, int $menu)</td></tr>
<tr class="memdesc:af970fc714c16e27d2d60d698522a8504"><td class="mdescLeft">&#160;</td><td class="mdescRight">Метод формирует массив данных для меню в зависимости от типа и активного пункта.  <br /></td></tr>
<tr class="separator:af970fc714c16e27d2d60d698522a8504"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f3df8874c79377e6a8b4398ea6ad774" id="r_a1f3df8874c79377e6a8b4398ea6ad774"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1f3df8874c79377e6a8b4398ea6ad774">template_user</a> ()</td></tr>
<tr class="memdesc:a1f3df8874c79377e6a8b4398ea6ad774"><td class="mdescLeft">&#160;</td><td class="mdescRight">Формирование блока пользователя.  <br /></td></tr>
<tr class="separator:a1f3df8874c79377e6a8b4398ea6ad774"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a116ebcf799d07566a74e7e765aecc1b7" id="r_a116ebcf799d07566a74e7e765aecc1b7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a116ebcf799d07566a74e7e765aecc1b7">template_stat</a> ()</td></tr>
<tr class="memdesc:a116ebcf799d07566a74e7e765aecc1b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Генерирует массив статистических данных для шаблона.  <br /></td></tr>
<tr class="separator:a116ebcf799d07566a74e7e765aecc1b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9143fed87a3064985e0b51fe5fbb4ac3" id="r_a9143fed87a3064985e0b51fe5fbb4ac3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9143fed87a3064985e0b51fe5fbb4ac3">template_best_user</a> (int $best_user=1)</td></tr>
<tr class="memdesc:a9143fed87a3064985e0b51fe5fbb4ac3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Формирует список пользователей, загрузивших наибольшее количество изображений.  <br /></td></tr>
<tr class="separator:a9143fed87a3064985e0b51fe5fbb4ac3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Защищенные члены</h2></td></tr>
<tr class="memitem:a44160f09c7dbb17349602f0862c95d62" id="r_a44160f09c7dbb17349602f0862c95d62"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a44160f09c7dbb17349602f0862c95d62">_create_menu_internal</a> (string $action, int $menu)</td></tr>
<tr class="memdesc:a44160f09c7dbb17349602f0862c95d62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Метод формирует массив данных для меню в зависимости от типа и активного пункта.  <br /></td></tr>
<tr class="separator:a44160f09c7dbb17349602f0862c95d62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c85b7dc68591aedd8df9848c1a08dd0" id="r_a4c85b7dc68591aedd8df9848c1a08dd0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4c85b7dc68591aedd8df9848c1a08dd0">_template_user_internal</a> ()</td></tr>
<tr class="memdesc:a4c85b7dc68591aedd8df9848c1a08dd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Формирование блока пользователя.  <br /></td></tr>
<tr class="separator:a4c85b7dc68591aedd8df9848c1a08dd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1a946d518250f1085369cfad3719cc3" id="r_ad1a946d518250f1085369cfad3719cc3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad1a946d518250f1085369cfad3719cc3">_template_stat_internal</a> ()</td></tr>
<tr class="memdesc:ad1a946d518250f1085369cfad3719cc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Генерирует массив статистических данных для шаблона.  <br /></td></tr>
<tr class="separator:ad1a946d518250f1085369cfad3719cc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c272bd5112b72e9047a6dafdd9cfd8c" id="r_a7c272bd5112b72e9047a6dafdd9cfd8c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7c272bd5112b72e9047a6dafdd9cfd8c">_template_best_user_internal</a> (int $best_user=1)</td></tr>
<tr class="memdesc:a7c272bd5112b72e9047a6dafdd9cfd8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Формирует список пользователей, загрузивших наибольшее количество изображений.  <br /></td></tr>
<tr class="separator:a7c272bd5112b72e9047a6dafdd9cfd8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Закрытые данные</h2></td></tr>
<tr class="memitem:ab76f8f2ac851632a23ef69df2bd99dad" id="r_ab76f8f2ac851632a23ef69df2bd99dad"><td class="memItemLeft" align="right" valign="top">array&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab76f8f2ac851632a23ef69df2bd99dad">$config</a></td></tr>
<tr class="memdesc:ab76f8f2ac851632a23ef69df2bd99dad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Конфигурация приложения.  <br /></td></tr>
<tr class="separator:ab76f8f2ac851632a23ef69df2bd99dad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fd8978d2c6cbdcfdd6be875be161b7b" id="r_a9fd8978d2c6cbdcfdd6be875be161b7b"><td class="memItemLeft" align="right" valign="top">array&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9fd8978d2c6cbdcfdd6be875be161b7b">$lang</a> = null</td></tr>
<tr class="memdesc:a9fd8978d2c6cbdcfdd6be875be161b7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Языковые данные.  <br /></td></tr>
<tr class="separator:a9fd8978d2c6cbdcfdd6be875be161b7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18e3eac65d39ced5231d9b3e3630ba75" id="r_a18e3eac65d39ced5231d9b3e3630ba75"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d88/interfacePhotoRigma_1_1Classes_1_1Database__Interface.html">Database_Interface</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a18e3eac65d39ced5231d9b3e3630ba75">$db</a></td></tr>
<tr class="memdesc:a18e3eac65d39ced5231d9b3e3630ba75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Объект для работы с базой данных.  <br /></td></tr>
<tr class="separator:a18e3eac65d39ced5231d9b3e3630ba75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35c45cc33d8d420da794514df59466b7" id="r_a35c45cc33d8d420da794514df59466b7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../df/dfe/classPhotoRigma_1_1Classes_1_1User.html">User</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a35c45cc33d8d420da794514df59466b7">$user</a> = null</td></tr>
<tr class="memdesc:a35c45cc33d8d420da794514df59466b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Объект пользователя.  <br /></td></tr>
<tr class="separator:a35c45cc33d8d420da794514df59466b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Подробное описание</h2>
<div class="textblock"><p>Класс Work_Template отвечает за формирование данных для шаблонов. </p>
<p>Класс реализует интерфейс Work_Template_Interface и предоставляет методы для генерации данных, необходимых для отображения различных блоков на странице, таких как меню, блок пользователя, статистика и список лучших пользователей. Все данные формируются на основе запросов к базе данных и конфигурации.</p>
<dl class="section see"><dt>См. также</dt><dd><a class="el" href="../../d8/d8a/interfacePhotoRigma_1_1Classes_1_1Work__Template__Interface.html" title="Интерфейс Work_Template_Interface определяет контракт для классов, формирующих данные для шаблонов.">PhotoRigma\Classes\Work_Template_Interface</a> Интерфейс, который реализует данный класс. </dd>
<dd>
<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a8ecb9d3a6cba675b7a2d72ddc14b53f3" title="Очистка строки от HTML-тегов и специальных символов.">PhotoRigma\Classes\Work\clean_field()</a> Метод для очистки данных. </dd>
<dd>
<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a41518918c225073130bc7a73983d72ff" title="Проверка MIME-типа файла через доступные библиотеки.">PhotoRigma\Classes\Work\validate_mime_type()</a> Метод для проверки MIME-типа файла.</dd></dl>
<dl class="section note"><dt>Заметки</dt><dd>Использованы константы:<ul>
<li>DEFAULT_AVATAR - Аваар по-умолчанию,</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Убедитесь, что передаваемые параметры в методы корректны, так как это может привести к ошибкам.</dd></dl>
<p>Пример использования класса: </p><div class="fragment"><div class="line"><span class="comment">// Создание экземпляра класса Work_Template</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#aa3e9534005fd516d941f6a5569896e01">$template</a> = <span class="keyword">new</span> <a class="code hl_class" href="../../d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template.html">PhotoRigma::Classes::Work_Template</a>();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Генерация данных для меню</span></div>
<div class="line">$menu_data = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#aa3e9534005fd516d941f6a5569896e01">$template</a>-&gt;create_menu(<span class="stringliteral">&#39;home&#39;</span>, 0);</div>
<div class="line">print_r($menu_data);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Генерация данных для блока пользователя</span></div>
<div class="line">$user_block = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#aa3e9534005fd516d941f6a5569896e01">$template</a>-&gt;template_user();</div>
<div class="line">print_r($user_block);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Генерация статистических данных</span></div>
<div class="line">$stat_data = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#aa3e9534005fd516d941f6a5569896e01">$template</a>-&gt;template_stat();</div>
<div class="line">print_r($stat_data);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Генерация списка лучших пользователей</span></div>
<div class="line">$best_users = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#aa3e9534005fd516d941f6a5569896e01">$template</a>-&gt;template_best_user(3);</div>
<div class="line">print_r($best_users);</div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Template_html"><div class="ttname"><a href="../../d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template.html">PhotoRigma\Classes\Work_Template</a></div><div class="ttdoc">Класс Work_Template отвечает за формирование данных для шаблонов.</div><div class="ttdef"><b>Определения</b> <a href="../../d9/d2a/work__template_8php_source.html#l00328">work_template.php:329</a></div></div>
<div class="ttc" id="anamespacePhotoRigma_html_aa3e9534005fd516d941f6a5569896e01"><div class="ttname"><a href="../../de/d90/namespacePhotoRigma.html#aa3e9534005fd516d941f6a5569896e01">PhotoRigma\$template</a></div><div class="ttdeci">$template</div><div class="ttdoc">Создание объекта класса Template.</div><div class="ttdef"><b>Определения</b> <a href="../../de/d20/index_8php_source.html#l00219">index.php:219</a></div></div>
</div><!-- fragment --> 
<p class="definition">См. определение в файле <a class="el" href="../../d9/d2a/work__template_8php_source.html">work_template.php</a> строка <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00328">328</a></p>
</div><h2 class="groupheader">Конструктор(ы)</h2>
<a id="aebda93a95626971f99ba32c8ac7b4f30" name="aebda93a95626971f99ba32c8ac7b4f30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebda93a95626971f99ba32c8ac7b4f30">&#9670;&#160;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__construct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/d88/interfacePhotoRigma_1_1Classes_1_1Database__Interface.html">Database_Interface</a></td>          <td class="paramname"><span class="paramname"><em>$db</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$config</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Конструктор класса. </p>
<p>Инициализирует зависимости: конфигурацию, базу данных и объект класса Work. Все параметры обязательны для корректной работы класса.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$config</td><td>Конфигурация приложения. Должен быть массивом. Если передан некорректный тип, выбрасывается исключение. </td></tr>
    <tr><td class="paramtype">Database_Interface</td><td class="paramname">$db</td><td>Объект для работы с базой данных.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Если параметр $config не является массивом.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Важно: все зависимости должны быть корректно инициализированы перед использованием класса. </dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Не передавайте в конструктор некорректные или пустые зависимости, так как это может привести к ошибкам.</dd></dl>
<p>Пример использования конструктора: </p><div class="fragment"><div class="line"><a class="code hl_variable" href="#ab76f8f2ac851632a23ef69df2bd99dad">$config</a> = [<span class="stringliteral">&#39;temp_photo_w&#39;</span> =&gt; 800];</div>
<div class="line"><a class="code hl_variable" href="#a18e3eac65d39ced5231d9b3e3630ba75">$db</a> = <span class="keyword">new</span> <a class="code hl_class" href="../../d6/db6/classPhotoRigma_1_1Classes_1_1Database.html">Database</a>();</div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#aa3e9534005fd516d941f6a5569896e01">$template</a> = <span class="keyword">new</span> <a class="code hl_class" href="../../d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template.html">Work_Template</a>(<a class="code hl_variable" href="#ab76f8f2ac851632a23ef69df2bd99dad">$config</a>, <a class="code hl_variable" href="#a18e3eac65d39ced5231d9b3e3630ba75">$db</a>);</div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Database_html"><div class="ttname"><a href="../../d6/db6/classPhotoRigma_1_1Classes_1_1Database.html">PhotoRigma\Classes\Database</a></div><div class="ttdoc">Класс Database реализует интерфейс Database_Interface и отвечает за работу с различными базами данных...</div><div class="ttdef"><b>Определения</b> <a href="../../dc/d82/db_8php_source.html#l00542">db.php:543</a></div></div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Template_html_a18e3eac65d39ced5231d9b3e3630ba75"><div class="ttname"><a href="#a18e3eac65d39ced5231d9b3e3630ba75">PhotoRigma\Classes\Work_Template\$db</a></div><div class="ttdeci">Database_Interface $db</div><div class="ttdoc">Объект для работы с базой данных.</div><div class="ttdef"><b>Определения</b> <a href="../../d9/d2a/work__template_8php_source.html#l00333">work_template.php:333</a></div></div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Template_html_ab76f8f2ac851632a23ef69df2bd99dad"><div class="ttname"><a href="#ab76f8f2ac851632a23ef69df2bd99dad">PhotoRigma\Classes\Work_Template\$config</a></div><div class="ttdeci">array $config</div><div class="ttdoc">Конфигурация приложения.</div><div class="ttdef"><b>Определения</b> <a href="../../d9/d2a/work__template_8php_source.html#l00331">work_template.php:331</a></div></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html">PhotoRigma\Classes\Work</a> Родительский класс, через который передаются зависимости. </dd>
<dd>
<a class="el" href="#ab76f8f2ac851632a23ef69df2bd99dad" title="Конфигурация приложения.">PhotoRigma\Classes\Work_Template\$config</a> Свойство, содержащее конфигурацию приложения. </dd>
<dd>
<a class="el" href="#a18e3eac65d39ced5231d9b3e3630ba75" title="Объект для работы с базой данных.">PhotoRigma\Classes\Work_Template\$db</a> Свойство, содержащее объект для работы с базой данных. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../d9/d2a/work__template_8php_source.html">work_template.php</a> строка <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00365">365</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00331">$config</a> и <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00333">$db</a>.</p>

</div>
</div>
<h2 class="groupheader">Методы</h2>
<a id="a96d631a05b563f91f5494b409b357cbc" name="a96d631a05b563f91f5494b409b357cbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96d631a05b563f91f5494b409b357cbc">&#9670;&#160;</a></span>__get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">&amp; __get </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$name</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Получает значение приватного свойства. </p>
<p>Метод позволяет получить доступ к приватному свойству <code>$config</code>. Если запрашиваемое свойство не существует, выбрасывается исключение. Доступ разрешён только к свойству <code>$config</code>.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$name</td><td>Имя свойства:<ul>
<li>Допустимое значение: 'config'.</li>
<li>Если указано другое имя, выбрасывается исключение.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>array Значение свойства <code>$config</code>.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Если запрашиваемое свойство не существует.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Этот метод предназначен только для доступа к свойству <code>$config</code>. </dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Не используйте этот метод для доступа к другим свойствам, так как это вызовет исключение.</dd></dl>
<p>Пример использования метода: </p><div class="fragment"><div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#aa3e9534005fd516d941f6a5569896e01">$template</a> = new \PhotoRigma\Classes\Work_Template([<span class="stringliteral">&#39;temp_photo_w&#39;</span> =&gt; 800], <a class="code hl_variable" href="#a18e3eac65d39ced5231d9b3e3630ba75">$db</a>, <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>);</div>
<div class="line">echo <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#aa3e9534005fd516d941f6a5569896e01">$template</a>-&gt;config[<span class="stringliteral">&#39;temp_photo_w&#39;</span>]; <span class="comment">// Выведет: 800</span></div>
<div class="ttc" id="anamespacePhotoRigma_html_a2429001fb0fa404b4fe0ab42a91a9a48"><div class="ttname"><a href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">PhotoRigma\$work</a></div><div class="ttdeci">$work</div><div class="ttdoc">Создание объекта класса Work.</div><div class="ttdef"><b>Определения</b> <a href="../../de/d20/index_8php_source.html#l00187">index.php:187</a></div></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#ab76f8f2ac851632a23ef69df2bd99dad" title="Конфигурация приложения.">PhotoRigma\Classes\Work_Template\$config</a> Свойство, к которому обращается метод. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../d9/d2a/work__template_8php_source.html">work_template.php</a> строка <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00400">400</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00331">$config</a>.</p>

</div>
</div>
<a id="a0c45daa80235f514090aa7789f5e93b3" name="a0c45daa80235f514090aa7789f5e93b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c45daa80235f514090aa7789f5e93b3">&#9670;&#160;</a></span>__isset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__isset </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$name</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../d9/d2a/work__template_8php_source.html">work_template.php</a> строка <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00450">450</a></p>

</div>
</div>
<a id="a7c8aa5e8f1335dd150232b9ba442d694" name="a7c8aa5e8f1335dd150232b9ba442d694"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c8aa5e8f1335dd150232b9ba442d694">&#9670;&#160;</a></span>__set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__set </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$value</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Устанавливает значение приватного свойства. </p>
<p>Метод позволяет изменить значение приватного свойства <code>$config</code>. Если переданное имя свойства не соответствует <code>$config</code>, выбрасывается исключение.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$name</td><td>Имя свойства:<ul>
<li>Допустимое значение: 'config'.</li>
<li>Если указано другое имя, выбрасывается исключение. </li>
</ul>
</td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$value</td><td>Новое значение свойства:<ul>
<li>Должен быть массивом.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Если переданное имя свойства не соответствует <code>$config</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Этот метод предназначен только для изменения свойства <code>$config</code>. </dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Не используйте этот метод для изменения других свойств, так как это вызовет исключение.</dd></dl>
<p>Пример использования метода: </p><div class="fragment"><div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#aa3e9534005fd516d941f6a5569896e01">$template</a> = new \PhotoRigma\Classes\Work_Template([], <a class="code hl_variable" href="#a18e3eac65d39ced5231d9b3e3630ba75">$db</a>, <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>);</div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#aa3e9534005fd516d941f6a5569896e01">$template</a>-&gt;config = [<span class="stringliteral">&#39;temp_photo_w&#39;</span> =&gt; 1024];</div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#ab76f8f2ac851632a23ef69df2bd99dad" title="Конфигурация приложения.">PhotoRigma\Classes\Work_Template\$config</a> Свойство, которое изменяет метод. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../d9/d2a/work__template_8php_source.html">work_template.php</a> строка <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00439">439</a></p>

</div>
</div>
<a id="a44160f09c7dbb17349602f0862c95d62" name="a44160f09c7dbb17349602f0862c95d62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44160f09c7dbb17349602f0862c95d62">&#9670;&#160;</a></span>_create_menu_internal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">_create_menu_internal </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$action</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$menu</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Метод формирует массив данных для меню в зависимости от типа и активного пункта. </p>
<p>Метод формирует массив данных для меню на основе запроса к базе данных, учитывая тип меню и активный пункт. Поддерживаемые типы меню:</p><ul>
<li>0: Горизонтальное краткое меню.</li>
<li>1: Вертикальное боковое меню. Для каждого пункта меню проверяются права доступа текущего пользователя (на основе свойств $this-&gt;user). Если пункт меню видим, он добавляется в результат с очисткой данных через Work::clean_field(). Метод является защищённым и предназначен для использования внутри класса или его наследников. Основная логика вызывается через публичный метод create_menu().</li>
</ul>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$action</td><td>Активный пункт меню. Указывается строка, соответствующая активному пункту меню (например, 'home', 'profile'). </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$menu</td><td>Тип меню:<ul>
<li>0: Горизонтальное краткое меню.</li>
<li>1: Вертикальное боковое меню. Другие значения недопустимы и приведут к выбросу исключения InvalidArgumentException.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>array Массив с данными для меню. Каждый элемент массива содержит:<ul>
<li>Ключ 'url': URL пункта меню (null, если пункт активен).</li>
<li>Ключ 'name': Название пункта меню (локализованное через $this-&gt;lang['menu'] или дефолтное значение). Если меню пустое, возвращается пустой массив.</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Если передан некорректный $menu или $action. </td></tr>
    <tr><td class="paramname">RuntimeException</td><td>Если произошла ошибка при выполнении запроса к базе данных.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Данные для меню берутся из таблицы TBL_MENU. Для получения дополнительной информации см. структуру таблицы.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Убедитесь, что передаваемые параметры корректны, так как это может привести к ошибкам. Также убедитесь, что права доступа пользователя ($this-&gt;user) настроены правильно.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Пример использования метода _create_menu_internal()</span></div>
<div class="line">$short_menu = $this-&gt;<a class="code hl_function" href="#a44160f09c7dbb17349602f0862c95d62">_create_menu_internal</a>(<span class="stringliteral">&#39;home&#39;</span>, 0); <span class="comment">// Создание горизонтального меню</span></div>
<div class="line">print_r($short_menu);</div>
<div class="line"> </div>
<div class="line">$long_menu = $this-&gt;<a class="code hl_function" href="#a44160f09c7dbb17349602f0862c95d62">_create_menu_internal</a>(<span class="stringliteral">&#39;profile&#39;</span>, 1); <span class="comment">// Создание вертикального меню</span></div>
<div class="line">print_r($long_menu);</div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Template_html_a44160f09c7dbb17349602f0862c95d62"><div class="ttname"><a href="#a44160f09c7dbb17349602f0862c95d62">PhotoRigma\Classes\Work_Template\_create_menu_internal</a></div><div class="ttdeci">_create_menu_internal(string $action, int $menu)</div><div class="ttdoc">Метод формирует массив данных для меню в зависимости от типа и активного пункта.</div><div class="ttdef"><b>Определения</b> <a href="../../d9/d2a/work__template_8php_source.html#l00640">work_template.php:640</a></div></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#af970fc714c16e27d2d60d698522a8504" title="Метод формирует массив данных для меню в зависимости от типа и активного пункта.">PhotoRigma\Classes\Work_Template\create_menu()</a> Публичный метод, который вызывает этот внутренний метод. </dd>
<dd>
<a class="el" href="#a18e3eac65d39ced5231d9b3e3630ba75" title="Объект для работы с базой данных.">PhotoRigma\Classes\Work_Template\$db</a> Свойство, содержащее объект базы данных. </dd>
<dd>
<a class="el" href="#a9fd8978d2c6cbdcfdd6be875be161b7b" title="Языковые данные.">PhotoRigma\Classes\Work_Template\$lang</a> Свойство, содержащее языковые строки. </dd>
<dd>
<a class="el" href="#a35c45cc33d8d420da794514df59466b7" title="Объект пользователя.">PhotoRigma\Classes\Work_Template\$user</a> Свойство, содержащее данные текущего пользователя. </dd>
<dd>
<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a8ecb9d3a6cba675b7a2d72ddc14b53f3" title="Очистка строки от HTML-тегов и специальных символов.">PhotoRigma\Classes\Work\clean_field()</a> Статический метод для очистки данных. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../d9/d2a/work__template_8php_source.html">work_template.php</a> строка <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00640">640</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../de/d20/index_8php_source.html#l00247">PhotoRigma\$action</a> и <a class="el" href="../../dc/d7a/work_8php_source.html#l00851">Work\clean_field()</a>.</p>

<p class="reference">Используется в <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00577">create_menu()</a>.</p>
<div id="dynsection-2" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a44160f09c7dbb17349602f0862c95d62_cgraph.png" border="0" usemap="#ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a44160f09c7dbb17349602f0862c95d62_cgraph" alt=""/></div>
<map name="ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a44160f09c7dbb17349602f0862c95d62_cgraph" id="ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a44160f09c7dbb17349602f0862c95d62_cgraph">
<area shape="rect" title="Метод формирует массив данных для меню в зависимости от типа и активного пункта." alt="" coords="5,19,158,44"/>
<area shape="rect" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a8ecb9d3a6cba675b7a2d72ddc14b53f3" title="Очистка строки от HTML&#45;тегов и специальных символов." alt="" coords="206,12,349,51"/>
<area shape="poly" title=" " alt="" coords="158,29,190,29,190,34,158,34"/>
<area shape="rect" href="../../db/d20/classPhotoRigma_1_1Classes_1_1Work__Helper.html#ab73ba07b8376dd2e1764240c73a338ea" title="Очистка строки от HTML&#45;тегов и специальных символов (публичная обёртка)." alt="" coords="397,12,562,51"/>
<area shape="poly" title=" " alt="" coords="350,29,381,29,381,34,350,34"/>
<area shape="rect" href="../../db/d20/classPhotoRigma_1_1Classes_1_1Work__Helper.html#ae7fce393b631f688e62115acde6b2641" title="Очистка строки от HTML&#45;тегов и специальных символов (защищённый метод)." alt="" coords="610,5,754,58"/>
<area shape="poly" title=" " alt="" coords="563,29,595,29,595,34,563,34"/>
</map>
</div>
<div id="dynsection-3" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a44160f09c7dbb17349602f0862c95d62_icgraph.png" border="0" usemap="#ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a44160f09c7dbb17349602f0862c95d62_icgraph" alt=""/></div>
<map name="ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a44160f09c7dbb17349602f0862c95d62_icgraph" id="ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a44160f09c7dbb17349602f0862c95d62_icgraph">
<area shape="rect" title="Метод формирует массив данных для меню в зависимости от типа и активного пункта." alt="" coords="150,5,302,30"/>
<area shape="rect" href="../../d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template.html#af970fc714c16e27d2d60d698522a8504" title="Метод формирует массив данных для меню в зависимости от типа и активного пункта." alt="" coords="5,5,102,30"/>
<area shape="poly" title=" " alt="" coords="134,20,102,20,102,15,134,15"/>
</map>
</div>

</div>
</div>
<a id="a7c272bd5112b72e9047a6dafdd9cfd8c" name="a7c272bd5112b72e9047a6dafdd9cfd8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c272bd5112b72e9047a6dafdd9cfd8c">&#9670;&#160;</a></span>_template_best_user_internal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">_template_best_user_internal </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$best_user</em></span><span class="paramdefsep"> = </span><span class="paramdefval">1</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Формирует список пользователей, загрузивших наибольшее количество изображений. </p>
<p>Метод выполняет запрос к базе данных с использованием JOIN для получения списка пользователей, которые загрузили наибольшее количество фотографий. Результат формируется в виде ассоциативного массива, который используется для отображения в шаблоне. Если данные отсутствуют, добавляется запись "пустого" пользователя. Метод является защищённым и предназначен для использования внутри класса или его наследников. Основная логика вызывается через публичный метод template_best_user().</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$best_user</td><td>Количество лучших пользователей для вывода. Должно быть положительным целым числом. Если передано недопустимое значение, выбрасывается исключение InvalidArgumentException.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>array Массив данных для вывода в шаблон:<ul>
<li>NAME_BLOCK: Название блока (локализованное через $this-&gt;lang['main']['best_user']).</li>
<li>L_USER_NAME: Подпись для имени пользователя (локализованная строка).</li>
<li>L_USER_PHOTO: Подпись для количества фотографий (локализованная строка).</li>
<li>user_url: Ссылка на профиль пользователя (null, если данных нет).</li>
<li>user_name: Имя пользователя ('&mdash;', если данных нет).</li>
<li>user_photo: Количество загруженных фотографий ('-', если данных нет).</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Если параметр $best_user не является положительным целым числом.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Если запрос к базе данных не возвращает данных, добавляется запись "пустого" пользователя:<ul>
<li>user_url: null</li>
<li>user_name: '&mdash;'</li>
<li>user_photo: '-'</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Убедитесь, что таблицы базы данных (TBL_USERS и TBL_PHOTO) содержат корректные данные. Ошибки в структуре таблиц могут привести к некорректному результату.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Пример вызова метода внутри класса</span></div>
<div class="line">$best_users = $this-&gt;<a class="code hl_function" href="#a7c272bd5112b72e9047a6dafdd9cfd8c">_template_best_user_internal</a>(3);</div>
<div class="line">print_r($best_users);</div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Template_html_a7c272bd5112b72e9047a6dafdd9cfd8c"><div class="ttname"><a href="#a7c272bd5112b72e9047a6dafdd9cfd8c">PhotoRigma\Classes\Work_Template\_template_best_user_internal</a></div><div class="ttdeci">_template_best_user_internal(int $best_user=1)</div><div class="ttdoc">Формирует список пользователей, загрузивших наибольшее количество изображений.</div><div class="ttdef"><b>Определения</b> <a href="../../d9/d2a/work__template_8php_source.html#l01172">work_template.php:1172</a></div></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a8ecb9d3a6cba675b7a2d72ddc14b53f3" title="Очистка строки от HTML-тегов и специальных символов.">PhotoRigma\Classes\Work\clean_field()</a> Метод для очистки данных.</dd>
<dd>
<a class="el" href="#a9143fed87a3064985e0b51fe5fbb4ac3" title="Формирует список пользователей, загрузивших наибольшее количество изображений.">PhotoRigma\Classes\Work_Template\template_best_user()</a> Публичный метод, который вызывает этот внутренний метод. </dd>
<dd>
<a class="el" href="#a9fd8978d2c6cbdcfdd6be875be161b7b" title="Языковые данные.">PhotoRigma\Classes\Work_Template\$lang</a> Свойство, содержащее языковые строки. </dd>
<dd>
<a class="el" href="#a18e3eac65d39ced5231d9b3e3630ba75" title="Объект для работы с базой данных.">PhotoRigma\Classes\Work_Template\$db</a> Свойство, содержащее объект для работы с базой данных. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../d9/d2a/work__template_8php_source.html">work_template.php</a> строка <a class="el" href="../../d9/d2a/work__template_8php_source.html#l01172">1172</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../dc/d7a/work_8php_source.html#l00851">Work\clean_field()</a>.</p>

<p class="reference">Используется в <a class="el" href="../../d9/d2a/work__template_8php_source.html#l01117">template_best_user()</a>.</p>
<div id="dynsection-4" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a7c272bd5112b72e9047a6dafdd9cfd8c_cgraph.png" border="0" usemap="#ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a7c272bd5112b72e9047a6dafdd9cfd8c_cgraph" alt=""/></div>
<map name="ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a7c272bd5112b72e9047a6dafdd9cfd8c_cgraph" id="ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a7c272bd5112b72e9047a6dafdd9cfd8c_cgraph">
<area shape="rect" title="Формирует список пользователей, загрузивших наибольшее количество изображений." alt="" coords="5,12,148,51"/>
<area shape="rect" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a8ecb9d3a6cba675b7a2d72ddc14b53f3" title="Очистка строки от HTML&#45;тегов и специальных символов." alt="" coords="196,12,339,51"/>
<area shape="poly" title=" " alt="" coords="148,29,180,29,180,34,148,34"/>
<area shape="rect" href="../../db/d20/classPhotoRigma_1_1Classes_1_1Work__Helper.html#ab73ba07b8376dd2e1764240c73a338ea" title="Очистка строки от HTML&#45;тегов и специальных символов (публичная обёртка)." alt="" coords="387,12,552,51"/>
<area shape="poly" title=" " alt="" coords="340,29,371,29,371,34,340,34"/>
<area shape="rect" href="../../db/d20/classPhotoRigma_1_1Classes_1_1Work__Helper.html#ae7fce393b631f688e62115acde6b2641" title="Очистка строки от HTML&#45;тегов и специальных символов (защищённый метод)." alt="" coords="600,5,744,58"/>
<area shape="poly" title=" " alt="" coords="553,29,585,29,585,34,553,34"/>
</map>
</div>
<div id="dynsection-5" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a7c272bd5112b72e9047a6dafdd9cfd8c_icgraph.png" border="0" usemap="#ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a7c272bd5112b72e9047a6dafdd9cfd8c_icgraph" alt=""/></div>
<map name="ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a7c272bd5112b72e9047a6dafdd9cfd8c_icgraph" id="ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a7c272bd5112b72e9047a6dafdd9cfd8c_icgraph">
<area shape="rect" title="Формирует список пользователей, загрузивших наибольшее количество изображений." alt="" coords="189,5,331,44"/>
<area shape="rect" href="../../d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template.html#a9143fed87a3064985e0b51fe5fbb4ac3" title="Формирует список пользователей, загрузивших наибольшее количество изображений." alt="" coords="5,12,141,37"/>
<area shape="poly" title=" " alt="" coords="173,27,141,27,141,22,173,22"/>
</map>
</div>

</div>
</div>
<a id="ad1a946d518250f1085369cfad3719cc3" name="ad1a946d518250f1085369cfad3719cc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1a946d518250f1085369cfad3719cc3">&#9670;&#160;</a></span>_template_stat_internal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">_template_stat_internal </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Генерирует массив статистических данных для шаблона. </p>
<p>Метод выполняет запросы к базе данных для получения статистической информации о пользователях, категориях, фотографиях, оценках и онлайн-пользователях. Результат формируется в виде ассоциативного массива, который используется для отображения статистики на странице. Этот метод вызывается через редирект из публичного метода. Время онлайна жестко закодировано как 900 секунд (15 минут). Для изменения требуется ручное внесение изменений в код. Метод является защищённым и предназначен для использования внутри класса или его наследников. Основная логика вызывается через публичный метод template_stat().</p>
<dl class="section return"><dt>Возвращает</dt><dd>array Ассоциативный массив данных для вывода статистики:<ul>
<li>NAME_BLOCK: Название блока статистики.</li>
<li>L_STAT_REGIST: Подпись для количества зарегистрированных пользователей.</li>
<li>D_STAT_REGIST: Количество зарегистрированных пользователей.</li>
<li>L_STAT_PHOTO: Подпись для количества фотографий.</li>
<li>D_STAT_PHOTO: Количество фотографий.</li>
<li>L_STAT_CATEGORY: Подпись для количества категорий.</li>
<li>D_STAT_CATEGORY: Количество категорий (включая пользовательские альбомы).</li>
<li>L_STAT_USER_ADMIN: Подпись для количества администраторов.</li>
<li>D_STAT_USER_ADMIN: Количество администраторов.</li>
<li>L_STAT_USER_MODER: Подпись для количества модераторов.</li>
<li>D_STAT_USER_MODER: Количество модераторов.</li>
<li>L_STAT_RATE_USER: Подпись для количества пользовательских оценок.</li>
<li>D_STAT_RATE_USER: Количество пользовательских оценок.</li>
<li>L_STAT_RATE_MODER: Подпись для количества модераторских оценок.</li>
<li>D_STAT_RATE_MODER: Количество модераторских оценок.</li>
<li>L_STAT_ONLINE: Подпись для онлайн-пользователей.</li>
<li>D_STAT_ONLINE: Список онлайн-пользователей (HTML-ссылки) или сообщение об отсутствии онлайн-пользователей.</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">RuntimeException</td><td>Если возникает ошибка при выполнении запросов к базе данных.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Убедитесь, что таблицы базы данных (TBL_USERS, TBL_CATEGORY, TBL_PHOTO, TBL_RATE_USER, TBL_RATE_MODER) содержат корректные данные. Ошибки в структуре таблиц могут привести к некорректной статистике.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Пример вызова метода внутри класса</span></div>
<div class="line">$stat_data = $this-&gt;<a class="code hl_function" href="#ad1a946d518250f1085369cfad3719cc3">_template_stat_internal</a>();</div>
<div class="line">print_r($stat_data);</div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Template_html_ad1a946d518250f1085369cfad3719cc3"><div class="ttname"><a href="#ad1a946d518250f1085369cfad3719cc3">PhotoRigma\Classes\Work_Template\_template_stat_internal</a></div><div class="ttdeci">_template_stat_internal()</div><div class="ttdoc">Генерирует массив статистических данных для шаблона.</div><div class="ttdef"><b>Определения</b> <a href="../../d9/d2a/work__template_8php_source.html#l00976">work_template.php:976</a></div></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#a18e3eac65d39ced5231d9b3e3630ba75" title="Объект для работы с базой данных.">PhotoRigma\Classes\Work_Template\$db</a> Свойство, содержащее объект для работы с базой данных. </dd>
<dd>
<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a8ecb9d3a6cba675b7a2d72ddc14b53f3" title="Очистка строки от HTML-тегов и специальных символов.">PhotoRigma\Classes\Work\clean_field()</a> Метод для очистки данных.</dd>
<dd>
<a class="el" href="#a116ebcf799d07566a74e7e765aecc1b7" title="Генерирует массив статистических данных для шаблона.">PhotoRigma\Classes\Work_Template\template_stat()</a> Публичный метод, который вызывает этот внутренний метод. </dd>
<dd>
<a class="el" href="#a9fd8978d2c6cbdcfdd6be875be161b7b" title="Языковые данные.">PhotoRigma\Classes\Work_Template\$lang</a> Свойство, содержащее языковые строки. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../d9/d2a/work__template_8php_source.html">work_template.php</a> строка <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00976">976</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00334">$user</a> и <a class="el" href="../../dc/d7a/work_8php_source.html#l00851">Work\clean_field()</a>.</p>

<p class="reference">Используется в <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00918">template_stat()</a>.</p>
<div id="dynsection-6" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_ad1a946d518250f1085369cfad3719cc3_cgraph.png" border="0" usemap="#ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_ad1a946d518250f1085369cfad3719cc3_cgraph" alt=""/></div>
<map name="ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_ad1a946d518250f1085369cfad3719cc3_cgraph" id="ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_ad1a946d518250f1085369cfad3719cc3_cgraph">
<area shape="rect" title="Генерирует массив статистических данных для шаблона." alt="" coords="5,19,162,44"/>
<area shape="rect" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a8ecb9d3a6cba675b7a2d72ddc14b53f3" title="Очистка строки от HTML&#45;тегов и специальных символов." alt="" coords="210,12,353,51"/>
<area shape="poly" title=" " alt="" coords="162,29,194,29,194,34,162,34"/>
<area shape="rect" href="../../db/d20/classPhotoRigma_1_1Classes_1_1Work__Helper.html#ab73ba07b8376dd2e1764240c73a338ea" title="Очистка строки от HTML&#45;тегов и специальных символов (публичная обёртка)." alt="" coords="401,12,566,51"/>
<area shape="poly" title=" " alt="" coords="354,29,385,29,385,34,354,34"/>
<area shape="rect" href="../../db/d20/classPhotoRigma_1_1Classes_1_1Work__Helper.html#ae7fce393b631f688e62115acde6b2641" title="Очистка строки от HTML&#45;тегов и специальных символов (защищённый метод)." alt="" coords="614,5,758,58"/>
<area shape="poly" title=" " alt="" coords="567,29,599,29,599,34,567,34"/>
</map>
</div>
<div id="dynsection-7" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_ad1a946d518250f1085369cfad3719cc3_icgraph.png" border="0" usemap="#ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_ad1a946d518250f1085369cfad3719cc3_icgraph" alt=""/></div>
<map name="ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_ad1a946d518250f1085369cfad3719cc3_icgraph" id="ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_ad1a946d518250f1085369cfad3719cc3_icgraph">
<area shape="rect" title="Генерирует массив статистических данных для шаблона." alt="" coords="154,5,310,30"/>
<area shape="rect" href="../../d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template.html#a116ebcf799d07566a74e7e765aecc1b7" title="Генерирует массив статистических данных для шаблона." alt="" coords="5,5,106,30"/>
<area shape="poly" title=" " alt="" coords="138,20,106,20,106,15,138,15"/>
</map>
</div>

</div>
</div>
<a id="a4c85b7dc68591aedd8df9848c1a08dd0" name="a4c85b7dc68591aedd8df9848c1a08dd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c85b7dc68591aedd8df9848c1a08dd0">&#9670;&#160;</a></span>_template_user_internal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">_template_user_internal </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Формирование блока пользователя. </p>
<p>Метод формирует массив данных для блока пользователя в зависимости от статуса авторизации:</p><ul>
<li>Если пользователь не авторизован, формируется блок со ссылками на вход, восстановление пароля и регистрацию.</li>
<li>Если пользователь авторизован, формируется блок с приветствием, группой и аватаром. Для авторизованных пользователей проверяется существование аватара и его MIME-тип через Work::validate_mime_type(). Если аватар недоступен или имеет недопустимый MIME-тип, используется дефолтный аватар (DEFAULT_AVATAR). Метод является защищённым и предназначен для использования внутри класса или его наследников. Основная логика вызывается через публичный метод template_user().</li>
</ul>
<dl class="section return"><dt>Возвращает</dt><dd>array Массив с данными для блока пользователя:<ul>
<li>Для неавторизованных пользователей:<ul>
<li>'NAME_BLOCK': Название блока.</li>
<li>'L_LOGIN', 'L_PASSWORD', 'L_ENTER', 'L_FORGOT_PASSWORD', 'L_REGISTRATION': Локализованные строки.</li>
<li>'U_LOGIN', 'U_FORGOT_PASSWORD', 'U_REGISTRATION': URL для входа, восстановления пароля и регистрации.</li>
</ul>
</li>
<li>Для авторизованных пользователей:<ul>
<li>'NAME_BLOCK': Название блока.</li>
<li>'L_HI_USER': Приветствие с именем пользователя.</li>
<li>'L_GROUP': Группа пользователя.</li>
<li>'U_AVATAR': URL аватара (или дефолтного аватара, если файл недоступен или некорректен).</li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">RuntimeException</td><td>Если объект пользователя не установлен или данные некорректны. </td></tr>
    <tr><td class="paramname">RandomException</td><td></td></tr>
    <tr><td class="paramname">Exception</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Используется глобальная переменная $_SESSION для проверки статуса авторизации.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Убедитесь, что объект пользователя ($this-&gt;user) корректно установлен перед вызовом метода. Также убедитесь, что конфигурация аватаров ($this-&gt;config['avatar_folder']) настроена правильно.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Пример вызова метода внутри класса</span></div>
<div class="line">$array_data = $this-&gt;<a class="code hl_function" href="#a4c85b7dc68591aedd8df9848c1a08dd0">_template_user_internal</a>();</div>
<div class="line">print_r($array_data);</div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Template_html_a4c85b7dc68591aedd8df9848c1a08dd0"><div class="ttname"><a href="#a4c85b7dc68591aedd8df9848c1a08dd0">PhotoRigma\Classes\Work_Template\_template_user_internal</a></div><div class="ttdeci">_template_user_internal()</div><div class="ttdoc">Формирование блока пользователя.</div><div class="ttdef"><b>Определения</b> <a href="../../d9/d2a/work__template_8php_source.html#l00813">work_template.php:813</a></div></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#a35c45cc33d8d420da794514df59466b7" title="Объект пользователя.">PhotoRigma\Classes\Work_Template\$user</a> Свойство, содержащее данные текущего пользователя. </dd>
<dd>
<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a8ecb9d3a6cba675b7a2d72ddc14b53f3" title="Очистка строки от HTML-тегов и специальных символов.">PhotoRigma\Classes\Work\clean_field()</a> Метод для очистки данных. </dd>
<dd>
<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a41518918c225073130bc7a73983d72ff" title="Проверка MIME-типа файла через доступные библиотеки.">PhotoRigma\Classes\Work\validate_mime_type()</a> Метод для проверки MIME-типа файла.</dd>
<dd>
<a class="el" href="#a1f3df8874c79377e6a8b4398ea6ad774" title="Формирование блока пользователя.">PhotoRigma\Classes\Work_Template\template_user()</a> Публичный метод, который вызывает этот внутренний метод. </dd>
<dd>
<a class="el" href="#a9fd8978d2c6cbdcfdd6be875be161b7b" title="Языковые данные.">PhotoRigma\Classes\Work_Template\$lang</a> Свойство, содержащее языковые строки. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../d9/d2a/work__template_8php_source.html">work_template.php</a> строка <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00813">813</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../dc/d7a/work_8php_source.html#l00851">Work\clean_field()</a> и <a class="el" href="../../dc/d7a/work_8php_source.html#l00430">Work\validate_mime_type()</a>.</p>

<p class="reference">Используется в <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00756">template_user()</a>.</p>
<div id="dynsection-8" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a4c85b7dc68591aedd8df9848c1a08dd0_cgraph.png" border="0" usemap="#ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a4c85b7dc68591aedd8df9848c1a08dd0_cgraph" alt=""/></div>
<map name="ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a4c85b7dc68591aedd8df9848c1a08dd0_cgraph" id="ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a4c85b7dc68591aedd8df9848c1a08dd0_cgraph">
<area shape="rect" title="Формирование блока пользователя." alt="" coords="5,59,165,84"/>
<area shape="rect" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a8ecb9d3a6cba675b7a2d72ddc14b53f3" title="Очистка строки от HTML&#45;тегов и специальных символов." alt="" coords="228,19,372,58"/>
<area shape="poly" title=" " alt="" coords="164,57,212,49,213,54,165,62"/>
<area shape="rect" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a41518918c225073130bc7a73983d72ff" title="Проверка MIME&#45;типа файла через доступные библиотеки." alt="" coords="213,83,387,122"/>
<area shape="poly" title=" " alt="" coords="165,80,198,85,197,90,164,86"/>
<area shape="rect" href="../../db/d20/classPhotoRigma_1_1Classes_1_1Work__Helper.html#ab73ba07b8376dd2e1764240c73a338ea" title="Очистка строки от HTML&#45;тегов и специальных символов (публичная обёртка)." alt="" coords="435,15,600,54"/>
<area shape="poly" title=" " alt="" coords="372,34,419,33,419,39,372,40"/>
<area shape="rect" href="../../db/d20/classPhotoRigma_1_1Classes_1_1Work__Helper.html#ae7fce393b631f688e62115acde6b2641" title="Очистка строки от HTML&#45;тегов и специальных символов (защищённый метод)." alt="" coords="655,5,798,58"/>
<area shape="poly" title=" " alt="" coords="600,31,639,30,639,35,601,36"/>
<area shape="rect" href="../../db/d20/classPhotoRigma_1_1Classes_1_1Work__Helper.html#a41518918c225073130bc7a73983d72ff" title="Проверка MIME&#45;типа файла через доступные библиотеки (публичная обёртка)." alt="" coords="443,79,592,131"/>
<area shape="poly" title=" " alt="" coords="387,101,427,101,427,107,387,106"/>
<area shape="rect" href="../../db/d20/classPhotoRigma_1_1Classes_1_1Work__Helper.html#a95d88f48db4a5bac5b064e99d896c82f" title="Проверка MIME&#45;типа файла через доступные библиотеки (защищённый метод)." alt="" coords="648,83,805,135"/>
<area shape="poly" title=" " alt="" coords="593,104,633,105,633,110,593,109"/>
</map>
</div>
<div id="dynsection-9" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a4c85b7dc68591aedd8df9848c1a08dd0_icgraph.png" border="0" usemap="#ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a4c85b7dc68591aedd8df9848c1a08dd0_icgraph" alt=""/></div>
<map name="ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a4c85b7dc68591aedd8df9848c1a08dd0_icgraph" id="ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a4c85b7dc68591aedd8df9848c1a08dd0_icgraph">
<area shape="rect" title="Формирование блока пользователя." alt="" coords="157,5,316,30"/>
<area shape="rect" href="../../d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template.html#a1f3df8874c79377e6a8b4398ea6ad774" title="Формирование блока пользователя." alt="" coords="5,5,109,30"/>
<area shape="poly" title=" " alt="" coords="141,20,109,20,109,15,141,15"/>
</map>
</div>

</div>
</div>
<a id="af970fc714c16e27d2d60d698522a8504" name="af970fc714c16e27d2d60d698522a8504"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af970fc714c16e27d2d60d698522a8504">&#9670;&#160;</a></span>create_menu()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">create_menu </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$action</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$menu</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Метод формирует массив данных для меню в зависимости от типа и активного пункта. </p>
<p>Этот метод является редиректом на защищённый метод <code>_create_menu_internal()</code>. Метод формирует массив данных для меню на основе запроса к базе данных, учитывая тип меню и активный пункт. Поддерживаемые типы меню:</p><ul>
<li>0: Горизонтальное краткое меню.</li>
<li>1: Вертикальное боковое меню. Для каждого пункта меню проверяются права доступа текущего пользователя (на основе свойств $this-&gt;user). Если пункт меню видим, он добавляется в результат с очисткой данных через Work::clean_field().</li>
</ul>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$action</td><td>Активный пункт меню. Указывается строка, соответствующая активному пункту меню (например, 'home', 'profile'). </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$menu</td><td>Тип меню:<ul>
<li>0: Горизонтальное краткое меню.</li>
<li>1: Вертикальное боковое меню. Другие значения недопустимы и приведут к выбросу исключения InvalidArgumentException.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>array Массив с данными для меню. Каждый элемент массива содержит:<ul>
<li>Ключ 'url': URL пункта меню (null, если пункт активен).</li>
<li>Ключ 'name': Название пункта меню (локализованное через $this-&gt;lang['menu'] или дефолтное значение). Если меню пустое, возвращается пустой массив.</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Если передан некорректный $menu или $action. </td></tr>
    <tr><td class="paramname">RuntimeException</td><td>Если произошла ошибка при выполнении запроса к базе данных.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Данные для меню берутся из таблицы TBL_MENU. Для получения дополнительной информации см. структуру таблицы.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Убедитесь, что передаваемые параметры корректны, так как это может привести к ошибкам. Также убедитесь, что права доступа пользователя ($this-&gt;user) настроены правильно.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание экземпляра класса Work_Template</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#aa3e9534005fd516d941f6a5569896e01">$template</a> = <span class="keyword">new</span> <a class="code hl_class" href="../../d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template.html">Work_Template</a>();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Создание горизонтального меню</span></div>
<div class="line">$short_menu = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#aa3e9534005fd516d941f6a5569896e01">$template</a>-&gt;create_menu(<span class="stringliteral">&#39;home&#39;</span>, 0);</div>
<div class="line">print_r($short_menu);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Создание вертикального меню</span></div>
<div class="line">$long_menu = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#aa3e9534005fd516d941f6a5569896e01">$template</a>-&gt;create_menu(<span class="stringliteral">&#39;profile&#39;</span>, 1);</div>
<div class="line">print_r($long_menu);</div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a8ecb9d3a6cba675b7a2d72ddc14b53f3" title="Очистка строки от HTML-тегов и специальных символов.">PhotoRigma\Classes\Work\clean_field()</a> Статический метод для очистки данных.</dd>
<dd>
<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#af970fc714c16e27d2d60d698522a8504" title="Метод формирует массив данных для меню в зависимости от типа и активного пункта.">PhotoRigma\Classes\Work\create_menu()</a> Публичный метод, который вызывает этот внутренний метод. </dd>
<dd>
<a class="el" href="#a44160f09c7dbb17349602f0862c95d62" title="Метод формирует массив данных для меню в зависимости от типа и активного пункта.">PhotoRigma\Classes\Work_Template\_create_menu_internal()</a> Защищённый метод, реализующий основную логику. </dd></dl>

<p>Замещает <a class="el" href="../../d8/d8a/interfacePhotoRigma_1_1Classes_1_1Work__Template__Interface.html#af970fc714c16e27d2d60d698522a8504">Work_Template_Interface</a>.</p>

<p class="definition">См. определение в файле <a class="el" href="../../d9/d2a/work__template_8php_source.html">work_template.php</a> строка <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00577">577</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../de/d20/index_8php_source.html#l00247">PhotoRigma\$action</a> и <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00640">_create_menu_internal()</a>.</p>
<div id="dynsection-10" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="../../closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_af970fc714c16e27d2d60d698522a8504_cgraph.png" border="0" usemap="#ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_af970fc714c16e27d2d60d698522a8504_cgraph" alt=""/></div>
<map name="ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_af970fc714c16e27d2d60d698522a8504_cgraph" id="ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_af970fc714c16e27d2d60d698522a8504_cgraph">
<area shape="rect" title="Метод формирует массив данных для меню в зависимости от типа и активного пункта." alt="" coords="5,19,102,44"/>
<area shape="rect" href="../../d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template.html#a44160f09c7dbb17349602f0862c95d62" title="Метод формирует массив данных для меню в зависимости от типа и активного пункта." alt="" coords="150,19,302,44"/>
<area shape="poly" title=" " alt="" coords="102,29,134,29,134,34,102,34"/>
<area shape="rect" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a8ecb9d3a6cba675b7a2d72ddc14b53f3" title="Очистка строки от HTML&#45;тегов и специальных символов." alt="" coords="350,12,493,51"/>
<area shape="poly" title=" " alt="" coords="302,29,334,29,334,34,302,34"/>
<area shape="rect" href="../../db/d20/classPhotoRigma_1_1Classes_1_1Work__Helper.html#ab73ba07b8376dd2e1764240c73a338ea" title="Очистка строки от HTML&#45;тегов и специальных символов (публичная обёртка)." alt="" coords="541,12,707,51"/>
<area shape="poly" title=" " alt="" coords="494,29,526,29,526,34,494,34"/>
<area shape="rect" href="../../db/d20/classPhotoRigma_1_1Classes_1_1Work__Helper.html#ae7fce393b631f688e62115acde6b2641" title="Очистка строки от HTML&#45;тегов и специальных символов (защищённый метод)." alt="" coords="755,5,898,58"/>
<area shape="poly" title=" " alt="" coords="707,29,740,29,740,34,707,34"/>
</map>
</div>

</div>
</div>
<a id="aaf95d95540a3e47c5905a47db3424ed9" name="aaf95d95540a3e47c5905a47db3424ed9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf95d95540a3e47c5905a47db3424ed9">&#9670;&#160;</a></span>set_lang()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">set_lang </td>
          <td>(</td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$lang</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Установка языковых данных через сеттер. </p>
<p>Метод позволяет установить массив языковых данных. Если передан некорректный тип данных или <code>null</code>, выбрасывается исключение.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$lang</td><td>Языковые данные:<ul>
<li>Должен быть массивом.</li>
<li>Каждый ключ должен быть строкой, а значение — допустимым для языковых данных.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>void Метод ничего не возвращает.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Если передан некорректный тип данных или <code>null</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Убедитесь, что передаваемые языковые данные корректны и соответствуют ожидаемому формату. </dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Не передавайте пустые или некорректные данные, так как это может привести к ошибкам.</dd></dl>
<p>Пример использования метода: </p><div class="fragment"><div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#aa3e9534005fd516d941f6a5569896e01">$template</a> = new \PhotoRigma\Classes\Work_Template(<a class="code hl_variable" href="#ab76f8f2ac851632a23ef69df2bd99dad">$config</a>, <a class="code hl_variable" href="#a18e3eac65d39ced5231d9b3e3630ba75">$db</a>, <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>);</div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#aa3e9534005fd516d941f6a5569896e01">$template</a>-&gt;set_lang([<span class="stringliteral">&#39;key&#39;</span> =&gt; <span class="stringliteral">&#39;value&#39;</span>]);</div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#aed2ddce38e1559f3014f076e11a2cbe9" title="Устанавливает языковые данные из файла и передаёт их в дочерние классы.">PhotoRigma\Classes\Work\set_lang()</a> Метод в родительском классе Work, который вызывает этот метод.</dd>
<dd>
<a class="el" href="#a9fd8978d2c6cbdcfdd6be875be161b7b" title="Языковые данные.">PhotoRigma\Classes\Work_Template\$lang</a> Свойство, которое изменяет метод. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../d9/d2a/work__template_8php_source.html">work_template.php</a> строка <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00484">484</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00332">$lang</a>.</p>

</div>
</div>
<a id="ac632034f4e83ba35a7b3e2124829e0c2" name="ac632034f4e83ba35a7b3e2124829e0c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac632034f4e83ba35a7b3e2124829e0c2">&#9670;&#160;</a></span>set_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">set_user </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/dfe/classPhotoRigma_1_1Classes_1_1User.html">User</a></td>          <td class="paramname"><span class="paramname"><em>$user</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Установка данных пользователя через сеттер. </p>
<p>Метод позволяет установить объект пользователя. Если передан некорректный тип данных или <code>null</code>, выбрасывается исключение.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">User</td><td class="paramname">$user</td><td>Объект пользователя:<ul>
<li>Должен быть экземпляром класса User.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>void Метод ничего не возвращает.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Если передан некорректный тип данных или <code>null</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Убедитесь, что передаваемый объект пользователя является экземпляром класса User. </dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Не передавайте null или некорректные объекты, так как это может привести к ошибкам.</dd></dl>
<p>Пример использования метода: </p><div class="fragment"><div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#aa3e9534005fd516d941f6a5569896e01">$template</a> = new \PhotoRigma\Classes\Work_Template(<a class="code hl_variable" href="#ab76f8f2ac851632a23ef69df2bd99dad">$config</a>, <a class="code hl_variable" href="#a18e3eac65d39ced5231d9b3e3630ba75">$db</a>, <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>);</div>
<div class="line"><a class="code hl_variable" href="#a35c45cc33d8d420da794514df59466b7">$user</a> = new \PhotoRigma\Classes\User();</div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#aa3e9534005fd516d941f6a5569896e01">$template</a>-&gt;set_user(<a class="code hl_variable" href="#a35c45cc33d8d420da794514df59466b7">$user</a>);</div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Template_html_a35c45cc33d8d420da794514df59466b7"><div class="ttname"><a href="#a35c45cc33d8d420da794514df59466b7">PhotoRigma\Classes\Work_Template\$user</a></div><div class="ttdeci">User $user</div><div class="ttdoc">Объект пользователя.</div><div class="ttdef"><b>Определения</b> <a href="../../d9/d2a/work__template_8php_source.html#l00334">work_template.php:334</a></div></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#ac632034f4e83ba35a7b3e2124829e0c2" title="Установка объекта пользователя через сеттер.">PhotoRigma\Classes\Work\set_user()</a> Метод в родительском классе Work, который вызывает этот метод.</dd>
<dd>
<a class="el" href="#a35c45cc33d8d420da794514df59466b7" title="Объект пользователя.">PhotoRigma\Classes\Work_Template\$user</a> Свойство, которое изменяет метод. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../d9/d2a/work__template_8php_source.html">work_template.php</a> строка <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00518">518</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00334">$user</a>.</p>

</div>
</div>
<a id="a9143fed87a3064985e0b51fe5fbb4ac3" name="a9143fed87a3064985e0b51fe5fbb4ac3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9143fed87a3064985e0b51fe5fbb4ac3">&#9670;&#160;</a></span>template_best_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">template_best_user </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$best_user</em></span><span class="paramdefsep"> = </span><span class="paramdefval">1</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Формирует список пользователей, загрузивших наибольшее количество изображений. </p>
<p>Метод выполняет запрос к базе данных с использованием JOIN для получения списка пользователей, которые загрузили наибольшее количество фотографий. Результат формируется в виде ассоциативного массива, который используется для отображения в шаблоне. Если данные отсутствуют, добавляется запись "пустого" пользователя.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$best_user</td><td>Количество лучших пользователей для вывода. Должно быть положительным целым числом. Если передано недопустимое значение, выбрасывается исключение InvalidArgumentException.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>array Массив данных для вывода в шаблон:<ul>
<li>NAME_BLOCK: Название блока (локализованное через $this-&gt;lang['main']['best_user']).</li>
<li>L_USER_NAME: Подпись для имени пользователя (локализованная строка).</li>
<li>L_USER_PHOTO: Подпись для количества фотографий (локализованная строка).</li>
<li>user_url: Ссылка на профиль пользователя (null, если данных нет).</li>
<li>user_name: Имя пользователя ('&mdash;', если данных нет).</li>
<li>user_photo: Количество загруженных фотографий ('-', если данных нет).</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Если параметр $best_user не является положительным целым числом.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Если запрос к базе данных не возвращает данных, добавляется запись "пустого" пользователя:<ul>
<li>user_url: null</li>
<li>user_name: '&mdash;'</li>
<li>user_photo: '-'</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Убедитесь, что таблицы базы данных (TBL_USERS и TBL_PHOTO) содержат корректные данные. Ошибки в структуре таблиц могут привести к некорректному результату.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание экземпляра класса Work_Template</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#aa3e9534005fd516d941f6a5569896e01">$template</a> = <span class="keyword">new</span> <a class="code hl_class" href="../../d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template.html">Work_Template</a>();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Получение списка лучших пользователей</span></div>
<div class="line">$best_users = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#aa3e9534005fd516d941f6a5569896e01">$template</a>-&gt;template_best_user(3);</div>
<div class="line">print_r($best_users);</div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a9143fed87a3064985e0b51fe5fbb4ac3" title="Формирует список пользователей, загрузивших наибольшее количество изображений.">PhotoRigma\Classes\Work\template_best_user()</a> Публичный метод, который вызывает этот внутренний метод. </dd>
<dd>
<a class="el" href="#a7c272bd5112b72e9047a6dafdd9cfd8c" title="Формирует список пользователей, загрузивших наибольшее количество изображений.">PhotoRigma\Classes\Work_Template\_template_best_user_internal()</a> Защищённый метод, реализующий основную логику. </dd>
<dd>
<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a8ecb9d3a6cba675b7a2d72ddc14b53f3" title="Очистка строки от HTML-тегов и специальных символов.">PhotoRigma\Classes\Work\clean_field()</a> Метод для очистки данных. </dd></dl>

<p>Замещает <a class="el" href="../../d8/d8a/interfacePhotoRigma_1_1Classes_1_1Work__Template__Interface.html#a9143fed87a3064985e0b51fe5fbb4ac3">Work_Template_Interface</a>.</p>

<p class="definition">См. определение в файле <a class="el" href="../../d9/d2a/work__template_8php_source.html">work_template.php</a> строка <a class="el" href="../../d9/d2a/work__template_8php_source.html#l01117">1117</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../d9/d2a/work__template_8php_source.html#l01172">_template_best_user_internal()</a>.</p>
<div id="dynsection-11" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="../../closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a9143fed87a3064985e0b51fe5fbb4ac3_cgraph.png" border="0" usemap="#ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a9143fed87a3064985e0b51fe5fbb4ac3_cgraph" alt=""/></div>
<map name="ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a9143fed87a3064985e0b51fe5fbb4ac3_cgraph" id="ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a9143fed87a3064985e0b51fe5fbb4ac3_cgraph">
<area shape="rect" title="Формирует список пользователей, загрузивших наибольшее количество изображений." alt="" coords="5,19,141,44"/>
<area shape="rect" href="../../d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template.html#a7c272bd5112b72e9047a6dafdd9cfd8c" title="Формирует список пользователей, загрузивших наибольшее количество изображений." alt="" coords="189,12,331,51"/>
<area shape="poly" title=" " alt="" coords="141,29,173,29,173,34,141,34"/>
<area shape="rect" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a8ecb9d3a6cba675b7a2d72ddc14b53f3" title="Очистка строки от HTML&#45;тегов и специальных символов." alt="" coords="379,12,522,51"/>
<area shape="poly" title=" " alt="" coords="331,29,363,29,363,34,331,34"/>
<area shape="rect" href="../../db/d20/classPhotoRigma_1_1Classes_1_1Work__Helper.html#ab73ba07b8376dd2e1764240c73a338ea" title="Очистка строки от HTML&#45;тегов и специальных символов (публичная обёртка)." alt="" coords="570,12,736,51"/>
<area shape="poly" title=" " alt="" coords="523,29,555,29,555,34,523,34"/>
<area shape="rect" href="../../db/d20/classPhotoRigma_1_1Classes_1_1Work__Helper.html#ae7fce393b631f688e62115acde6b2641" title="Очистка строки от HTML&#45;тегов и специальных символов (защищённый метод)." alt="" coords="784,5,927,58"/>
<area shape="poly" title=" " alt="" coords="736,29,769,29,769,34,736,34"/>
</map>
</div>

</div>
</div>
<a id="a116ebcf799d07566a74e7e765aecc1b7" name="a116ebcf799d07566a74e7e765aecc1b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a116ebcf799d07566a74e7e765aecc1b7">&#9670;&#160;</a></span>template_stat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">template_stat </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Генерирует массив статистических данных для шаблона. </p>
<p>Метод выполняет запросы к базе данных для получения статистической информации о пользователях, категориях, фотографиях, оценках и онлайн-пользователях. Результат формируется в виде ассоциативного массива, который используется для отображения статистики на странице. Этот метод вызывается через редирект из публичного метода. Время онлайна жестко закодировано как 900 секунд (15 минут). Для изменения требуется ручное внесение изменений в код.</p>
<dl class="section return"><dt>Возвращает</dt><dd>array Ассоциативный массив данных для вывода статистики:<ul>
<li>NAME_BLOCK: Название блока статистики.</li>
<li>L_STAT_REGIST: Подпись для количества зарегистрированных пользователей.</li>
<li>D_STAT_REGIST: Количество зарегистрированных пользователей.</li>
<li>L_STAT_PHOTO: Подпись для количества фотографий.</li>
<li>D_STAT_PHOTO: Количество фотографий.</li>
<li>L_STAT_CATEGORY: Подпись для количества категорий.</li>
<li>D_STAT_CATEGORY: Количество категорий (включая пользовательские альбомы).</li>
<li>L_STAT_USER_ADMIN: Подпись для количества администраторов.</li>
<li>D_STAT_USER_ADMIN: Количество администраторов.</li>
<li>L_STAT_USER_MODER: Подпись для количества модераторов.</li>
<li>D_STAT_USER_MODER: Количество модераторов.</li>
<li>L_STAT_RATE_USER: Подпись для количества пользовательских оценок.</li>
<li>D_STAT_RATE_USER: Количество пользовательских оценок.</li>
<li>L_STAT_RATE_MODER: Подпись для количества модераторских оценок.</li>
<li>D_STAT_RATE_MODER: Количество модераторских оценок.</li>
<li>L_STAT_ONLINE: Подпись для онлайн-пользователей.</li>
<li>D_STAT_ONLINE: Список онлайн-пользователей (HTML-ссылки) или сообщение об отсутствии онлайн-пользователей.</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">RuntimeException</td><td>Если возникает ошибка при выполнении запросов к базе данных.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Убедитесь, что таблицы базы данных (TBL_USERS, TBL_CATEGORY, TBL_PHOTO, TBL_RATE_USER, TBL_RATE_MODER) содержат корректные данные. Ошибки в структуре таблиц могут привести к некорректной статистике.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание экземпляра класса Work_Template</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#aa3e9534005fd516d941f6a5569896e01">$template</a> = <span class="keyword">new</span> <a class="code hl_class" href="../../d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template.html">Work_Template</a>();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Получение статистических данных</span></div>
<div class="line">$stat_data = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#aa3e9534005fd516d941f6a5569896e01">$template</a>-&gt;template_stat();</div>
<div class="line">print_r($stat_data);</div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a8ecb9d3a6cba675b7a2d72ddc14b53f3" title="Очистка строки от HTML-тегов и специальных символов.">PhotoRigma\Classes\Work\clean_field()</a> Метод для очистки данных.</dd>
<dd>
<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a116ebcf799d07566a74e7e765aecc1b7" title="Генерирует массив статистических данных для шаблона.">PhotoRigma\Classes\Work\template_stat()</a> Публичный метод, который вызывает этот внутренний метод. </dd>
<dd>
<a class="el" href="#ad1a946d518250f1085369cfad3719cc3" title="Генерирует массив статистических данных для шаблона.">PhotoRigma\Classes\Work_Template\_template_stat_internal()</a> Защищённый метод, реализующий основную логику. </dd></dl>

<p>Замещает <a class="el" href="../../d8/d8a/interfacePhotoRigma_1_1Classes_1_1Work__Template__Interface.html#a116ebcf799d07566a74e7e765aecc1b7">Work_Template_Interface</a>.</p>

<p class="definition">См. определение в файле <a class="el" href="../../d9/d2a/work__template_8php_source.html">work_template.php</a> строка <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00918">918</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00976">_template_stat_internal()</a>.</p>
<div id="dynsection-12" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="../../closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a116ebcf799d07566a74e7e765aecc1b7_cgraph.png" border="0" usemap="#ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a116ebcf799d07566a74e7e765aecc1b7_cgraph" alt=""/></div>
<map name="ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a116ebcf799d07566a74e7e765aecc1b7_cgraph" id="ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a116ebcf799d07566a74e7e765aecc1b7_cgraph">
<area shape="rect" title="Генерирует массив статистических данных для шаблона." alt="" coords="5,19,106,44"/>
<area shape="rect" href="../../d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template.html#ad1a946d518250f1085369cfad3719cc3" title="Генерирует массив статистических данных для шаблона." alt="" coords="154,19,310,44"/>
<area shape="poly" title=" " alt="" coords="106,29,138,29,138,34,106,34"/>
<area shape="rect" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a8ecb9d3a6cba675b7a2d72ddc14b53f3" title="Очистка строки от HTML&#45;тегов и специальных символов." alt="" coords="358,12,501,51"/>
<area shape="poly" title=" " alt="" coords="310,29,342,29,342,34,310,34"/>
<area shape="rect" href="../../db/d20/classPhotoRigma_1_1Classes_1_1Work__Helper.html#ab73ba07b8376dd2e1764240c73a338ea" title="Очистка строки от HTML&#45;тегов и специальных символов (публичная обёртка)." alt="" coords="549,12,715,51"/>
<area shape="poly" title=" " alt="" coords="502,29,534,29,534,34,502,34"/>
<area shape="rect" href="../../db/d20/classPhotoRigma_1_1Classes_1_1Work__Helper.html#ae7fce393b631f688e62115acde6b2641" title="Очистка строки от HTML&#45;тегов и специальных символов (защищённый метод)." alt="" coords="763,5,906,58"/>
<area shape="poly" title=" " alt="" coords="715,29,748,29,748,34,715,34"/>
</map>
</div>

</div>
</div>
<a id="a1f3df8874c79377e6a8b4398ea6ad774" name="a1f3df8874c79377e6a8b4398ea6ad774"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f3df8874c79377e6a8b4398ea6ad774">&#9670;&#160;</a></span>template_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">template_user </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Формирование блока пользователя. </p>
<p>Этот метод является редиректом на защищённый метод <code>_template_user_internal()</code>. Метод формирует массив данных для блока пользователя в зависимости от статуса авторизации:</p><ul>
<li>Если пользователь не авторизован, формируется блок с ссылками на вход, восстановление пароля и регистрацию.</li>
<li>Если пользователь авторизован, формируется блок с приветствием, группой и аватаром. Для авторизованных пользователей проверяется существование аватара и его MIME-тип через Work::validate_mime_type(). Если аватар недоступен или имеет недопустимый MIME-тип, используется дефолтный аватар (DEFAULT_AVATAR).</li>
</ul>
<dl class="section return"><dt>Возвращает</dt><dd>array Массив с данными для блока пользователя:<ul>
<li>Для неавторизованных пользователей:<ul>
<li>'NAME_BLOCK': Название блока.</li>
<li>'L_LOGIN', 'L_PASSWORD', 'L_ENTER', 'L_FORGOT_PASSWORD', 'L_REGISTRATION': Локализованные строки.</li>
<li>'U_LOGIN', 'U_FORGOT_PASSWORD', 'U_REGISTRATION': URL для входа, восстановления пароля и регистрации.</li>
</ul>
</li>
<li>Для авторизованных пользователей:<ul>
<li>'NAME_BLOCK': Название блока.</li>
<li>'L_HI_USER': Приветствие с именем пользователя.</li>
<li>'L_GROUP': Группа пользователя.</li>
<li>'U_AVATAR': URL аватара (или дефолтного аватара, если файл недоступен или некорректен).</li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">RuntimeException</td><td>Если объект пользователя не установлен или данные некорректны. </td></tr>
    <tr><td class="paramname">RandomException</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Используется глобальная переменная $_SESSION для проверки статуса авторизации.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Убедитесь, что объект пользователя ($this-&gt;user) корректно установлен перед вызовом метода. Также убедитесь, что конфигурация аватаров ($this-&gt;config['avatar_folder']) настроена правильно.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание экземпляра класса Work_Template</span></div>
<div class="line"><a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#aa3e9534005fd516d941f6a5569896e01">$template</a> = <span class="keyword">new</span> <a class="code hl_class" href="../../d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template.html">Work_Template</a>();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Получение данных для блока пользователя</span></div>
<div class="line">$user_block = <a class="code hl_variable" href="../../de/d90/namespacePhotoRigma.html#aa3e9534005fd516d941f6a5569896e01">$template</a>-&gt;template_user();</div>
<div class="line">print_r($user_block);</div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a8ecb9d3a6cba675b7a2d72ddc14b53f3" title="Очистка строки от HTML-тегов и специальных символов.">PhotoRigma\Classes\Work\clean_field()</a> Метод для очистки данных. </dd>
<dd>
<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a41518918c225073130bc7a73983d72ff" title="Проверка MIME-типа файла через доступные библиотеки.">PhotoRigma\Classes\Work\validate_mime_type()</a> Метод для проверки MIME-типа файла.</dd>
<dd>
<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a1f3df8874c79377e6a8b4398ea6ad774" title="Формирование блока пользователя.">PhotoRigma\Classes\Work\template_user()</a> Публичный метод, который вызывает этот внутренний метод. </dd>
<dd>
<a class="el" href="#a4c85b7dc68591aedd8df9848c1a08dd0" title="Формирование блока пользователя.">PhotoRigma\Classes\Work_Template\_template_user_internal()</a> Защищённый метод, реализующий основную логику. </dd></dl>

<p>Замещает <a class="el" href="../../d8/d8a/interfacePhotoRigma_1_1Classes_1_1Work__Template__Interface.html#a1f3df8874c79377e6a8b4398ea6ad774">Work_Template_Interface</a>.</p>

<p class="definition">См. определение в файле <a class="el" href="../../d9/d2a/work__template_8php_source.html">work_template.php</a> строка <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00756">756</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00813">_template_user_internal()</a>.</p>
<div id="dynsection-13" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="../../closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a1f3df8874c79377e6a8b4398ea6ad774_cgraph.png" border="0" usemap="#ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a1f3df8874c79377e6a8b4398ea6ad774_cgraph" alt=""/></div>
<map name="ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a1f3df8874c79377e6a8b4398ea6ad774_cgraph" id="ad4/d32/classPhotoRigma_1_1Classes_1_1Work__Template_a1f3df8874c79377e6a8b4398ea6ad774_cgraph">
<area shape="rect" title="Формирование блока пользователя." alt="" coords="5,59,109,84"/>
<area shape="rect" href="../../d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template.html#a4c85b7dc68591aedd8df9848c1a08dd0" title="Формирование блока пользователя." alt="" coords="157,59,316,84"/>
<area shape="poly" title=" " alt="" coords="109,69,141,69,141,74,109,74"/>
<area shape="rect" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a8ecb9d3a6cba675b7a2d72ddc14b53f3" title="Очистка строки от HTML&#45;тегов и специальных символов." alt="" coords="380,19,523,58"/>
<area shape="poly" title=" " alt="" coords="316,57,364,49,365,54,316,62"/>
<area shape="rect" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a41518918c225073130bc7a73983d72ff" title="Проверка MIME&#45;типа файла через доступные библиотеки." alt="" coords="364,83,538,122"/>
<area shape="poly" title=" " alt="" coords="316,80,349,85,348,90,316,86"/>
<area shape="rect" href="../../db/d20/classPhotoRigma_1_1Classes_1_1Work__Helper.html#ab73ba07b8376dd2e1764240c73a338ea" title="Очистка строки от HTML&#45;тегов и специальных символов (публичная обёртка)." alt="" coords="586,15,752,54"/>
<area shape="poly" title=" " alt="" coords="523,34,571,33,571,39,523,40"/>
<area shape="rect" href="../../db/d20/classPhotoRigma_1_1Classes_1_1Work__Helper.html#ae7fce393b631f688e62115acde6b2641" title="Очистка строки от HTML&#45;тегов и специальных символов (защищённый метод)." alt="" coords="806,5,950,58"/>
<area shape="poly" title=" " alt="" coords="752,31,790,30,790,35,752,36"/>
<area shape="rect" href="../../db/d20/classPhotoRigma_1_1Classes_1_1Work__Helper.html#a41518918c225073130bc7a73983d72ff" title="Проверка MIME&#45;типа файла через доступные библиотеки (публичная обёртка)." alt="" coords="594,79,744,131"/>
<area shape="poly" title=" " alt="" coords="539,101,579,101,579,107,539,106"/>
<area shape="rect" href="../../db/d20/classPhotoRigma_1_1Classes_1_1Work__Helper.html#a95d88f48db4a5bac5b064e99d896c82f" title="Проверка MIME&#45;типа файла через доступные библиотеки (защищённый метод)." alt="" coords="800,83,956,135"/>
<area shape="poly" title=" " alt="" coords="744,104,784,105,784,110,744,109"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Данные класса</h2>
<a id="ab76f8f2ac851632a23ef69df2bd99dad" name="ab76f8f2ac851632a23ef69df2bd99dad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab76f8f2ac851632a23ef69df2bd99dad">&#9670;&#160;</a></span>$config</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">array $config</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Конфигурация приложения. </p>

<p class="definition">См. определение в файле <a class="el" href="../../d9/d2a/work__template_8php_source.html">work_template.php</a> строка <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00331">331</a></p>

<p class="reference">Используется в <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00365">__construct()</a> и <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00400">__get()</a>.</p>

</div>
</div>
<a id="a18e3eac65d39ced5231d9b3e3630ba75" name="a18e3eac65d39ced5231d9b3e3630ba75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18e3eac65d39ced5231d9b3e3630ba75">&#9670;&#160;</a></span>$db</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d88/interfacePhotoRigma_1_1Classes_1_1Database__Interface.html">Database_Interface</a> $db</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Объект для работы с базой данных. </p>

<p class="definition">См. определение в файле <a class="el" href="../../d9/d2a/work__template_8php_source.html">work_template.php</a> строка <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00333">333</a></p>

<p class="reference">Используется в <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00365">__construct()</a>.</p>

</div>
</div>
<a id="a9fd8978d2c6cbdcfdd6be875be161b7b" name="a9fd8978d2c6cbdcfdd6be875be161b7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fd8978d2c6cbdcfdd6be875be161b7b">&#9670;&#160;</a></span>$lang</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">array $lang = null</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Языковые данные. </p>

<p class="definition">См. определение в файле <a class="el" href="../../d9/d2a/work__template_8php_source.html">work_template.php</a> строка <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00332">332</a></p>

<p class="reference">Используется в <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00484">set_lang()</a>.</p>

</div>
</div>
<a id="a35c45cc33d8d420da794514df59466b7" name="a35c45cc33d8d420da794514df59466b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35c45cc33d8d420da794514df59466b7">&#9670;&#160;</a></span>$user</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/dfe/classPhotoRigma_1_1Classes_1_1User.html">User</a> $user = null</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Объект пользователя. </p>

<p class="definition">См. определение в файле <a class="el" href="../../d9/d2a/work__template_8php_source.html">work_template.php</a> строка <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00334">334</a></p>

<p class="reference">Используется в <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00976">_template_stat_internal()</a> и <a class="el" href="../../d9/d2a/work__template_8php_source.html#l00518">set_user()</a>.</p>

</div>
</div>
<hr/>Объявления и описания членов класса находятся в файле:<ul>
<li>include/<a class="el" href="../../d9/d2a/work__template_8php_source.html">work_template.php</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../de/d90/namespacePhotoRigma.html">PhotoRigma</a></li><li class="navelem"><a class="el" href="../../d6/dc3/namespacePhotoRigma_1_1Classes.html">Classes</a></li><li class="navelem"><a class="el" href="../../d4/d32/classPhotoRigma_1_1Classes_1_1Work__Template.html">Work_Template</a></li>
    <li class="footer">Создано системой <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
