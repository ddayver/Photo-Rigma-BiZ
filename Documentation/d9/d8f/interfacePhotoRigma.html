<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Photo-Rigma-BiZ: Интерфейс PhotoRigma</title>
<link rel="icon" href="../../favicon.ico" type="image/x-icon" />
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo-1.png"/></td>
  <td id="projectalign">
   <div id="projectname">Photo-Rigma-BiZ<span id="projectnumber">&#160;0.4.0</span>
   </div>
   <div id="projectbrief">Gallery_Photo-Rigma-BiZ</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Поиск',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d9/d8f/interfacePhotoRigma.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Загрузка...</div>
<div class="SRStatus" id="Searching">Поиск...</div>
<div class="SRStatus" id="NoMatches">Не найдено</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-attribs">Открытые атрибуты</a> &#124;
<a href="../../de/da5/interfacePhotoRigma-members.html">Полный список членов класса</a>  </div>
  <div class="headertitle"><div class="title">Интерфейс PhotoRigma</div></div>
</div><!--header-->
<div class="contents">

<p>Интерфейс Database_Interface определяет методы для работы с базой данных.  
 <a href="#details">Подробнее...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Открытые атрибуты</h2></td></tr>
<tr class="memitem:abf3b0e1e3a4fcba298ee69fc89bccaee" id="r_abf3b0e1e3a4fcba298ee69fc89bccaee"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abf3b0e1e3a4fcba298ee69fc89bccaee">$config</a> = []</td></tr>
<tr class="memdesc:abf3b0e1e3a4fcba298ee69fc89bccaee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Параметры подключения к базе данных.  <br /></td></tr>
<tr class="separator:abf3b0e1e3a4fcba298ee69fc89bccaee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1063c700c9559e7928a1dc6ef5abe15f" id="r_a1063c700c9559e7928a1dc6ef5abe15f"><td class="memItemLeft" align="right" valign="top">if((!empty( $_SERVER[ 'HTTPS']) &amp;&amp;strtolower( $_SERVER[ 'HTTPS'])==='on')||(!empty( $_SERVER[ 'HTTPS']) &amp;&amp;$_SERVER[ 'HTTPS']==='1')) elseif(!empty($_SERVER['HTTP_X_FORWARDED_PROTO']) &amp;&amp;in_array(strtolower($_SERVER['HTTP_X_FORWARDED_PROTO']), ['https', 'h2'])) elseif(!empty( $_SERVER[ 'SERVER_PORT']) &amp;&amp;$_SERVER[ 'SERVER_PORT']==443) elseif(!empty($_SERVER['REQUEST_SCHEME']) &amp;&amp;strtolower($_SERVER['REQUEST_SCHEME'])==='https')&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1063c700c9559e7928a1dc6ef5abe15f">$http_host</a> = filter_input(INPUT_SERVER, 'HTTP_HOST', FILTER_SANITIZE_FULL_SPECIAL_CHARS)</td></tr>
<tr class="separator:a1063c700c9559e7928a1dc6ef5abe15f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a271f5d9c110c98ece73bec3151bf1a90" id="r_a271f5d9c110c98ece73bec3151bf1a90"><td class="memItemLeft" align="right" valign="top">if(! $http_host) if(! $http_host) if(!preg_match('/^([a-z\d](- *[a-z\d]) *)(\.([a-z\d](- *[a-z\d]) *)) *$/i', $http_host))&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a271f5d9c110c98ece73bec3151bf1a90">$script_name</a> = filter_input(INPUT_SERVER, 'SCRIPT_NAME', FILTER_SANITIZE_FULL_SPECIAL_CHARS)</td></tr>
<tr class="separator:a271f5d9c110c98ece73bec3151bf1a90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0eb0a189bae04261ab41ac974f8eb757" id="r_a0eb0a189bae04261ab41ac974f8eb757"><td class="memItemLeft" align="right" valign="top">if(! $script_name) if(! $script_name) if(!preg_match('/^\/&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0eb0a189bae04261ab41ac974f8eb757">$base_path</a> [a-zA-Z0-9._\-\/] *$/', $script_name)) = dirname($script_name)</td></tr>
<tr class="separator:a0eb0a189bae04261ab41ac974f8eb757"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a660d2d19a190c2950fc16620c92b50ac" id="r_a660d2d19a190c2950fc16620c92b50ac"><td class="memItemLeft" align="right" valign="top">if( $base_path==='.') if(substr($base_path, -1) !=='/')&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a660d2d19a190c2950fc16620c92b50ac">$config</a> ['site_url'] = $http_host . $base_path</td></tr>
<tr class="separator:a660d2d19a190c2950fc16620c92b50ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8670a6066b22c9c1f73a0a973fcc89bd" id="r_a8670a6066b22c9c1f73a0a973fcc89bd"><td class="memItemLeft" align="right" valign="top">if($config['site_dir']===false) if(!is_dir( $config[ 'site_dir'])) if(!is_readable($config['site_dir'])) if(!is_writable( $config[ 'site_dir'])) if(substr($config['site_dir'], -1) !=='/')&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8670a6066b22c9c1f73a0a973fcc89bd">$config</a> ['inc_dir'] = $config['site_dir'] . 'include/'</td></tr>
<tr class="separator:a8670a6066b22c9c1f73a0a973fcc89bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2d0bc152db0769c22005f821caf29e8" id="r_ab2d0bc152db0769c22005f821caf29e8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab2d0bc152db0769c22005f821caf29e8">$required_directories</a></td></tr>
<tr class="separator:ab2d0bc152db0769c22005f821caf29e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc238d5007d9f82f9c59e7d33f7a75c6" id="r_afc238d5007d9f82f9c59e7d33f7a75c6"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afc238d5007d9f82f9c59e7d33f7a75c6">IN_GALLERY</a> true</td></tr>
<tr class="separator:afc238d5007d9f82f9c59e7d33f7a75c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62b7f878abcac93af0f81464c8d008d7" id="r_a62b7f878abcac93af0f81464c8d008d7"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a62b7f878abcac93af0f81464c8d008d7">DEBUG_GALLERY</a> false</td></tr>
<tr class="separator:a62b7f878abcac93af0f81464c8d008d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe4cc9788f52e49485473dc699537388" id="r_abe4cc9788f52e49485473dc699537388"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abe4cc9788f52e49485473dc699537388">try</a></td></tr>
<tr class="separator:abe4cc9788f52e49485473dc699537388"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a630e9f4c562881099e95ce0355ae9d78" id="r_a630e9f4c562881099e95ce0355ae9d78"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a630e9f4c562881099e95ce0355ae9d78">$required_files</a></td></tr>
<tr class="memdesc:a630e9f4c562881099e95ce0355ae9d78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Список обязательных файлов для подключения.  <br /></td></tr>
<tr class="separator:a630e9f4c562881099e95ce0355ae9d78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab24faf4aa647cdcee494fc48524ad4ff" id="r_ab24faf4aa647cdcee494fc48524ad4ff"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a> = []</td></tr>
<tr class="separator:ab24faf4aa647cdcee494fc48524ad4ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fa3127fc82f96b1436d871ef02be319" id="r_a1fa3127fc82f96b1436d871ef02be319"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1fa3127fc82f96b1436d871ef02be319">$db</a> = new Database($config['db'])</td></tr>
<tr class="separator:a1fa3127fc82f96b1436d871ef02be319"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2429001fb0fa404b4fe0ab42a91a9a48" id="r_a2429001fb0fa404b4fe0ab42a91a9a48"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a> = new Work($db, $config)</td></tr>
<tr class="memdesc:a2429001fb0fa404b4fe0ab42a91a9a48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Создание объекта класса <a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html">Work</a>.  <br /></td></tr>
<tr class="separator:a2429001fb0fa404b4fe0ab42a91a9a48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3e9534005fd516d941f6a5569896e01" id="r_aa3e9534005fd516d941f6a5569896e01"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa3e9534005fd516d941f6a5569896e01">$template</a></td></tr>
<tr class="memdesc:aa3e9534005fd516d941f6a5569896e01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Создание объекта класса Template.  <br /></td></tr>
<tr class="separator:aa3e9534005fd516d941f6a5569896e01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a598ca4e71b15a1313ec95f0df1027ca5" id="r_a598ca4e71b15a1313ec95f0df1027ca5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a598ca4e71b15a1313ec95f0df1027ca5">$user</a> = new User()</td></tr>
<tr class="memdesc:a598ca4e71b15a1313ec95f0df1027ca5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Создание объекта класса User.  <br /></td></tr>
<tr class="separator:a598ca4e71b15a1313ec95f0df1027ca5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6d626b28fccda802400c748c0d7a42e" id="r_af6d626b28fccda802400c748c0d7a42e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af6d626b28fccda802400c748c0d7a42e">$header_footer</a> = true</td></tr>
<tr class="memdesc:af6d626b28fccda802400c748c0d7a42e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Флаг: выводить ли заголовок и подвал страницы.  <br /></td></tr>
<tr class="separator:af6d626b28fccda802400c748c0d7a42e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a565b8336923ef5ec8f122c2b41c5eef1" id="r_a565b8336923ef5ec8f122c2b41c5eef1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a565b8336923ef5ec8f122c2b41c5eef1">$template_output</a> = true</td></tr>
<tr class="memdesc:a565b8336923ef5ec8f122c2b41c5eef1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Флаг: выводить ли обработанный шаблон.  <br /></td></tr>
<tr class="separator:a565b8336923ef5ec8f122c2b41c5eef1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada57e7bb7c152edad18fe2f166188691" id="r_ada57e7bb7c152edad18fe2f166188691"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ada57e7bb7c152edad18fe2f166188691">$title</a> = null</td></tr>
<tr class="memdesc:ada57e7bb7c152edad18fe2f166188691"><td class="mdescLeft">&#160;</td><td class="mdescRight">Добавление текста к заголовку страницы.  <br /></td></tr>
<tr class="separator:ada57e7bb7c152edad18fe2f166188691"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa698a3e72116e8e778be0e95d908ee30" id="r_aa698a3e72116e8e778be0e95d908ee30"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa698a3e72116e8e778be0e95d908ee30">$action</a> = 'main'</td></tr>
<tr class="memdesc:aa698a3e72116e8e778be0e95d908ee30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Действие, которое необходимо выполнить.  <br /></td></tr>
<tr class="separator:aa698a3e72116e8e778be0e95d908ee30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4057bc03d7be65171c1b45c2219cc96b" id="r_a4057bc03d7be65171c1b45c2219cc96b"><td class="memItemLeft" align="right" valign="top">if( $work-&gt;check_input($_GET, 'action', ['isset'=&gt; true, 'empty'=&gt; true]) &amp;&amp;$_GET['action'] !=='index' &amp;&amp;! $work-&gt;url_check())&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4057bc03d7be65171c1b45c2219cc96b">else</a></td></tr>
<tr class="separator:a4057bc03d7be65171c1b45c2219cc96b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa355238e5cfbf4556dccf2f8a2b68926" id="r_aa355238e5cfbf4556dccf2f8a2b68926"><td class="memItemLeft" align="right" valign="top">if(is_file($action_file) &amp;&amp;is_readable($action_file))&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa355238e5cfbf4556dccf2f8a2b68926">else</a></td></tr>
<tr class="separator:aa355238e5cfbf4556dccf2f8a2b68926"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acefb76e2bff32b4d1b4605e70795a704" id="r_acefb76e2bff32b4d1b4605e70795a704"><td class="memItemLeft" align="right" valign="top">if( $header_footer) if($template_output) catch(\RuntimeException $e) catch(\PDOException $e) catch(\InvalidArgumentException $e) catch(\LogicException $e) catch(\BadMethodCallException $e) catch(\BadFunctionCallException $e) catch(\DomainException $e) catch(\UnexpectedValueException $e) catch(\LengthException $e) catch(\OutOfBoundsException $e) catch(\RangeException $e) catch(\Exception $e)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acefb76e2bff32b4d1b4605e70795a704">handle_exception</a>:$remote_ip = filter_input(INPUT_SERVER</td></tr>
<tr class="separator:acefb76e2bff32b4d1b4605e70795a704"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae07beac783fdab08b691bb38425a6771" id="r_ae07beac783fdab08b691bb38425a6771"><td class="memItemLeft" align="right" valign="top">if( $header_footer) if($template_output) catch(\RuntimeException $e) catch(\PDOException $e) catch(\InvalidArgumentException $e) catch(\LogicException $e) catch(\BadMethodCallException $e) catch(\BadFunctionCallException $e) catch(\DomainException $e) catch(\UnexpectedValueException $e) catch(\LengthException $e) catch(\OutOfBoundsException $e) catch(\RangeException $e) catch(\Exception $e&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae07beac783fdab08b691bb38425a6771">FILTER_VALIDATE_IP</a></td></tr>
<tr class="separator:ae07beac783fdab08b691bb38425a6771"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf17cb2dba2ed17cb28aa5f37deb5293" id="r_abf17cb2dba2ed17cb28aa5f37deb5293"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a> = date('H:i:s') . &quot; [ERROR] | &quot; . ($remote_ip ?: 'UNKNOWN_IP') . ' | ' . $type . ': ' . $e-&gt;getMessage() . PHP_EOL</td></tr>
<tr class="separator:abf17cb2dba2ed17cb28aa5f37deb5293"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff0371667b73312d21d0b68a4049e371" id="r_aff0371667b73312d21d0b68a4049e371"><td class="memItemLeft" align="right" valign="top">if(function_exists('log_in_file'))&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aff0371667b73312d21d0b68a4049e371">else</a></td></tr>
<tr class="separator:aff0371667b73312d21d0b68a4049e371"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7843e7143af5311d18183f4d9a9e425e" id="r_a7843e7143af5311d18183f4d9a9e425e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7843e7143af5311d18183f4d9a9e425e">$safe_output</a> = htmlspecialchars($message, ENT_QUOTES | ENT_HTML5, 'UTF-8')</td></tr>
<tr class="separator:a7843e7143af5311d18183f4d9a9e425e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Подробное описание</h2>
<div class="textblock"><p>Интерфейс Database_Interface определяет методы для работы с базой данных. </p>
<p>Класс <a class="el" href="../../d6/db6/classPhotoRigma_1_1Classes_1_1Database.html">Database</a> реализует интерфейс Database_Interface и отвечает за работу с различными базами данных.</p>
<p>Интерфейс определяет контракт для работы с базами данных через PDO. Поддерживаемые СУБД: MySQL (MariaDB) и PostgreSQL. Реализованы операции SELECT, JOIN, UPDATE, INSERT, DELETE и TRUNCATE. Особенности реализации:</p><ul>
<li>Выполнение запроса возвращает <code>true</code> при успешном выполнении или выбрасывает исключение в случае ошибки.</li>
<li>Результаты запросов извлекаются с помощью следующих методов:<ul>
<li><code>res_row</code>: Извлекает одну строку результата.</li>
<li><code>res_arr</code>: Извлекает все строки результата как массив.</li>
<li><code>get_affected_rows</code>: Возвращает количество строк, затронутых последним запросом.</li>
<li><code>get_last_insert_id</code>: Возвращает ID последней вставленной строки.</li>
</ul>
</li>
</ul>
<dl class="section see"><dt>См. также</dt><dd>\<a class="el" href="../../de/d90/namespacePhotoRigma.html">PhotoRigma</a>\<a class="el" href="../../d6/dc3/namespacePhotoRigma_1_1Classes.html">Classes</a>\<a class="el" href="../../d6/db6/classPhotoRigma_1_1Classes_1_1Database.html">Database</a> Класс, который реализует интерфейс. </dd>
<dd>
\<a class="el" href="../../de/d90/namespacePhotoRigma.html">PhotoRigma</a>\<a class="el" href="../../db/d02/namespacePhotoRigma_1_1Include.html">Include</a>\log_in_file() Логирует ошибки.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000005">Необходимо сделать</a></b></dt><dd>Добавить поддержку SQLite.</dd></dl>
<dl class="section note"><dt>Заметки</dt><dd>Интерфейс поддерживает только MySQL (MariaDB) и PostgreSQL.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Методы интерфейса изменили свою реализацию в отличие от предыдущей версии. Убедитесь, что вы изучили новую документацию по методам перед использованием.</dd></dl>
<p>Класс реализует все методы интерфейса <code>Database_Interface</code> и предоставляет функционал для работы с базами данных через PDO. Поддерживаемые СУБД: MySQL (MariaDB) и PostgreSQL. Реализованы операции SELECT, JOIN, UPDATE, INSERT, DELETE и TRUNCATE. Особенности класса:</p><ul>
<li>Выполнение запроса возвращает <code>true</code> при успешном выполнении или выбрасывает исключение в случае ошибки.</li>
<li>Результаты запросов извлекаются с помощью следующих методов:<ul>
<li><code>res_row</code>: Извлекает одну строку результата.</li>
<li><code>res_arr</code>: Извлекает все строки результата как массив.</li>
<li><code>get_affected_rows</code>: Возвращает количество строк, затронутых последним запросом.</li>
<li><code>get_last_insert_id</code>: Возвращает ID последней вставленной строки.</li>
</ul>
</li>
</ul>
<p>\<a class="el" href="../../d6/dc3/namespacePhotoRigma_1_1Classes.html">Classes</a>\Database_Interface</p>
<dl class="section see"><dt>См. также</dt><dd>\<a class="el" href="../../de/d90/namespacePhotoRigma.html">PhotoRigma</a>\<a class="el" href="../../d6/dc3/namespacePhotoRigma_1_1Classes.html">Classes</a>\Database_Interface Интерфейс, который реализует класс. </dd>
<dd>
\<a class="el" href="../../de/d90/namespacePhotoRigma.html">PhotoRigma</a>\<a class="el" href="../../db/d02/namespacePhotoRigma_1_1Include.html">Include</a>\log_in_file() Логирует ошибки.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000006">Необходимо сделать</a></b></dt><dd>Добавить поддержку SQLite.</dd></dl>
</div><h2 class="groupheader">Данные класса</h2>
<a id="aa698a3e72116e8e778be0e95d908ee30" name="aa698a3e72116e8e778be0e95d908ee30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa698a3e72116e8e778be0e95d908ee30">&#9670;&#160;</a></span>$action</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$action = 'main'</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Действие, которое необходимо выполнить. </p>
<p>Возможные значения определяются динамически в зависимости от доступных файлов в директории 'action/'. </p>

<p class="definition">См. определение в файле <a class="el" href="../../de/d20/index_8php_source.html">index.php</a> строка <a class="el" href="../../de/d20/index_8php_source.html#l00207">207</a></p>

</div>
</div>
<a id="a0eb0a189bae04261ab41ac974f8eb757" name="a0eb0a189bae04261ab41ac974f8eb757"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0eb0a189bae04261ab41ac974f8eb757">&#9670;&#160;</a></span>$base_path</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if(! $script_name) if(! $script_name) if (!preg_match('/^\/ $base_path[a-zA-Z0-9._\-\/] *$/', $script_name)) = dirname($script_name)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Генерация полного URL сайта.</p>
<p>Формируется на основе протокола, HTTP_HOST и SCRIPT_NAME. </p>

<p class="definition">См. определение в файле <a class="el" href="../../d0/d45/config_8php_source.html">config.php</a> строка <a class="el" href="../../d0/d45/config_8php_source.html#l00192">192</a></p>

</div>
</div>
<a id="abf3b0e1e3a4fcba298ee69fc89bccaee" name="abf3b0e1e3a4fcba298ee69fc89bccaee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf3b0e1e3a4fcba298ee69fc89bccaee">&#9670;&#160;</a></span>$config <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config[ 'site_dir'] = []</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Параметры подключения к базе данных. </p>
<p>Массив с настройками сервера.</p>
<p>Имя папки для хранения аватаров пользователей (указывается относительно корня проекта).</p>
<p>Имя папки для хранения эскизов фотографий (указывается относительно корня проекта).</p>
<p>Имя папки для хранения фотографий (указывается относительно корня проекта).</p>
<p>Включает следующие параметры:</p><ul>
<li>dbtype: Тип базы данных (по умолчанию: mysql, можно использовать pgsql).</li>
<li>dbhost: Сервер основной базы данных (по умолчанию: localhost).</li>
<li>dbport: Порт сервера основной базы данных (оставить пустым для значения по умолчанию, например: 3306 для MySQL).</li>
<li>dbsock: Путь к сокету (используется, если хост не указан, например: /var/run/mysqld/mysqld.sock).</li>
<li>dbuser: Имя пользователя в БД (например: root).</li>
<li>dbpass: Пароль пользователя БД (например: my_secure_password).</li>
<li>dbname: Имя базы данных (например: photorigma). <dl class="section see"><dt>См. также</dt><dd><a class="el" href="../../dc/d82/db_8php.html" title="Работа с базами данных через класс Database и интерфейс Database_Interface.">include/db.php</a> Файл, где используется этот массив для подключения к БД.</dd></dl>
Определение протокола (HTTP/HTTPS).</li>
</ul>
<p>Проверяются различные способы определения протокола:</p><ul>
<li>Переменная $_SERVER['HTTPS'] (учитываются значения 'on', '1', и случайный регистр).</li>
<li>Заголовок X-Forwarded-Proto (учитываются значения 'https', 'h2', и случайный регистр).</li>
<li>Порт сервера (443 для HTTPS).</li>
<li>Переменная $_SERVER['REQUEST_SCHEME']. Если ни один из способов не дал результата, используется HTTP.</li>
</ul>
<p>Определение site_dir с нормализацией пути.</p>
<p>Используется realpath для получения абсолютного пути к директории. Выполняются дополнительные проверки:</p><ul>
<li>Является ли путь директорией.</li>
<li>Доступна ли директория для чтения и записи.</li>
</ul>
<p>Содержит как редактируемые пользователем параметры (например, параметры БД), так и автоматически генерируемые параметры (например, URL сайта). После инициализации массив $config передаётся в свойство \PhotoRigma\Classes\Work<a class="el" href="#abf3b0e1e3a4fcba298ee69fc89bccaee" title="Параметры подключения к базе данных.">$config</a>. </p><dl class="section see"><dt>См. также</dt><dd>\<a class="el" href="../../de/d90/namespacePhotoRigma.html">PhotoRigma</a>\<a class="el" href="../../d6/dc3/namespacePhotoRigma_1_1Classes.html">Classes</a>\<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#ab76f8f2ac851632a23ef69df2bd99dad" title="Массив, хранящий конфигурацию приложения.">Work\$config</a> </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../d0/d45/config_8php_source.html">config.php</a> строка <a class="el" href="../../d0/d45/config_8php_source.html#l00055">55</a></p>

</div>
</div>
<a id="a8670a6066b22c9c1f73a0a973fcc89bd" name="a8670a6066b22c9c1f73a0a973fcc89bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8670a6066b22c9c1f73a0a973fcc89bd">&#9670;&#160;</a></span>$config <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if( $config[ 'site_dir']===false) if(!is_dir($config['site_dir'])) if(!is_readable( $config[ 'site_dir'])) if(!is_writable($config['site_dir'])) if (substr( $config[ 'site_dir'], -1) !=='/') $config[ 'inc_dir'] = $config['site_dir'] . 'include/'</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Определение inc_dir.</p>
<p>Указывает путь к директории include/, содержащей вспомогательные классы и функции. </p>

<p class="definition">См. определение в файле <a class="el" href="../../d0/d45/config_8php_source.html">config.php</a> строка <a class="el" href="../../d0/d45/config_8php_source.html#l00243">243</a></p>

</div>
</div>
<a id="a660d2d19a190c2950fc16620c92b50ac" name="a660d2d19a190c2950fc16620c92b50ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a660d2d19a190c2950fc16620c92b50ac">&#9670;&#160;</a></span>$config <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if($base_path==='.') if (substr( $base_path, -1) !=='/') $config[ 'site_url'] = $http_host . $base_path</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../d0/d45/config_8php_source.html">config.php</a> строка <a class="el" href="../../d0/d45/config_8php_source.html#l00205">205</a></p>

</div>
</div>
<a id="a1fa3127fc82f96b1436d871ef02be319" name="a1fa3127fc82f96b1436d871ef02be319"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fa3127fc82f96b1436d871ef02be319">&#9670;&#160;</a></span>$db</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$db = new Database($config['db'])</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../de/d20/index_8php_source.html">index.php</a> строка <a class="el" href="../../de/d20/index_8php_source.html#l00139">139</a></p>

</div>
</div>
<a id="ab24faf4aa647cdcee494fc48524ad4ff" name="ab24faf4aa647cdcee494fc48524ad4ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab24faf4aa647cdcee494fc48524ad4ff">&#9670;&#160;</a></span>$errors</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$errors = []</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../de/d20/index_8php_source.html">index.php</a> строка <a class="el" href="../../de/d20/index_8php_source.html#l00108">108</a></p>

</div>
</div>
<a id="af6d626b28fccda802400c748c0d7a42e" name="af6d626b28fccda802400c748c0d7a42e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6d626b28fccda802400c748c0d7a42e">&#9670;&#160;</a></span>$header_footer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$header_footer = true</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Флаг: выводить ли заголовок и подвал страницы. </p>

<p class="definition">См. определение в файле <a class="el" href="../../de/d20/index_8php_source.html">index.php</a> строка <a class="el" href="../../de/d20/index_8php_source.html#l00188">188</a></p>

</div>
</div>
<a id="a1063c700c9559e7928a1dc6ef5abe15f" name="a1063c700c9559e7928a1dc6ef5abe15f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1063c700c9559e7928a1dc6ef5abe15f">&#9670;&#160;</a></span>$http_host</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if((!empty($_SERVER['HTTPS']) &amp;&amp;strtolower($_SERVER['HTTPS'])==='on')||(!empty($_SERVER['HTTPS']) &amp;&amp; $_SERVER['HTTPS']==='1')) elseif(!empty( $_SERVER[ 'HTTP_X_FORWARDED_PROTO']) &amp;&amp;in_array(strtolower( $_SERVER[ 'HTTP_X_FORWARDED_PROTO']),[ 'https', 'h2'])) elseif(!empty($_SERVER['SERVER_PORT']) &amp;&amp; $_SERVER['SERVER_PORT']==443) elseif (!empty( $_SERVER[ 'REQUEST_SCHEME']) &amp;&amp;strtolower( $_SERVER[ 'REQUEST_SCHEME'])==='https') $http_host = filter_input(INPUT_SERVER, 'HTTP_HOST', FILTER_SANITIZE_FULL_SPECIAL_CHARS)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Безопасная проверка HTTP_HOST.</p>
<p>Используются различные источники данных для определения HTTP_HOST:</p><ul>
<li>$_SERVER['HTTP_HOST'] (основной источник).</li>
<li>$_SERVER['SERVER_NAME'] (резервный источник). Выполняется валидация формата домена для предотвращения атак через заголовки. </li>
</ul>

<p class="definition">См. определение в файле <a class="el" href="../../d0/d45/config_8php_source.html">config.php</a> строка <a class="el" href="../../d0/d45/config_8php_source.html#l00147">147</a></p>

</div>
</div>
<a id="abf17cb2dba2ed17cb28aa5f37deb5293" name="abf17cb2dba2ed17cb28aa5f37deb5293"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf17cb2dba2ed17cb28aa5f37deb5293">&#9670;&#160;</a></span>$message</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$message = date('H:i:s') . &quot; [ERROR] | &quot; . ($remote_ip ?: 'UNKNOWN_IP') . ' | ' . $type . ': ' . $e-&gt;getMessage() . PHP_EOL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../de/d20/index_8php_source.html">index.php</a> строка <a class="el" href="../../de/d20/index_8php_source.html#l00294">294</a></p>

</div>
</div>
<a id="ab2d0bc152db0769c22005f821caf29e8" name="ab2d0bc152db0769c22005f821caf29e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2d0bc152db0769c22005f821caf29e8">&#9670;&#160;</a></span>$required_directories</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$required_directories</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Инициализатор</b><div class="fragment"><div class="line">= [</div>
<div class="line">    <a class="code hl_variable" href="#abf3b0e1e3a4fcba298ee69fc89bccaee">$config</a>[<span class="stringliteral">&#39;site_dir&#39;</span>] . <a class="code hl_variable" href="#abf3b0e1e3a4fcba298ee69fc89bccaee">$config</a>[<span class="stringliteral">&#39;gallery_folder&#39;</span>] . <span class="charliteral">&#39;/&#39;</span>,</div>
<div class="line">    <a class="code hl_variable" href="#abf3b0e1e3a4fcba298ee69fc89bccaee">$config</a>[<span class="stringliteral">&#39;site_dir&#39;</span>] . <a class="code hl_variable" href="#abf3b0e1e3a4fcba298ee69fc89bccaee">$config</a>[<span class="stringliteral">&#39;thumbnail_folder&#39;</span>] . <span class="charliteral">&#39;/&#39;</span>,</div>
<div class="line">    <a class="code hl_variable" href="#abf3b0e1e3a4fcba298ee69fc89bccaee">$config</a>[<span class="stringliteral">&#39;site_dir&#39;</span>] . <a class="code hl_variable" href="#abf3b0e1e3a4fcba298ee69fc89bccaee">$config</a>[<span class="stringliteral">&#39;avatar_folder&#39;</span>] . <span class="charliteral">&#39;/&#39;</span>,</div>
<div class="line">    <a class="code hl_variable" href="#abf3b0e1e3a4fcba298ee69fc89bccaee">$config</a>[<span class="stringliteral">&#39;inc_dir&#39;</span>],</div>
<div class="line">]</div>
<div class="ttc" id="ainterfacePhotoRigma_html_abf3b0e1e3a4fcba298ee69fc89bccaee"><div class="ttname"><a href="#abf3b0e1e3a4fcba298ee69fc89bccaee">PhotoRigma\$config</a></div><div class="ttdeci">$config</div><div class="ttdoc">Параметры подключения к базе данных.</div><div class="ttdef"><b>Определения</b> <a href="../../d0/d45/config_8php_source.html#l00055">config.php:55</a></div></div>
</div><!-- fragment --><p>Проверка существования и доступности директорий.</p>
<p>Проверяются директории, указанные в настройках ($gallery_folder, $thumbnail_folder, $avatar_folder). </p>

<p class="definition">См. определение в файле <a class="el" href="../../d0/d45/config_8php_source.html">config.php</a> строка <a class="el" href="../../d0/d45/config_8php_source.html#l00249">249</a></p>

</div>
</div>
<a id="a630e9f4c562881099e95ce0355ae9d78" name="a630e9f4c562881099e95ce0355ae9d78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a630e9f4c562881099e95ce0355ae9d78">&#9670;&#160;</a></span>$required_files</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$required_files</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Инициализатор</b><div class="fragment"><div class="line">= [</div>
<div class="line">        <a class="code hl_variable" href="#abf3b0e1e3a4fcba298ee69fc89bccaee">$config</a>[<span class="stringliteral">&#39;inc_dir&#39;</span>] . <span class="stringliteral">&#39;common.php&#39;</span>,</div>
<div class="line">        <a class="code hl_variable" href="#abf3b0e1e3a4fcba298ee69fc89bccaee">$config</a>[<span class="stringliteral">&#39;inc_dir&#39;</span>] . <span class="stringliteral">&#39;db.php&#39;</span>,</div>
<div class="line">        <a class="code hl_variable" href="#abf3b0e1e3a4fcba298ee69fc89bccaee">$config</a>[<span class="stringliteral">&#39;inc_dir&#39;</span>] . <span class="stringliteral">&#39;work_helper.php&#39;</span>,</div>
<div class="line">        <a class="code hl_variable" href="#abf3b0e1e3a4fcba298ee69fc89bccaee">$config</a>[<span class="stringliteral">&#39;inc_dir&#39;</span>] . <span class="stringliteral">&#39;work_corelogic.php&#39;</span>,</div>
<div class="line">        <a class="code hl_variable" href="#abf3b0e1e3a4fcba298ee69fc89bccaee">$config</a>[<span class="stringliteral">&#39;inc_dir&#39;</span>] . <span class="stringliteral">&#39;work_image.php&#39;</span>,</div>
<div class="line">        <a class="code hl_variable" href="#abf3b0e1e3a4fcba298ee69fc89bccaee">$config</a>[<span class="stringliteral">&#39;inc_dir&#39;</span>] . <span class="stringliteral">&#39;work_template.php&#39;</span>,</div>
<div class="line">        <a class="code hl_variable" href="#abf3b0e1e3a4fcba298ee69fc89bccaee">$config</a>[<span class="stringliteral">&#39;inc_dir&#39;</span>] . <span class="stringliteral">&#39;work_security.php&#39;</span>,</div>
<div class="line">        <a class="code hl_variable" href="#abf3b0e1e3a4fcba298ee69fc89bccaee">$config</a>[<span class="stringliteral">&#39;inc_dir&#39;</span>] . <span class="stringliteral">&#39;work.php&#39;</span>,</div>
<div class="line">        <a class="code hl_variable" href="#abf3b0e1e3a4fcba298ee69fc89bccaee">$config</a>[<span class="stringliteral">&#39;inc_dir&#39;</span>] . <span class="stringliteral">&#39;template.php&#39;</span>,</div>
<div class="line">        <a class="code hl_variable" href="#abf3b0e1e3a4fcba298ee69fc89bccaee">$config</a>[<span class="stringliteral">&#39;inc_dir&#39;</span>] . <span class="stringliteral">&#39;user.php&#39;</span>,</div>
<div class="line">    ]</div>
</div><!-- fragment -->
<p>Список обязательных файлов для подключения. </p>
<p>Содержит пути к файлам, которые необходимы для работы приложения. </p>

<p class="definition">См. определение в файле <a class="el" href="../../de/d20/index_8php_source.html">index.php</a> строка <a class="el" href="../../de/d20/index_8php_source.html#l00094">94</a></p>

</div>
</div>
<a id="a7843e7143af5311d18183f4d9a9e425e" name="a7843e7143af5311d18183f4d9a9e425e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7843e7143af5311d18183f4d9a9e425e">&#9670;&#160;</a></span>$safe_output</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$safe_output = htmlspecialchars($message, ENT_QUOTES | ENT_HTML5, 'UTF-8')</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../de/d20/index_8php_source.html">index.php</a> строка <a class="el" href="../../de/d20/index_8php_source.html#l00334">334</a></p>

</div>
</div>
<a id="a271f5d9c110c98ece73bec3151bf1a90" name="a271f5d9c110c98ece73bec3151bf1a90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a271f5d9c110c98ece73bec3151bf1a90">&#9670;&#160;</a></span>$script_name</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if(! $http_host) if(! $http_host) if (!preg_match('/^([a-z\d](- *[a-z\d]) *)(\.([a-z\d](- *[a-z\d]) *)) *$/i', $http_host)) $script_name = filter_input(INPUT_SERVER, 'SCRIPT_NAME', FILTER_SANITIZE_FULL_SPECIAL_CHARS)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Безопасное определение SCRIPT_NAME.</p>
<p>Используются различные источники данных для определения SCRIPT_NAME:</p><ul>
<li>$_SERVER['SCRIPT_NAME'] (основной источник).</li>
<li>$_SERVER['PHP_SELF'] (резервный источник). Выполняется валидация формата пути для предотвращения атак через заголовки. </li>
</ul>

<p class="definition">См. определение в файле <a class="el" href="../../d0/d45/config_8php_source.html">config.php</a> строка <a class="el" href="../../d0/d45/config_8php_source.html#l00171">171</a></p>

</div>
</div>
<a id="aa3e9534005fd516d941f6a5569896e01" name="aa3e9534005fd516d941f6a5569896e01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3e9534005fd516d941f6a5569896e01">&#9670;&#160;</a></span>$template</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$template</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Инициализатор</b><div class="fragment"><div class="line">= <span class="keyword">new</span> Template(</div>
<div class="line">        <a class="code hl_variable" href="#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;config[<span class="stringliteral">&#39;site_url&#39;</span>],</div>
<div class="line">        <a class="code hl_variable" href="#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;config[<span class="stringliteral">&#39;site_dir&#39;</span>],</div>
<div class="line">        <a class="code hl_variable" href="#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;config[<span class="stringliteral">&#39;themes&#39;</span>]</div>
<div class="line">    )</div>
<div class="ttc" id="ainterfacePhotoRigma_html_a2429001fb0fa404b4fe0ab42a91a9a48"><div class="ttname"><a href="#a2429001fb0fa404b4fe0ab42a91a9a48">PhotoRigma\$work</a></div><div class="ttdeci">$work</div><div class="ttdoc">Создание объекта класса Work.</div><div class="ttdef"><b>Определения</b> <a href="../../de/d20/index_8php_source.html#l00150">index.php:150</a></div></div>
</div><!-- fragment -->
<p>Создание объекта класса Template. </p>
<p>Используется для генерации HTML-контента страниц. </p><dl class="section see"><dt>См. также</dt><dd>\<a class="el" href="../../d9/d8f/interfacePhotoRigma.html" title="Интерфейс Database_Interface определяет методы для работы с базой данных.">PhotoRigma</a>\<a class="el" href="../../d6/dc3/namespacePhotoRigma_1_1Classes.html">Classes</a>\Template Класс для работы с HTML-шаблонами. </dd>
<dd>
<a class="el" href="../../d6/dd6/template_8php.html" title="Класс для работы с HTML-шаблонами, включая рендеринг и подстановку данных.">include/template.php</a> Файл, содержащий реализацию класса Template. </dd>
<dd>
\<a class="el" href="../../d9/d8f/interfacePhotoRigma.html" title="Интерфейс Database_Interface определяет методы для работы с базой данных.">PhotoRigma</a>\<a class="el" href="../../d6/dc3/namespacePhotoRigma_1_1Classes.html">Classes</a>\<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#ab76f8f2ac851632a23ef69df2bd99dad" title="Массив, хранящий конфигурацию приложения.">Work\$config</a> Свойство, хранящее конфигурацию для шаблонов. </dd>
<dd>
\<a class="el" href="../../d9/d8f/interfacePhotoRigma.html" title="Интерфейс Database_Interface определяет методы для работы с базой данных.">PhotoRigma</a>\<a class="el" href="../../d6/dc3/namespacePhotoRigma_1_1Classes.html">Classes</a>\Template::create_template() Метод для создания содержимого страницы. </dd>
<dd>
\<a class="el" href="../../d9/d8f/interfacePhotoRigma.html" title="Интерфейс Database_Interface определяет методы для работы с базой данных.">PhotoRigma</a>\<a class="el" href="../../d6/dc3/namespacePhotoRigma_1_1Classes.html">Classes</a>\Template::page_header() Метод для добавления шапки страницы. </dd>
<dd>
\<a class="el" href="../../d9/d8f/interfacePhotoRigma.html" title="Интерфейс Database_Interface определяет методы для работы с базой данных.">PhotoRigma</a>\<a class="el" href="../../d6/dc3/namespacePhotoRigma_1_1Classes.html">Classes</a>\Template::page_footer() Метод для добавления подвала страницы. </dd>
<dd>
\<a class="el" href="../../d9/d8f/interfacePhotoRigma.html" title="Интерфейс Database_Interface определяет методы для работы с базой данных.">PhotoRigma</a>\<a class="el" href="../../d6/dc3/namespacePhotoRigma_1_1Classes.html">Classes</a>\Template::$content Свойство, хранящее содержимое всей страницы. </dd>
<dd>
<a class="el" href="#ada57e7bb7c152edad18fe2f166188691" title="Добавление текста к заголовку страницы.">$title</a> Переменная, используемая для добавления текста к заголовку страницы. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../de/d20/index_8php_source.html">index.php</a> строка <a class="el" href="../../de/d20/index_8php_source.html#l00171">171</a></p>

</div>
</div>
<a id="a565b8336923ef5ec8f122c2b41c5eef1" name="a565b8336923ef5ec8f122c2b41c5eef1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a565b8336923ef5ec8f122c2b41c5eef1">&#9670;&#160;</a></span>$template_output</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$template_output = true</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Флаг: выводить ли обработанный шаблон. </p>

<p class="definition">См. определение в файле <a class="el" href="../../de/d20/index_8php_source.html">index.php</a> строка <a class="el" href="../../de/d20/index_8php_source.html#l00193">193</a></p>

</div>
</div>
<a id="ada57e7bb7c152edad18fe2f166188691" name="ada57e7bb7c152edad18fe2f166188691"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada57e7bb7c152edad18fe2f166188691">&#9670;&#160;</a></span>$title</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$title = null</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Добавление текста к заголовку страницы. </p>

<p class="definition">См. определение в файле <a class="el" href="../../de/d20/index_8php_source.html">index.php</a> строка <a class="el" href="../../de/d20/index_8php_source.html#l00198">198</a></p>

</div>
</div>
<a id="a598ca4e71b15a1313ec95f0df1027ca5" name="a598ca4e71b15a1313ec95f0df1027ca5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a598ca4e71b15a1313ec95f0df1027ca5">&#9670;&#160;</a></span>$user</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$user = new User()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Создание объекта класса User. </p>
<p>Используется для управления пользователями системы. </p><dl class="section see"><dt>См. также</dt><dd>\<a class="el" href="../../d9/d8f/interfacePhotoRigma.html" title="Интерфейс Database_Interface определяет методы для работы с базой данных.">PhotoRigma</a>\<a class="el" href="../../d6/dc3/namespacePhotoRigma_1_1Classes.html">Classes</a>\User Класс для управления пользователями. </dd>
<dd>
<a class="el" href="../../d1/d1a/user_8php.html" title="Класс для управления пользователями, включая регистрацию, аутентификацию, управление профилем и хране...">include/user.php</a> Файл, содержащий реализацию класса User. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../de/d20/index_8php_source.html">index.php</a> строка <a class="el" href="../../de/d20/index_8php_source.html#l00183">183</a></p>

</div>
</div>
<a id="a2429001fb0fa404b4fe0ab42a91a9a48" name="a2429001fb0fa404b4fe0ab42a91a9a48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2429001fb0fa404b4fe0ab42a91a9a48">&#9670;&#160;</a></span>$work</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$work = new Work($db, $config)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Создание объекта класса <a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html">Work</a>. </p>
<p>Используется для выполнения различных вспомогательных операций. </p><dl class="section see"><dt>См. также</dt><dd>\<a class="el" href="../../d9/d8f/interfacePhotoRigma.html" title="Интерфейс Database_Interface определяет методы для работы с базой данных.">PhotoRigma</a>\<a class="el" href="../../d6/dc3/namespacePhotoRigma_1_1Classes.html">Classes</a>\<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html">Work</a> Класс для выполнения вспомогательных операций. </dd>
<dd>
<a class="el" href="../../dc/d7a/work_8php.html" title="Файл содержит класс Work, который является основным классом приложения. Объединяет подклассы для выпо...">include/work.php</a> Файл, содержащий реализацию класса <a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html">Work</a>. </dd>
<dd>
\<a class="el" href="../../d9/d8f/interfacePhotoRigma.html" title="Интерфейс Database_Interface определяет методы для работы с базой данных.">PhotoRigma</a>\<a class="el" href="../../d6/dc3/namespacePhotoRigma_1_1Classes.html">Classes</a>\<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#ab76f8f2ac851632a23ef69df2bd99dad" title="Массив, хранящий конфигурацию приложения.">Work\$config</a> Свойство, хранящее конфигурацию приложения. </dd>
<dd>
\<a class="el" href="../../d9/d8f/interfacePhotoRigma.html" title="Интерфейс Database_Interface определяет методы для работы с базой данных.">PhotoRigma</a>\<a class="el" href="../../d6/dc3/namespacePhotoRigma_1_1Classes.html">Classes</a>\<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a6e6ea2a212c3c2dee206a1753b673b7d">Work\check_input()</a> Метод для проверки входных данных. </dd>
<dd>
\<a class="el" href="../../d9/d8f/interfacePhotoRigma.html" title="Интерфейс Database_Interface определяет методы для работы с базой данных.">PhotoRigma</a>\<a class="el" href="../../d6/dc3/namespacePhotoRigma_1_1Classes.html">Classes</a>\<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a1e1a4ab6b213ada0d89c77a24d8ffe32">Work\url_check()</a> Метод для проверки URL на наличие вредоносного кода. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../de/d20/index_8php_source.html">index.php</a> строка <a class="el" href="../../de/d20/index_8php_source.html#l00150">150</a></p>

</div>
</div>
<a id="a62b7f878abcac93af0f81464c8d008d7" name="a62b7f878abcac93af0f81464c8d008d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62b7f878abcac93af0f81464c8d008d7">&#9670;&#160;</a></span>DEBUG_GALLERY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const DEBUG_GALLERY false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../de/d20/index_8php_source.html">index.php</a> строка <a class="el" href="../../de/d20/index_8php_source.html#l00066">66</a></p>

</div>
</div>
<a id="a4057bc03d7be65171c1b45c2219cc96b" name="a4057bc03d7be65171c1b45c2219cc96b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4057bc03d7be65171c1b45c2219cc96b">&#9670;&#160;</a></span>else <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if ($work-&gt;check_input( $_GET, 'action',[ 'isset'=&gt; true, 'empty'=&gt; true]) &amp;&amp; $_GET[ 'action'] !=='index' &amp;&amp; ! $work-&gt;url_check()) else</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Инициализатор</b><div class="fragment"><div class="line">{</div>
<div class="line">        </div>
<div class="line">        $action_file = <a class="code hl_variable" href="#a2429001fb0fa404b4fe0ab42a91a9a48">$work</a>-&gt;config[<span class="stringliteral">&#39;site_dir&#39;</span>] . <span class="stringliteral">&#39;action/main.php&#39;</span></div>
</div><!-- fragment --><p>Обработка действия, указанного в параметре 'action'.</p><ul>
<li>Проверяется существование и безопасность параметра 'action'.</li>
<li>Формируется путь к файлу действия.</li>
<li>Если файл не существует или недоступен, используется файл по умолчанию ('main.php'). </li>
</ul>

<p class="definition">См. определение в файле <a class="el" href="../../de/d20/index_8php_source.html">index.php</a> строка <a class="el" href="../../de/d20/index_8php_source.html#l00231">231</a></p>

</div>
</div>
<a id="aa355238e5cfbf4556dccf2f8a2b68926" name="aa355238e5cfbf4556dccf2f8a2b68926"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa355238e5cfbf4556dccf2f8a2b68926">&#9670;&#160;</a></span>else <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if (is_file( $action_file) &amp;&amp;is_readable( $action_file)) else</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Инициализатор</b><div class="fragment"><div class="line">{</div>
<div class="line">        <span class="keywordflow">throw</span> new \RuntimeException(</div>
<div class="line">            __FILE__ . <span class="stringliteral">&quot;:&quot;</span> . __LINE__ . <span class="stringliteral">&quot; (&quot;</span> . (__FUNCTION__ ?: <span class="stringliteral">&#39;global&#39;</span>) . <span class="stringliteral">&quot;) | Файл действий не найден или недоступен для чтения | Путь: {$action_file}&quot;</span></div>
<div class="line">        )</div>
</div><!-- fragment -->
<p class="definition">См. определение в файле <a class="el" href="../../de/d20/index_8php_source.html">index.php</a> строка <a class="el" href="../../de/d20/index_8php_source.html#l00238">238</a></p>

</div>
</div>
<a id="aff0371667b73312d21d0b68a4049e371" name="aff0371667b73312d21d0b68a4049e371"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff0371667b73312d21d0b68a4049e371">&#9670;&#160;</a></span>else <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if (function_exists( 'log_in_file')) else</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../de/d20/index_8php_source.html">index.php</a> строка <a class="el" href="../../de/d20/index_8php_source.html#l00298">298</a></p>

</div>
</div>
<a id="ae07beac783fdab08b691bb38425a6771" name="ae07beac783fdab08b691bb38425a6771"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae07beac783fdab08b691bb38425a6771">&#9670;&#160;</a></span>FILTER_VALIDATE_IP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if($header_footer) if( $template_output) catch(\RuntimeException $e) catch(\PDOException $e) catch(\InvalidArgumentException $e) catch(\LogicException $e) catch(\BadMethodCallException $e) catch(\BadFunctionCallException $e) catch(\DomainException $e) catch(\UnexpectedValueException $e) catch(\LengthException $e) catch(\OutOfBoundsException $e) catch(\RangeException $e) catch (\Exception $e FILTER_VALIDATE_IP</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../de/d20/index_8php_source.html">index.php</a> строка <a class="el" href="../../de/d20/index_8php_source.html#l00293">293</a></p>

</div>
</div>
<a id="acefb76e2bff32b4d1b4605e70795a704" name="acefb76e2bff32b4d1b4605e70795a704"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acefb76e2bff32b4d1b4605e70795a704">&#9670;&#160;</a></span>handle_exception</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if($header_footer) if( $template_output) catch(\RuntimeException $e) catch(\PDOException $e) catch(\InvalidArgumentException $e) catch(\LogicException $e) catch(\BadMethodCallException $e) catch(\BadFunctionCallException $e) catch(\DomainException $e) catch(\UnexpectedValueException $e) catch(\LengthException $e) catch(\OutOfBoundsException $e) catch(\RangeException $e) catch (\Exception $e) handle_exception</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../de/d20/index_8php_source.html">index.php</a> строка <a class="el" href="../../de/d20/index_8php_source.html#l00291">291</a></p>

</div>
</div>
<a id="afc238d5007d9f82f9c59e7d33f7a75c6" name="afc238d5007d9f82f9c59e7d33f7a75c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc238d5007d9f82f9c59e7d33f7a75c6">&#9670;&#160;</a></span>IN_GALLERY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const IN_GALLERY true</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../de/d20/index_8php_source.html">index.php</a> строка <a class="el" href="../../de/d20/index_8php_source.html#l00059">59</a></p>

</div>
</div>
<a id="abe4cc9788f52e49485473dc699537388" name="abe4cc9788f52e49485473dc699537388"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe4cc9788f52e49485473dc699537388">&#9670;&#160;</a></span>try</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">try</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Инициализатор</b><div class="fragment"><div class="line">{</div>
<div class="line"> </div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> (!is_file(<span class="stringliteral">&#39;config.php&#39;</span>)) {</div>
<div class="line">        <span class="keywordflow">throw</span> new \RuntimeException(</div>
<div class="line">            __FILE__ . <span class="stringliteral">&quot;:&quot;</span> . __LINE__ . <span class="stringliteral">&quot; (&quot;</span> . (__FUNCTION__ ?: <span class="stringliteral">&#39;global&#39;</span>) . <span class="stringliteral">&quot;) | Конфигурационный файл отсутствует или не является файлом | Путь: config.php&quot;</span></div>
<div class="line">        );</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (!is_readable(<span class="stringliteral">&#39;config.php&#39;</span>)) {</div>
<div class="line">        <span class="keywordflow">throw</span> new \RuntimeException(</div>
<div class="line">            __FILE__ . <span class="stringliteral">&quot;:&quot;</span> . __LINE__ . <span class="stringliteral">&quot; (&quot;</span> . (__FUNCTION__ ?: <span class="stringliteral">&#39;global&#39;</span>) . <span class="stringliteral">&quot;) | Конфигурационный файл существует, но недоступен для чтения | Путь: config.php&quot;</span></div>
<div class="line">        );</div>
<div class="line">    }</div>
<div class="line">    require_once <span class="stringliteral">&#39;config.php&#39;</span></div>
</div><!-- fragment -->
<p class="definition">См. определение в файле <a class="el" href="../../de/d20/index_8php_source.html">index.php</a> строка <a class="el" href="../../de/d20/index_8php_source.html#l00068">68</a></p>

</div>
</div>
<hr/>Объявления и описания членов интерфейсов находятся в файлах:<ul>
<li>include/<a class="el" href="../../dc/d82/db_8php_source.html">db.php</a></li>
<li><a class="el" href="../../d0/d45/config_8php_source.html">config.php</a></li>
<li><a class="el" href="../../de/d20/index_8php_source.html">index.php</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d9/d8f/interfacePhotoRigma.html">PhotoRigma</a></li>
    <li class="footer">Создано системой <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
