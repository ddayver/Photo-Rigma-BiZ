<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Photo-Rigma-BiZ: Класс Work_Image</title>
<link rel="icon" href="../../favicon.ico" type="image/x-icon" />
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo-1.png"/></td>
  <td id="projectalign">
   <div id="projectname">Photo-Rigma-BiZ<span id="projectnumber">&#160;0.4.3</span>
   </div>
   <div id="projectbrief">Gallery_Photo-Rigma-BiZ</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Поиск',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Загрузка...</div>
<div class="SRStatus" id="Searching">Поиск...</div>
<div class="SRStatus" id="NoMatches">Не найдено</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Открытые члены</a> &#124;
<a href="#pub-attribs">Открытые атрибуты</a> &#124;
<a href="#pro-methods">Защищенные члены</a> &#124;
<a href="#pri-methods">Закрытые члены</a> &#124;
<a href="#pri-attribs">Закрытые данные</a> &#124;
<a href="../../d5/d90/classPhotoRigma_1_1Classes_1_1Work__Image-members.html">Полный список членов класса</a>  </div>
  <div class="headertitle"><div class="title">Класс Work_Image</div></div>
</div><!--header-->
<div class="contents">

<p>Класс для работы с изображениями.  
 <a href="#details">Подробнее...</a></p>
<div id="dynsection-0" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Граф наследования:Work_Image:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d7/de5/classPhotoRigma_1_1Classes_1_1Work__Image__inherit__graph.png" border="0" usemap="#aWork__Image_inherit__map" alt="Inheritance graph"/></div>
<map name="aWork__Image_inherit__map" id="aWork__Image_inherit__map">
<area shape="rect" title="Класс для работы с изображениями." alt="" coords="34,78,129,103"/>
<area shape="rect" href="../../d1/de5/interfacePhotoRigma_1_1Interfaces_1_1Work__Image__Interface.html" title="Интерфейс для работы с изображениями." alt="" coords="5,5,158,30"/>
<area shape="poly" title=" " alt="" coords="84,46,84,78,79,78,79,46"/>
</map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">см. легенду</a>]</span></center></div>
<div id="dynsection-1" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Граф связей класса Work_Image:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d3/d59/classPhotoRigma_1_1Classes_1_1Work__Image__coll__graph.png" border="0" usemap="#aWork__Image_coll__map" alt="Collaboration graph"/></div>
<map name="aWork__Image_coll__map" id="aWork__Image_coll__map">
<area shape="rect" title="Класс для работы с изображениями." alt="" coords="34,78,129,103"/>
<area shape="rect" href="../../d1/de5/interfacePhotoRigma_1_1Interfaces_1_1Work__Image__Interface.html" title="Интерфейс для работы с изображениями." alt="" coords="5,5,158,30"/>
<area shape="poly" title=" " alt="" coords="84,46,84,78,79,78,79,46"/>
</map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">см. легенду</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Открытые члены</h2></td></tr>
<tr class="memitem:a1538e33cc82d38ead75aba61979dbcf9" id="r_a1538e33cc82d38ead75aba61979dbcf9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1538e33cc82d38ead75aba61979dbcf9">__construct</a> (array $config)</td></tr>
<tr class="memdesc:a1538e33cc82d38ead75aba61979dbcf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Конструктор класса.  <br /></td></tr>
<tr class="separator:a1538e33cc82d38ead75aba61979dbcf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0acd7052f38245fd3723ea29c83bf3f3" id="r_a0acd7052f38245fd3723ea29c83bf3f3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0acd7052f38245fd3723ea29c83bf3f3">__get</a> (string $name)</td></tr>
<tr class="memdesc:a0acd7052f38245fd3723ea29c83bf3f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Получает значение приватного свойства.  <br /></td></tr>
<tr class="separator:a0acd7052f38245fd3723ea29c83bf3f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c8aa5e8f1335dd150232b9ba442d694" id="r_a7c8aa5e8f1335dd150232b9ba442d694"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7c8aa5e8f1335dd150232b9ba442d694">__set</a> (string $name, array $value)</td></tr>
<tr class="memdesc:a7c8aa5e8f1335dd150232b9ba442d694"><td class="mdescLeft">&#160;</td><td class="mdescRight">Устанавливает значение приватного свойства.  <br /></td></tr>
<tr class="separator:a7c8aa5e8f1335dd150232b9ba442d694"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c45daa80235f514090aa7789f5e93b3" id="r_a0c45daa80235f514090aa7789f5e93b3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0c45daa80235f514090aa7789f5e93b3">__isset</a> (string $name)</td></tr>
<tr class="memdesc:a0c45daa80235f514090aa7789f5e93b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Проверяет существование недоступного свойства.  <br /></td></tr>
<tr class="separator:a0c45daa80235f514090aa7789f5e93b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a935337e705b7a1b9ea422d2e04932109" id="r_a935337e705b7a1b9ea422d2e04932109"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a935337e705b7a1b9ea422d2e04932109">create_directory</a> (string $directory_name)</td></tr>
<tr class="memdesc:a935337e705b7a1b9ea422d2e04932109"><td class="mdescLeft">&#160;</td><td class="mdescRight">Создаёт директории для категории и копирует файлы <code><a class="el" href="../../de/d20/index_8php.html" title="Точка входа в приложение PhotoRigma.">index.php</a></code> через вызов внутреннего метода.  <br /></td></tr>
<tr class="separator:a935337e705b7a1b9ea422d2e04932109"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89d4e7cb491d0c91282d16ff5abe3138" id="r_a89d4e7cb491d0c91282d16ff5abe3138"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a89d4e7cb491d0c91282d16ff5abe3138">fix_file_extension</a> (string $full_path)</td></tr>
<tr class="memdesc:a89d4e7cb491d0c91282d16ff5abe3138"><td class="mdescLeft">&#160;</td><td class="mdescRight">Корректирует расширение файла в соответствии с его MIME-типом через вызов внутреннего метода.  <br /></td></tr>
<tr class="separator:a89d4e7cb491d0c91282d16ff5abe3138"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af37eb2b0693905dd71dd677f86d47831" id="r_af37eb2b0693905dd71dd677f86d47831"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af37eb2b0693905dd71dd677f86d47831">image_resize</a> (string $full_path, string $thumbnail_path)</td></tr>
<tr class="memdesc:af37eb2b0693905dd71dd677f86d47831"><td class="mdescLeft">&#160;</td><td class="mdescRight">Изменяет размер изображения через вызов внутреннего метода.  <br /></td></tr>
<tr class="separator:af37eb2b0693905dd71dd677f86d47831"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfcd1cb7963a860013ca9ca1898f54f1" id="r_adfcd1cb7963a860013ca9ca1898f54f1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adfcd1cb7963a860013ca9ca1898f54f1">no_photo</a> ()</td></tr>
<tr class="memdesc:adfcd1cb7963a860013ca9ca1898f54f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Возвращает данные для отсутствующего изображения через вызов внутреннего метода.  <br /></td></tr>
<tr class="separator:adfcd1cb7963a860013ca9ca1898f54f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaaf358ddc8223e4a5a479f645fc43da8" id="r_aaaf358ddc8223e4a5a479f645fc43da8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaaf358ddc8223e4a5a479f645fc43da8">remove_directory</a> (string $path)</td></tr>
<tr class="memdesc:aaaf358ddc8223e4a5a479f645fc43da8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Удаляет директорию и её содержимое через вызов внутреннего метода.  <br /></td></tr>
<tr class="separator:aaaf358ddc8223e4a5a479f645fc43da8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a096b7e5c3f9fb908fbb30e1adc2ac61b" id="r_a096b7e5c3f9fb908fbb30e1adc2ac61b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a096b7e5c3f9fb908fbb30e1adc2ac61b">size_image</a> (string $path_image)</td></tr>
<tr class="memdesc:a096b7e5c3f9fb908fbb30e1adc2ac61b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Вычисляет размеры для вывода эскиза изображения через вызов внутреннего метода.  <br /></td></tr>
<tr class="separator:a096b7e5c3f9fb908fbb30e1adc2ac61b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_interfacePhotoRigma_1_1Interfaces_1_1Work__Image__Interface"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_methods_interfacePhotoRigma_1_1Interfaces_1_1Work__Image__Interface')"><img src="../../closed.png" alt="-"/>&#160;Открытые члены унаследованные от <a class="el" href="../../d1/de5/interfacePhotoRigma_1_1Interfaces_1_1Work__Image__Interface.html">Work_Image_Interface</a></td></tr>
<tr class="memitem:aeabe138e0704bd8403da0faf894ad0df inherit pub_methods_interfacePhotoRigma_1_1Interfaces_1_1Work__Image__Interface" id="r_aeabe138e0704bd8403da0faf894ad0df"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/de5/interfacePhotoRigma_1_1Interfaces_1_1Work__Image__Interface.html#aeabe138e0704bd8403da0faf894ad0df">image_attach</a> (string $full_path, string $name_file)</td></tr>
<tr class="memdesc:aeabe138e0704bd8403da0faf894ad0df inherit pub_methods_interfacePhotoRigma_1_1Interfaces_1_1Work__Image__Interface"><td class="mdescLeft">&#160;</td><td class="mdescRight">Выводит изображение через HTTP.  <br /></td></tr>
<tr class="separator:aeabe138e0704bd8403da0faf894ad0df inherit pub_methods_interfacePhotoRigma_1_1Interfaces_1_1Work__Image__Interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Открытые атрибуты</h2></td></tr>
<tr class="memitem:a4d1985caafb49b059e3ca3dedfee257a" id="r_a4d1985caafb49b059e3ca3dedfee257a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4d1985caafb49b059e3ca3dedfee257a">$mime_type</a> = finfo_file($finfo, $full_path)</td></tr>
<tr class="memdesc:a4d1985caafb49b059e3ca3dedfee257a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Выводит изображение через HTTP через вызов внутреннего метода.  <br /></td></tr>
<tr class="separator:a4d1985caafb49b059e3ca3dedfee257a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a835ab7aded33c3c34cd60ab84ae6c7" id="r_a7a835ab7aded33c3c34cd60ab84ae6c7"><td class="memItemLeft" align="right" valign="top">if(! $mime_type||!str_starts_with($mime_type, 'image/'))&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7a835ab7aded33c3c34cd60ab84ae6c7">$file_size</a> = filesize($full_path)</td></tr>
<tr class="separator:a7a835ab7aded33c3c34cd60ab84ae6c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a015aa0bda28030cbf1a64c0afb88f958" id="r_a015aa0bda28030cbf1a64c0afb88f958"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a015aa0bda28030cbf1a64c0afb88f958">$fh</a> = fopen($full_path, 'rb')</td></tr>
<tr class="separator:a015aa0bda28030cbf1a64c0afb88f958"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6733eb5f605d09eaede9845835d71c4e" id="r_a6733eb5f605d09eaede9845835d71c4e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6733eb5f605d09eaede9845835d71c4e">exit</a></td></tr>
<tr class="separator:a6733eb5f605d09eaede9845835d71c4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Защищенные члены</h2></td></tr>
<tr class="memitem:ae77f64cb663e7c3c35e7cbcdfd846cf2" id="r_ae77f64cb663e7c3c35e7cbcdfd846cf2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae77f64cb663e7c3c35e7cbcdfd846cf2">_create_directory_internal</a> (string $directory_name)</td></tr>
<tr class="memdesc:ae77f64cb663e7c3c35e7cbcdfd846cf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Создает директории для категории и копирует файлы <code><a class="el" href="../../de/d20/index_8php.html" title="Точка входа в приложение PhotoRigma.">index.php</a></code>, предварительно проверяя права доступа.  <br /></td></tr>
<tr class="separator:ae77f64cb663e7c3c35e7cbcdfd846cf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7cd1deb24cdf852e9981eb4f2665ff1" id="r_af7cd1deb24cdf852e9981eb4f2665ff1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af7cd1deb24cdf852e9981eb4f2665ff1">_fix_file_extension_internal</a> (string $full_path)</td></tr>
<tr class="memdesc:af7cd1deb24cdf852e9981eb4f2665ff1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Корректировка расширения файла в соответствии с его MIME-типом (защищённый метод).  <br /></td></tr>
<tr class="separator:af7cd1deb24cdf852e9981eb4f2665ff1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f18185f2629abbc3bf148d8addfcfe8" id="r_a7f18185f2629abbc3bf148d8addfcfe8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7f18185f2629abbc3bf148d8addfcfe8">_image_resize_internal</a> (string $full_path, string $thumbnail_path)</td></tr>
<tr class="memdesc:a7f18185f2629abbc3bf148d8addfcfe8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Изменяет размер изображения.  <br /></td></tr>
<tr class="separator:a7f18185f2629abbc3bf148d8addfcfe8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b5c40822e7f0dcc8beb47dad2660286" id="r_a2b5c40822e7f0dcc8beb47dad2660286"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2b5c40822e7f0dcc8beb47dad2660286">_no_photo_internal</a> ()</td></tr>
<tr class="memdesc:a2b5c40822e7f0dcc8beb47dad2660286"><td class="mdescLeft">&#160;</td><td class="mdescRight">Возвращает данные для отсутствующего изображения.  <br /></td></tr>
<tr class="separator:a2b5c40822e7f0dcc8beb47dad2660286"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16c229fbb1b62aee5791544bc1086248" id="r_a16c229fbb1b62aee5791544bc1086248"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a16c229fbb1b62aee5791544bc1086248">_remove_directory_internal</a> (string $path)</td></tr>
<tr class="memdesc:a16c229fbb1b62aee5791544bc1086248"><td class="mdescLeft">&#160;</td><td class="mdescRight">Удаляет директорию и её содержимое, предварительно проверяя права доступа.  <br /></td></tr>
<tr class="separator:a16c229fbb1b62aee5791544bc1086248"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a887f702cc34cf74259c6f10365fc6c9b" id="r_a887f702cc34cf74259c6f10365fc6c9b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a887f702cc34cf74259c6f10365fc6c9b">_size_image_internal</a> (string $path_image)</td></tr>
<tr class="memdesc:a887f702cc34cf74259c6f10365fc6c9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Вычисляет размеры для вывода эскиза изображения.  <br /></td></tr>
<tr class="separator:a887f702cc34cf74259c6f10365fc6c9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Закрытые члены</h2></td></tr>
<tr class="memitem:a87a203ec3e8e0964cd9637de5d35d22c" id="r_a87a203ec3e8e0964cd9637de5d35d22c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a87a203ec3e8e0964cd9637de5d35d22c">calculate_thumbnail_size</a> (array $size)</td></tr>
<tr class="memdesc:a87a203ec3e8e0964cd9637de5d35d22c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Расчёт пропорциональных размеров эскиза на основе реальных размеров изображения и конфигурации.  <br /></td></tr>
<tr class="separator:a87a203ec3e8e0964cd9637de5d35d22c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6154fb2649a1052f31514aed4818ad2c" id="r_a6154fb2649a1052f31514aed4818ad2c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6154fb2649a1052f31514aed4818ad2c">process_image_resize_gmagick</a> (array $original_data, array $thumbnail_data)</td></tr>
<tr class="memdesc:a6154fb2649a1052f31514aed4818ad2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Создаёт эскиз изображения с использованием библиотеки GraphicsMagick, включая резервное копирование старого эскиза и восстановление при ошибках.  <br /></td></tr>
<tr class="separator:a6154fb2649a1052f31514aed4818ad2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab09fc88efda540da282034ef94d4ab74" id="r_ab09fc88efda540da282034ef94d4ab74"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab09fc88efda540da282034ef94d4ab74">process_image_resize_imagick</a> (array $original_data, array $thumbnail_data)</td></tr>
<tr class="memdesc:ab09fc88efda540da282034ef94d4ab74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Создаёт эскиз изображения с использованием библиотеки ImageMagick, включая резервное копирование старого эскиза и восстановление при ошибках.  <br /></td></tr>
<tr class="separator:ab09fc88efda540da282034ef94d4ab74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afaedd403d60cd5b36facbf5414e5b6ce" id="r_afaedd403d60cd5b36facbf5414e5b6ce"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afaedd403d60cd5b36facbf5414e5b6ce">process_image_resize_gd</a> (array $original_data, array $thumbnail_data)</td></tr>
<tr class="memdesc:afaedd403d60cd5b36facbf5414e5b6ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Создаёт эскиз изображения с использованием библиотеки GD, включая резервное копирование старого эскиза и восстановление при ошибках.  <br /></td></tr>
<tr class="separator:afaedd403d60cd5b36facbf5414e5b6ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Закрытые данные</h2></td></tr>
<tr class="memitem:a030bd442b445d4a25e28afd6b37accc6" id="r_a030bd442b445d4a25e28afd6b37accc6"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a030bd442b445d4a25e28afd6b37accc6">MAX_IMAGE_WIDTH</a> = 5000</td></tr>
<tr class="memdesc:a030bd442b445d4a25e28afd6b37accc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Максимальная ширина изображения (в пикселях)  <br /></td></tr>
<tr class="separator:a030bd442b445d4a25e28afd6b37accc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09a081b5d674123079734cef551329c9" id="r_a09a081b5d674123079734cef551329c9"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a09a081b5d674123079734cef551329c9">MAX_IMAGE_HEIGHT</a> = 5000</td></tr>
<tr class="memdesc:a09a081b5d674123079734cef551329c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Максимальная высота изображения (в пикселях)  <br /></td></tr>
<tr class="separator:a09a081b5d674123079734cef551329c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab76f8f2ac851632a23ef69df2bd99dad" id="r_ab76f8f2ac851632a23ef69df2bd99dad"><td class="memItemLeft" align="right" valign="top">array&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab76f8f2ac851632a23ef69df2bd99dad">$config</a></td></tr>
<tr class="memdesc:ab76f8f2ac851632a23ef69df2bd99dad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Конфигурация приложения.  <br /></td></tr>
<tr class="separator:ab76f8f2ac851632a23ef69df2bd99dad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Подробное описание</h2>
<div class="textblock"><p>Класс для работы с изображениями. </p>
<p>Этот класс реализует интерфейс <code>Work_Image_Interface</code> и предоставляет функционал для работы с изображениями. Он является дочерним классом для <code><a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html" title="Основной класс приложения.">PhotoRigma\Classes\Work</a></code> и наследует его методы. Все методы данного класса рекомендуется вызывать через родительский класс <code>Work</code>, так как их поведение может быть непредсказуемым при прямом вызове. Основные возможности:</p><ul>
<li>Создание директорий для категорий и копирование файлов <code><a class="el" href="../../de/d20/index_8php.html" title="Точка входа в приложение PhotoRigma.">index.php</a></code>.</li>
<li>Корректировка расширения файла в соответствии с его MIME-типом.</li>
<li>Вывод изображений через HTTP с защитой от MIME-sniffing и кликджекинга.</li>
<li>Изменение размеров изображений (создание эскизов).</li>
<li>Удаление директорий и их содержимого.</li>
<li>Вычисление размеров для вывода эскиза изображения.</li>
<li>Возвращение данных для отсутствующего изображения. Методы класса предназначены для использования в различных частях приложения, таких как обработка изображений, работа с файловой системой и генерация безопасного вывода. </li>
</ul>

<p class="definition">См. определение в файле <a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a> строка <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00115">115</a></p>
</div><h2 class="groupheader">Конструктор(ы)</h2>
<a id="a1538e33cc82d38ead75aba61979dbcf9" name="a1538e33cc82d38ead75aba61979dbcf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1538e33cc82d38ead75aba61979dbcf9">&#9670;&#160;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__construct </td>
          <td>(</td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$config</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Конструктор класса. </p>
<p>Инициализирует объект класса <code>Work_Image</code> с переданной конфигурацией. Этот класс является дочерним для <a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html" title="Основной класс приложения.">PhotoRigma\Classes\Work</a>.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$config</td><td>Конфигурация приложения:<ul>
<li>Должен быть массивом.</li>
<li>Используется для хранения настроек приложения.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Конфигурация должна содержать все необходимые параметры для корректной работы класса. Параметры сохраняются в свойство $this-&gt;config.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Отсутствие необходимых ключей в массиве $config может привести к ошибкам при работе класса. Убедитесь, что конфигурация содержит все требуемые параметры.</dd></dl>
<p>Пример использования конструктора: </p><div class="fragment"><div class="line"><a class="code hl_variable" href="#ab76f8f2ac851632a23ef69df2bd99dad">$config</a> = [</div>
<div class="line">    <span class="stringliteral">&#39;temp_photo_w&#39;</span> =&gt; 800,</div>
<div class="line">    <span class="stringliteral">&#39;temp_photo_h&#39;</span> =&gt; 600,</div>
<div class="line">];</div>
<div class="line">$workImage = new \PhotoRigma\Classes\Work_Image(<a class="code hl_variable" href="#ab76f8f2ac851632a23ef69df2bd99dad">$config</a>);</div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Image_html_ab76f8f2ac851632a23ef69df2bd99dad"><div class="ttname"><a href="#ab76f8f2ac851632a23ef69df2bd99dad">PhotoRigma\Classes\Work_Image\$config</a></div><div class="ttdeci">array $config</div><div class="ttdoc">Конфигурация приложения.</div><div class="ttdef"><b>Определения</b> <a href="../../dd/dbc/Work__Image_8php_source.html#l00120">Work_Image.php:120</a></div></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html" title="Основной класс приложения.">PhotoRigma\Classes\Work</a> Родительский класс, который создаёт объект класса Work_Image. </dd>
<dd>
<a class="el" href="#ab76f8f2ac851632a23ef69df2bd99dad" title="Конфигурация приложения.">PhotoRigma\Classes\Work_Image\$config</a> Свойство, содержащее конфигурацию приложения. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a> строка <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00151">151</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00120">$config</a>.</p>

</div>
</div>
<h2 class="groupheader">Методы</h2>
<a id="a0acd7052f38245fd3723ea29c83bf3f3" name="a0acd7052f38245fd3723ea29c83bf3f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0acd7052f38245fd3723ea29c83bf3f3">&#9670;&#160;</a></span>__get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__get </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$name</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Получает значение приватного свойства. </p>
<p>Этот метод позволяет получить доступ к приватному свойству <code>$config</code>. Алгоритм работы:</p><ol type="1">
<li>Проверяет, соответствует ли имя свойства допустимому значению (<code>config</code>).</li>
<li>Если имя свойства корректно, возвращает значение свойства <code>$config</code>.</li>
<li>Если имя свойства некорректно, выбрасывается исключение. Метод является публичным и предназначен для получения доступа к свойству <code>$config</code>.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$name</td><td>Имя свойства:<ul>
<li>Допустимое значение: 'config'.</li>
<li>Если указано другое имя, выбрасывается исключение. Пример: 'config'. Ограничения: только одно допустимое значение.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>array Значение свойства <code>$config</code>. Пример: <code>php ['temp_photo_w' =&gt; 800] </code></dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Выбрасывается, если запрашиваемое свойство не существует. Пример сообщения: Свойство не существует | Получено: [$name]</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Этот метод предназначен только для доступа к свойству <code>$config</code>. Любые другие запросы будут игнорироваться с выбросом исключения.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Убедитесь, что вы запрашиваете только допустимое свойство:<ul>
<li>'config' Некорректные имена свойств вызовут исключение.</li>
</ul>
</dd></dl>
<p>Пример использования метода: </p><div class="fragment"><div class="line">$workImage = new \PhotoRigma\Classes\Work_Image([<span class="stringliteral">&#39;temp_photo_w&#39;</span> =&gt; 800]);</div>
<div class="line">echo $workImage-&gt;config[<span class="stringliteral">&#39;temp_photo_w&#39;</span>]; <span class="comment">// Выведет: 800</span></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#ab76f8f2ac851632a23ef69df2bd99dad" title="Конфигурация приложения.">PhotoRigma\Classes\Work_Image\$config</a> Свойство, к которому обращается метод. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a> строка <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00199">199</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00120">$config</a>.</p>

</div>
</div>
<a id="a0c45daa80235f514090aa7789f5e93b3" name="a0c45daa80235f514090aa7789f5e93b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c45daa80235f514090aa7789f5e93b3">&#9670;&#160;</a></span>__isset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__isset </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$name</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Проверяет существование недоступного свойства. </p>
<p>Этот метод вызывается автоматически при использовании оператора <code>isset()</code> для проверки существования недоступного свойства. Метод возвращает <code>true</code>, если свойство существует, и <code>false</code> в противном случае.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$name</td><td>Имя свойства:<ul>
<li>Проверяется на существование.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>bool Результат проверки:<ul>
<li><code>true</code>, если свойство существует.</li>
<li><code>false</code>, если свойство не существует.</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Заметки</dt><dd>Этот метод предназначен только для проверки существования свойств.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Если свойство не определено или является недоступным, результат будет <code>false</code>.</dd></dl>
<p>Пример использования метода: </p><div class="fragment"><div class="line">$work_image = new \PhotoRigma\Classes\Work_Image();</div>
<div class="line"><span class="keywordflow">if</span> (isset($work_image-&gt;config)) {</div>
<div class="line">    echo <span class="stringliteral">&quot;Свойство &#39;config&#39; существует.&quot;</span>;</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    echo <span class="stringliteral">&quot;Свойство &#39;config&#39; не существует.&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
<p class="definition">См. определение в файле <a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a> строка <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00291">291</a></p>

</div>
</div>
<a id="a7c8aa5e8f1335dd150232b9ba442d694" name="a7c8aa5e8f1335dd150232b9ba442d694"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c8aa5e8f1335dd150232b9ba442d694">&#9670;&#160;</a></span>__set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__set </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$value</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Устанавливает значение приватного свойства. </p>
<p>Этот метод позволяет изменить значение приватного свойства <code>$config</code>. Алгоритм работы:</p><ol type="1">
<li>Проверяет, соответствует ли имя свойства допустимому значению (<code>config</code>).</li>
<li>Если имя свойства корректно, обновляет значение свойства <code>$config</code>.</li>
<li>Если имя свойства некорректно, выбрасывается исключение. Метод является публичным и предназначен для изменения свойства <code>$config</code>.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$name</td><td>Имя свойства:<ul>
<li>Допустимое значение: 'config'.</li>
<li>Если указано другое имя, выбрасывается исключение. Пример: 'config'. Ограничения: только одно допустимое значение. </li>
</ul>
</td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$value</td><td>Новое значение свойства:<ul>
<li>Должен быть ассоциативным массивом. Пример: &lsquo;['temp_photo_w&rsquo; =&gt; 1024]`.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Выбрасывается, если переданное имя свойства не соответствует <code>$config</code>. Пример сообщения: Свойство не может быть установлено | Получено: [$name]</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Этот метод предназначен только для изменения свойства <code>$config</code>. Любые другие попытки установки значений будут игнорироваться с выбросом исключения.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Убедитесь, что вы устанавливаете значение только для допустимого свойства:<ul>
<li>'config' Некорректные имена свойств вызовут исключение.</li>
</ul>
</dd></dl>
<p>Пример использования метода: </p><div class="fragment"><div class="line">$workImage = new \PhotoRigma\Classes\Work_Image([]);</div>
<div class="line">$workImage-&gt;config = [<span class="stringliteral">&#39;temp_photo_w&#39;</span> =&gt; 1024];</div>
<div class="line">echo $workImage-&gt;config[<span class="stringliteral">&#39;temp_photo_w&#39;</span>]; <span class="comment">// Выведет: 1024</span></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#ab76f8f2ac851632a23ef69df2bd99dad" title="Конфигурация приложения.">PhotoRigma\Classes\Work_Image\$config</a> Свойство, которое изменяет метод. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a> строка <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00250">250</a></p>

</div>
</div>
<a id="ae77f64cb663e7c3c35e7cbcdfd846cf2" name="ae77f64cb663e7c3c35e7cbcdfd846cf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae77f64cb663e7c3c35e7cbcdfd846cf2">&#9670;&#160;</a></span>_create_directory_internal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">_create_directory_internal </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$directory_name</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Создает директории для категории и копирует файлы <code><a class="el" href="../../de/d20/index_8php.html" title="Точка входа в приложение PhotoRigma.">index.php</a></code>, предварительно проверяя права доступа. </p>
<p>Этот защищённый метод выполняет следующие действия:</p><ol type="1">
<li>Формирует пути для директорий галереи и миниатюр с использованием конфигурационных параметров:<ul>
<li><code>site_dir</code>: Базовая директория сайта.</li>
<li><code>gallery_folder</code>: Директория для галереи.</li>
<li><code>thumbnail_folder</code>: Директория для миниатюр.</li>
</ul>
</li>
<li>Проверяет права доступа к родительским директориям с помощью <code>is_writable</code>.</li>
<li>Рекурсивно создаёт директории для галереи и миниатюр с использованием <code>mkdir</code>.</li>
<li>Проверяет существование исходных файлов <code><a class="el" href="../../de/d20/index_8php.html" title="Точка входа в приложение PhotoRigma.">index.php</a></code> в директориях галереи и миниатюр.</li>
<li>Копирует и модифицирует файлы <code><a class="el" href="../../de/d20/index_8php.html" title="Точка входа в приложение PhotoRigma.">index.php</a></code> для новой директории галереи и миниатюр:<ul>
<li>Читает содержимое исходных файлов с помощью <code>file_get_contents</code>.</li>
<li>Модифицирует содержимое с помощью <code>strtr</code>.</li>
<li>Записывает изменённые файлы в новые директории с использованием <code>file_put_contents</code>. Метод вызывается через публичный метод-редирект <code><a class="el" href="#a935337e705b7a1b9ea422d2e04932109" title="Создаёт директории для категории и копирует файлы index.php через вызов внутреннего метода.">PhotoRigma\Classes\Work_Image\create_directory()</a></code> и предназначен для использования внутри класса или его наследников.</li>
</ul>
</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$directory_name</td><td>Имя директории. Должен быть строкой, содержащей только допустимые символы для имён директорий. Не должен содержать запрещённых символов (например, <code>\/:*?"&lt;&gt;|&lt;/tt&gt;).

@return bool Возвращает &lt;tt&gt;true&lt;/tt&gt;, если директории успешно созданы и файлы скопированы.

@throws RuntimeException Выбрасывается исключение в следующих случаях:
                          - Если родительская директория недоступна для записи.
                          - Если не удалось создать директории.
                          - Если исходные файлы &lt;tt&gt;index.php&lt;/tt&gt; не существуют.
                          - Если не удалось прочитать или записать файлы &lt;tt&gt;index.php&lt;/tt&gt;.

@warning Используйте этот метод с осторожностью, так как он создаёт директории и изменяет файлы.

Пример вызова метода внутри класса или наследника:
@code 
// Создание директорий для новой категории
$directoryName = 'new_category';
$result = $this-&gt;_create_directory_internal($directoryName);
if ($result) {
    echo "Директории успешно созданы!"; }  </code></td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>См. также</dt><dd><code> <a class="el" href="#a935337e705b7a1b9ea422d2e04932109" title="Создаёт директории для категории и копирует файлы index.php через вызов внутреннего метода.">PhotoRigma\Classes\Work_Image\create_directory()</a> Публичный метод-редирект для вызова этой логики. </code></dd>
<dd>
<code> <a class="el" href="#ab76f8f2ac851632a23ef69df2bd99dad" title="Конфигурация приложения.">PhotoRigma\Classes\Work_Image\$config</a> Конфигурационные параметры, используемые для формирования путей. </code></dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a> строка <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00389">389</a></p>

<p class="reference">Используется в <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00336">create_directory()</a>.</p>
<div id="dynsection-2" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_ae77f64cb663e7c3c35e7cbcdfd846cf2_icgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_ae77f64cb663e7c3c35e7cbcdfd846cf2_icgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_ae77f64cb663e7c3c35e7cbcdfd846cf2_icgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_ae77f64cb663e7c3c35e7cbcdfd846cf2_icgraph">
<area shape="rect" title="Создает директории для категории и копирует файлы index.php, предварительно проверяя права доступа." alt="" coords="167,5,336,30"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a935337e705b7a1b9ea422d2e04932109" title="Создаёт директории для категории и копирует файлы index.php через вызов внутреннего метода." alt="" coords="5,5,119,30"/>
<area shape="poly" title=" " alt="" coords="151,20,119,20,119,15,151,15"/>
</map>
</div>

</div>
</div>
<a id="af7cd1deb24cdf852e9981eb4f2665ff1" name="af7cd1deb24cdf852e9981eb4f2665ff1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7cd1deb24cdf852e9981eb4f2665ff1">&#9670;&#160;</a></span>_fix_file_extension_internal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">_fix_file_extension_internal </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$full_path</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Корректировка расширения файла в соответствии с его MIME-типом (защищённый метод). </p>
<p>Этот защищённый метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет путь к файлу на соответствие регулярному выражению <code>/^[a-zA-Z0-9\/\.\-_]+$/</code>.</li>
<li>Нормализует путь с помощью <code>realpath()</code> и проверяет, существует ли файл и доступен ли он для чтения.</li>
<li>Определяет реальный MIME-тип файла с помощью <code>finfo_open(FILEINFO_MIME_TYPE)</code>.</li>
<li>Проверяет соответствие MIME-типа поддерживаемым форматам:<ul>
<li>'image/jpeg' -&gt; 'jpg'</li>
<li>'image/png' -&gt; 'png'</li>
<li>'image/gif' -&gt; 'gif'</li>
<li>'image/webp' -&gt; 'webp'</li>
<li>'image/tiff' -&gt; 'tiff'</li>
<li>'image/svg+xml' -&gt; 'svg'</li>
<li>'image/bmp' -&gt; 'bmp'</li>
<li>'image/x-icon' -&gt; 'ico'</li>
<li>'image/avif' -&gt; 'avif'</li>
<li>'image/heic' -&gt; 'heic'</li>
<li>'image/vnd.adobe.photoshop' -&gt; 'psd'</li>
<li>'image/x-canon-cr2' -&gt; 'cr2'</li>
<li>'image/x-nikon-nef' -&gt; 'nef'</li>
<li>'image/x-xbitmap' -&gt; 'xbm'</li>
<li>'image/x-portable-anymap' -&gt; 'pnm'</li>
<li>'image/x-pcx' -&gt; 'pcx'</li>
</ul>
</li>
<li>Если расширение отсутствует, добавляет его. Если расширение некорректное, заменяет его на правильное.</li>
<li>Логирует случаи добавления или исправления расширения через <code>log_in_file</code>. Метод вызывается через публичный метод <code>fix_file_extension()</code> и предназначен для использования внутри класса или его наследников.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$full_path</td><td>Полный путь к файлу. Путь должен быть абсолютным, соответствовать регулярному выражению <code>/^[a-zA-Z0-9\/\.\-_]+$/</code>, и файл должен существовать и быть доступным для чтения.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>string Полный путь к файлу с правильным расширением. Если расширение было изменено или добавлено, возвращается новый путь. Если расширение уже корректное, возвращается исходный путь.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>В следующих случаях:<ul>
<li>Если путь к файлу имеет недопустимый формат.</li>
<li>Если файл не существует или недоступен. </li>
</ul>
</td></tr>
    <tr><td class="paramname">RuntimeException</td><td>В следующих случаях:<ul>
<li>Если MIME-тип файла не поддерживается.</li>
<li>Если файл недоступен для чтения. </li>
</ul>
</td></tr>
    <tr><td class="paramname">Exception</td><td>При возникновении ошибок логирования информации через <code>log_in_file</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод завершает выполнение с ошибкой, если MIME-тип файла не поддерживается. Убедитесь, что файл существует и доступен для чтения перед вызовом метода.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Корректировка расширения файла</span></div>
<div class="line">$full_path = <span class="stringliteral">&#39;/path/to/file_without_extension&#39;</span>;</div>
<div class="line">$corrected_path = $this-&gt;<a class="code hl_function" href="#af7cd1deb24cdf852e9981eb4f2665ff1">_fix_file_extension_internal</a>($full_path);</div>
<div class="line">echo <span class="stringliteral">&quot;Исправленный путь: {$corrected_path}&quot;</span>;</div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Image_html_af7cd1deb24cdf852e9981eb4f2665ff1"><div class="ttname"><a href="#af7cd1deb24cdf852e9981eb4f2665ff1">PhotoRigma\Classes\Work_Image\_fix_file_extension_internal</a></div><div class="ttdeci">_fix_file_extension_internal(string $full_path)</div><div class="ttdoc">Корректировка расширения файла в соответствии с его MIME-типом (защищённый метод).</div><div class="ttdef"><b>Определения</b> <a href="../../dd/dbc/Work__Image_8php_source.html#l00598">Work_Image.php:598</a></div></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#a89d4e7cb491d0c91282d16ff5abe3138" title="Корректирует расширение файла в соответствии с его MIME-типом через вызов внутреннего метода.">PhotoRigma\Classes\Work_Image\fix_file_extension()</a> Публичный метод, вызывающий этот защищённый метод. </dd>
<dd>
<a class="el" href="../../db/d02/namespacePhotoRigma_1_1Include.html#a2d74c46a21e4ce612a98eee60981aef0" title="Записывает сообщение об ошибке в лог-файл и, при необходимости, завершает выполнение скрипта.">PhotoRigma\Include\log_in_file()</a> Функция для логирования ошибок. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a> строка <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00598">598</a></p>

<p class="reference">Используется в <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00529">fix_file_extension()</a>.</p>
<div id="dynsection-3" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_af7cd1deb24cdf852e9981eb4f2665ff1_icgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_af7cd1deb24cdf852e9981eb4f2665ff1_icgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_af7cd1deb24cdf852e9981eb4f2665ff1_icgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_af7cd1deb24cdf852e9981eb4f2665ff1_icgraph">
<area shape="rect" title="Корректировка расширения файла в соответствии с его MIME&#45;типом (защищённый метод)." alt="" coords="172,5,297,44"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a89d4e7cb491d0c91282d16ff5abe3138" title="Корректирует расширение файла в соответствии с его MIME&#45;типом через вызов внутреннего метода." alt="" coords="5,12,124,37"/>
<area shape="poly" title=" " alt="" coords="156,27,124,27,124,22,156,22"/>
</map>
</div>

</div>
</div>
<a id="a7f18185f2629abbc3bf148d8addfcfe8" name="a7f18185f2629abbc3bf148d8addfcfe8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f18185f2629abbc3bf148d8addfcfe8">&#9670;&#160;</a></span>_image_resize_internal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">_image_resize_internal </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$full_path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$thumbnail_path</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Изменяет размер изображения. </p>
<p>Этот защищённый метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет корректность путей к исходному изображению и файлу эскиза с помощью <code>realpath()</code> и регулярного выражения <code>/^[a-zA-Z0-9\/\.\-_]+$/</code>.</li>
<li>Проверяет существование и доступность исходного изображения для чтения (<code>file_exists</code>, <code>is_readable</code>).</li>
<li>Проверяет доступность директории для сохранения эскиза для записи (<code>is_writable</code>).</li>
<li>Получает размеры исходного изображения с помощью <code>getimagesize()</code> и проверяет их на соответствие максимальным значениям, заданным константами класса:<ul>
<li><code>MAX_IMAGE_WIDTH</code>: Максимальная ширина исходного изображения (в пикселях).</li>
<li><code>MAX_IMAGE_HEIGHT</code>: Максимальная высота исходного изображения (в пикселях).</li>
</ul>
</li>
<li>Рассчитывает размеры эскиза с помощью метода <code>calculate_thumbnail_size</code> на основе конфигурации (<code>temp_photo_w</code>, <code>temp_photo_h</code>).</li>
<li>Если файл эскиза уже существует и его размеры совпадают с расчётными, метод завершает работу.</li>
<li>Определяет MIME-тип исходного изображения с помощью <code>finfo_open(FILEINFO_MIME_TYPE)</code>.</li>
<li>Выбирает библиотеку для обработки изображения в следующем порядке приоритета:<ul>
<li>GraphicsMagick (если доступен),</li>
<li>ImageMagick (если доступен),</li>
<li>GD (если предыдущие библиотеки недоступны или вызвали ошибку).</li>
</ul>
</li>
<li>Логирует все ошибки через <code>log_in_file</code>. Метод вызывается через публичный метод <code>image_resize()</code> и предназначен для использования внутри класса или его наследников.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$full_path</td><td>Путь к исходному изображению. Путь должен быть абсолютным, соответствовать регулярному выражению <code>/^[a-zA-Z0-9\/\.\-_]+$/</code>, и файл должен существовать и быть доступным для чтения. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$thumbnail_path</td><td>Путь для сохранения эскиза. Путь должен быть абсолютным, и директория должна быть доступна для записи.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>bool True, если операция выполнена успешно, иначе False.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Если пути к файлам некорректны или имеют недопустимый формат. </td></tr>
    <tr><td class="paramname">RuntimeException</td><td>Если возникли ошибки при проверке файлов, директорий или размеров изображения. </td></tr>
    <tr><td class="paramname">Exception</td><td>При возникновении ошибок логирования информации через <code>log_in_file</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Метод использует следующие константы класса для ограничения размеров исходного изображения:<ul>
<li><code>MAX_IMAGE_WIDTH</code>: Максимальная ширина исходного изображения (в пикселях). Значение: 5000.</li>
<li><code>MAX_IMAGE_HEIGHT</code>: Максимальная высота исходного изображения (в пикселях). Значение: 5000. Эти константы являются приватными и доступны только внутри класса.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод зависит от корректности данных в конфигурации (<code>temp_photo_w</code>, <code>temp_photo_h</code>). Если эти параметры некорректны, результат может быть непредсказуемым. Убедитесь, что пути к файлам и директориям корректны перед вызовом метода.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Изменение размера изображения</span></div>
<div class="line">$full_path = <span class="stringliteral">&#39;/path/to/source_image.jpg&#39;</span>;</div>
<div class="line">$thumbnail_path = <span class="stringliteral">&#39;/path/to/thumbnail.jpg&#39;</span>;</div>
<div class="line">$success = $this-&gt;<a class="code hl_function" href="#a7f18185f2629abbc3bf148d8addfcfe8">_image_resize_internal</a>($full_path, $thumbnail_path);</div>
<div class="line"><span class="keywordflow">if</span> ($success) {</div>
<div class="line">    echo <span class="stringliteral">&quot;Эскиз успешно создан.&quot;</span>;</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    echo <span class="stringliteral">&quot;Ошибка при создании эскиза.&quot;</span>;</div>
<div class="line">}</div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Image_html_a7f18185f2629abbc3bf148d8addfcfe8"><div class="ttname"><a href="#a7f18185f2629abbc3bf148d8addfcfe8">PhotoRigma\Classes\Work_Image\_image_resize_internal</a></div><div class="ttdeci">_image_resize_internal(string $full_path, string $thumbnail_path)</div><div class="ttdoc">Изменяет размер изображения.</div><div class="ttdef"><b>Определения</b> <a href="../../dd/dbc/Work__Image_8php_source.html#l00968">Work_Image.php:968</a></div></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#af37eb2b0693905dd71dd677f86d47831" title="Изменяет размер изображения через вызов внутреннего метода.">PhotoRigma\Classes\Work_Image\image_resize()</a> Публичный метод, вызывающий этот защищённый метод. </dd>
<dd>
<a class="el" href="#a87a203ec3e8e0964cd9637de5d35d22c" title="Расчёт пропорциональных размеров эскиза на основе реальных размеров изображения и конфигурации.">PhotoRigma\Classes\Work_Image\calculate_thumbnail_size()</a> Метод для расчёта размеров эскиза. </dd>
<dd>
<a class="el" href="#a6154fb2649a1052f31514aed4818ad2c" title="Создаёт эскиз изображения с использованием библиотеки GraphicsMagick, включая резервное копирование с...">PhotoRigma\Classes\Work_Image\process_image_resize_gmagick()</a> Обработка через GraphicsMagick. </dd>
<dd>
<a class="el" href="#ab09fc88efda540da282034ef94d4ab74" title="Создаёт эскиз изображения с использованием библиотеки ImageMagick, включая резервное копирование стар...">PhotoRigma\Classes\Work_Image\process_image_resize_imagick()</a> Обработка через ImageMagick. </dd>
<dd>
<a class="el" href="#afaedd403d60cd5b36facbf5414e5b6ce" title="Создаёт эскиз изображения с использованием библиотеки GD, включая резервное копирование старого эскиз...">PhotoRigma\Classes\Work_Image\process_image_resize_gd()</a> Обработка через GD. </dd>
<dd>
<a class="el" href="../../db/d02/namespacePhotoRigma_1_1Include.html#a2d74c46a21e4ce612a98eee60981aef0" title="Записывает сообщение об ошибке в лог-файл и, при необходимости, завершает выполнение скрипта.">PhotoRigma\Include\log_in_file()</a> Функция для логирования ошибок. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a> строка <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00968">968</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00790">$mime_type</a>, <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l01136">calculate_thumbnail_size()</a>, <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l01618">process_image_resize_gd()</a>, <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l01266">process_image_resize_gmagick()</a> и <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l01437">process_image_resize_imagick()</a>.</p>

<p class="reference">Используется в <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00889">image_resize()</a>.</p>
<div id="dynsection-4" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a7f18185f2629abbc3bf148d8addfcfe8_cgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a7f18185f2629abbc3bf148d8addfcfe8_cgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a7f18185f2629abbc3bf148d8addfcfe8_cgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a7f18185f2629abbc3bf148d8addfcfe8_cgraph">
<area shape="rect" title="Изменяет размер изображения." alt="" coords="5,83,159,107"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a87a203ec3e8e0964cd9637de5d35d22c" title="Расчёт пропорциональных размеров эскиза на основе реальных размеров изображения и конфигурации." alt="" coords="209,5,376,30"/>
<area shape="poly" title=" " alt="" coords="110,80,206,41,230,32,231,38,208,45,112,85"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#afaedd403d60cd5b36facbf5414e5b6ce" title="Создаёт эскиз изображения с использованием библиотеки GD, включая резервное копирование старого эскиз..." alt="" coords="207,55,378,79"/>
<area shape="poly" title=" " alt="" coords="159,82,191,78,191,83,159,87"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a6154fb2649a1052f31514aed4818ad2c" title="Создаёт эскиз изображения с использованием библиотеки GraphicsMagick, включая резервное копирование с..." alt="" coords="217,104,368,142"/>
<area shape="poly" title=" " alt="" coords="159,103,202,108,201,114,159,108"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#ab09fc88efda540da282034ef94d4ab74" title="Создаёт эскиз изображения с использованием библиотеки ImageMagick, включая резервное копирование стар..." alt="" coords="217,166,368,205"/>
<area shape="poly" title=" " alt="" coords="110,106,208,151,224,158,221,163,206,156,108,110"/>
</map>
</div>
<div id="dynsection-5" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a7f18185f2629abbc3bf148d8addfcfe8_icgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a7f18185f2629abbc3bf148d8addfcfe8_icgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a7f18185f2629abbc3bf148d8addfcfe8_icgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a7f18185f2629abbc3bf148d8addfcfe8_icgraph">
<area shape="rect" title="Изменяет размер изображения." alt="" coords="151,5,304,30"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#af37eb2b0693905dd71dd677f86d47831" title="Изменяет размер изображения через вызов внутреннего метода." alt="" coords="5,5,103,30"/>
<area shape="poly" title=" " alt="" coords="135,20,103,20,103,15,135,15"/>
</map>
</div>

</div>
</div>
<a id="a2b5c40822e7f0dcc8beb47dad2660286" name="a2b5c40822e7f0dcc8beb47dad2660286"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b5c40822e7f0dcc8beb47dad2660286">&#9670;&#160;</a></span>_no_photo_internal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">_no_photo_internal </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Возвращает данные для отсутствующего изображения. </p>
<p>Этот защищённый метод формирует массив данных, который используется для представления информации об отсутствующем изображении. Это может быть полезно, например, если изображение не найдено или недоступно. Метод использует конфигурацию приложения для формирования URL-адресов и путей:</p><ul>
<li><code>site_url</code>: Базовый URL сайта.</li>
<li><code>site_dir</code>: Базовая директория сайта.</li>
<li><code>gallery_folder</code>: Директория для хранения изображений.</li>
<li><code>thumbnail_folder</code>: Директория для хранения эскизов. Массив содержит предопределённые значения для всех ключей, таких как &lsquo;'url&rsquo;<code>,</code>'thumbnail_url'<code>, </code>'name'<code>, </code>'description'<code>и другие. Значения по умолчанию используются для отсутствующих данных. Этот метод является защищённым и предназначен для использования внутри класса или его наследников. Основная логика метода вызывается через публичный метод</code>no_photo()`.</li>
</ul>
<dl class="section return"><dt>Возвращает</dt><dd>array Массив данных об изображении или его отсутствии:<ul>
<li>&lsquo;'url&rsquo;<code>(string): URL полноразмерного изображения. -</code>'thumbnail_url'<code>(string): URL эскиза изображения. -</code>'name'<code>(string): Название изображения. Значение по умолчанию:</code>'No photo'<code>. -</code>'description'<code>(string): Описание изображения. Значение по умолчанию:</code>'No photo available'<code>. -</code>'category_name'<code>(string): Название категории. Значение по умолчанию:</code>'No category'<code>. -</code>'category_description'<code>(string): Описание категории. Значение по умолчанию:</code>'No category available'<code>. -</code>'rate'<code>(string): Рейтинг изображения. Значение по умолчанию:</code>'Rate: 0/0'<code>. -</code>'url_user'<code>(string): URL пользователя. Значение по умолчанию: пустая строка (</code>''<code>). -</code>'real_name'<code>(string): Имя пользователя. Значение по умолчанию:</code>'No user'<code>. -</code>'full_path'<code>(string): Полный путь к изображению. Формируется на основе конфигурации. -</code>'thumbnail_path'<code>(string): Полный путь к эскизу. Формируется на основе конфигурации. -</code>'file'<code>(string): Имя файла. Значение по умолчанию:</code>'no_foto.png'`.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод зависит от корректности данных в конфигурации (<code>site_url</code>, <code>site_dir</code>, <code>gallery_folder</code>, <code>thumbnail_folder</code>). Если эти параметры некорректны, результат может быть непредсказуемым.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Вызов защищённого метода внутри класса или наследника</span></div>
<div class="line">$noPhotoData = $this-&gt;<a class="code hl_function" href="#a2b5c40822e7f0dcc8beb47dad2660286">_no_photo_internal</a>();</div>
<div class="line">echo <span class="stringliteral">&quot;URL изображения: {$noPhotoData[&#39;url&#39;]}\n&quot;</span>;</div>
<div class="line">echo <span class="stringliteral">&quot;Описание: {$noPhotoData[&#39;description&#39;]}\n&quot;</span>;</div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Image_html_a2b5c40822e7f0dcc8beb47dad2660286"><div class="ttname"><a href="#a2b5c40822e7f0dcc8beb47dad2660286">PhotoRigma\Classes\Work_Image\_no_photo_internal</a></div><div class="ttdeci">_no_photo_internal()</div><div class="ttdoc">Возвращает данные для отсутствующего изображения.</div><div class="ttdef"><b>Определения</b> <a href="../../dd/dbc/Work__Image_8php_source.html#l01864">Work_Image.php:1864</a></div></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#ab76f8f2ac851632a23ef69df2bd99dad" title="Конфигурация приложения.">PhotoRigma\Classes\Work_Image\$config</a> Свойство конфигурации проекта в классе. </dd>
<dd>
<a class="el" href="#adfcd1cb7963a860013ca9ca1898f54f1" title="Возвращает данные для отсутствующего изображения через вызов внутреннего метода.">PhotoRigma\Classes\Work_Image\no_photo()</a> Публичный метод, вызывающий этот защищённый метод. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a> строка <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l01864">1864</a></p>

<p class="reference">Используется в <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l01811">no_photo()</a>.</p>
<div id="dynsection-6" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a2b5c40822e7f0dcc8beb47dad2660286_icgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a2b5c40822e7f0dcc8beb47dad2660286_icgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a2b5c40822e7f0dcc8beb47dad2660286_icgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a2b5c40822e7f0dcc8beb47dad2660286_icgraph">
<area shape="rect" title="Возвращает данные для отсутствующего изображения." alt="" coords="128,5,258,30"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#adfcd1cb7963a860013ca9ca1898f54f1" title="Возвращает данные для отсутствующего изображения через вызов внутреннего метода." alt="" coords="5,5,80,30"/>
<area shape="poly" title=" " alt="" coords="112,20,80,20,80,15,112,15"/>
</map>
</div>

</div>
</div>
<a id="a16c229fbb1b62aee5791544bc1086248" name="a16c229fbb1b62aee5791544bc1086248"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16c229fbb1b62aee5791544bc1086248">&#9670;&#160;</a></span>_remove_directory_internal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">_remove_directory_internal </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$path</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Удаляет директорию и её содержимое, предварительно проверяя права доступа. </p>
<p>Этот защищённый метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет существование указанной директории с помощью <code>is_dir</code>.</li>
<li>Проверяет права доступа к директории (должна быть доступна для записи) с помощью <code>is_writable</code>.</li>
<li>Рекурсивно удаляет все файлы внутри директории:<ul>
<li>Получает список файлов с помощью <code>glob</code>.</li>
<li>Удаляет каждый файл с помощью <code>unlink</code>.</li>
</ul>
</li>
<li>Удаляет саму директорию с помощью <code>rmdir</code>. Метод вызывается через публичный метод-редирект <code><a class="el" href="#aaaf358ddc8223e4a5a479f645fc43da8" title="Удаляет директорию и её содержимое через вызов внутреннего метода.">PhotoRigma\Classes\Work_Image\remove_directory()</a></code> и предназначен для использования внутри класса или его наследников.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$path</td><td>Путь к директории. Должен быть строкой, указывающей на существующую директорию. Директория должна быть доступна для записи.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>bool Возвращает <code>true</code>, если директория успешно удалена.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">RuntimeException</td><td>Выбрасывается исключение в следующих случаях:<ul>
<li>Если директория не существует.</li>
<li>Если директория недоступна для записи.</li>
<li>Если не удалось удалить файл внутри директории.</li>
<li>Если не удалось удалить саму директорию.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Метод рекурсивно удаляет все файлы внутри директории.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Используйте этот метод с осторожностью, так как удаление директории необратимо. Убедитесь, что переданная директория действительно должна быть удалена.</dd></dl>
<p>Пример вызова метода внутри класса или наследника: </p><div class="fragment"><div class="line"><span class="comment">// Удаление директории</span></div>
<div class="line">$path = <span class="stringliteral">&#39;/path/to/directory&#39;</span>;</div>
<div class="line">$result = $this-&gt;<a class="code hl_function" href="#a16c229fbb1b62aee5791544bc1086248">_remove_directory_internal</a>($path);</div>
<div class="line"><span class="keywordflow">if</span> ($result) {</div>
<div class="line">    echo <span class="stringliteral">&quot;Директория успешно удалена!&quot;</span>;</div>
<div class="line">}</div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Image_html_a16c229fbb1b62aee5791544bc1086248"><div class="ttname"><a href="#a16c229fbb1b62aee5791544bc1086248">PhotoRigma\Classes\Work_Image\_remove_directory_internal</a></div><div class="ttdeci">_remove_directory_internal(string $path)</div><div class="ttdoc">Удаляет директорию и её содержимое, предварительно проверяя права доступа.</div><div class="ttdef"><b>Определения</b> <a href="../../dd/dbc/Work__Image_8php_source.html#l01976">Work_Image.php:1976</a></div></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#aaaf358ddc8223e4a5a479f645fc43da8" title="Удаляет директорию и её содержимое через вызов внутреннего метода.">PhotoRigma\Classes\Work_Image\remove_directory()</a> Публичный метод-редирект для вызова этой логики. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a> строка <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l01976">1976</a></p>

<p class="reference">Используется в <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l01927">remove_directory()</a>.</p>
<div id="dynsection-7" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a16c229fbb1b62aee5791544bc1086248_icgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a16c229fbb1b62aee5791544bc1086248_icgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a16c229fbb1b62aee5791544bc1086248_icgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a16c229fbb1b62aee5791544bc1086248_icgraph">
<area shape="rect" title="Удаляет директорию и её содержимое, предварительно проверяя права доступа." alt="" coords="174,5,350,30"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#aaaf358ddc8223e4a5a479f645fc43da8" title="Удаляет директорию и её содержимое через вызов внутреннего метода." alt="" coords="5,5,126,30"/>
<area shape="poly" title=" " alt="" coords="158,20,126,20,126,15,158,15"/>
</map>
</div>

</div>
</div>
<a id="a887f702cc34cf74259c6f10365fc6c9b" name="a887f702cc34cf74259c6f10365fc6c9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a887f702cc34cf74259c6f10365fc6c9b">&#9670;&#160;</a></span>_size_image_internal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">_size_image_internal </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$path_image</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Вычисляет размеры для вывода эскиза изображения. </p>
<p>Этот защищённый метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет существование файла с помощью <code>file_exists</code>.</li>
<li>Получает реальные размеры изображения с помощью <code>getimagesize</code>.</li>
<li>Вычисляет ширину и высоту эскиза на основе реальных размеров изображения и конфигурационных параметров:<ul>
<li><code>temp_photo_w</code>: Целевая ширина эскиза (в пикселях).</li>
<li><code>temp_photo_h</code>: Целевая высота эскиза (в пикселях).</li>
</ul>
</li>
<li>Если изображение меньше целевого размера, возвращаются оригинальные размеры.</li>
<li>В противном случае размеры масштабируются пропорционально. Расчёт размеров выполняется с использованием метода <code>calculate_thumbnail_size</code>. Этот метод является защищённым и предназначен для использования внутри класса или его наследников. Основная логика метода вызывается через публичный метод <code>size_image()</code>.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$path_image</td><td>Путь к файлу изображения. Путь должен быть абсолютным, и файл должен существовать и быть доступным для чтения.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>array Массив с шириной и высотой эскиза:<ul>
<li>Ключ &lsquo;'width&rsquo;<code>(int): Ширина эскиза (целое число ≥ 0).</code></li>
<li><code>Ключ</code>'height'` (int): Высота эскиза (целое число ≥ 0). Размеры могут совпадать с оригинальными размерами изображения, если оно меньше целевого размера.</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">RuntimeException</td><td>Выбрасывается исключение в следующих случаях:<ul>
<li>Если файл не существует.</li>
<li>Если не удалось получить размеры изображения.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод зависит от корректности данных в конфигурации (<code>temp_photo_w</code> и <code>temp_photo_h</code>). Если эти параметры некорректны, результат может быть непредсказуемым.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Вычисление размеров эскиза для изображения</span></div>
<div class="line">$path = <span class="stringliteral">&#39;/path/to/image.jpg&#39;</span>;</div>
<div class="line">$sizes = $this-&gt;<a class="code hl_function" href="#a887f702cc34cf74259c6f10365fc6c9b">_size_image_internal</a>($path);</div>
<div class="line">echo <span class="stringliteral">&quot;Ширина: {$sizes[&#39;width&#39;]}, Высота: {$sizes[&#39;height&#39;]}&quot;</span>;</div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Image_html_a887f702cc34cf74259c6f10365fc6c9b"><div class="ttname"><a href="#a887f702cc34cf74259c6f10365fc6c9b">PhotoRigma\Classes\Work_Image\_size_image_internal</a></div><div class="ttdeci">_size_image_internal(string $path_image)</div><div class="ttdoc">Вычисляет размеры для вывода эскиза изображения.</div><div class="ttdef"><b>Определения</b> <a href="../../dd/dbc/Work__Image_8php_source.html#l02104">Work_Image.php:2104</a></div></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#a87a203ec3e8e0964cd9637de5d35d22c" title="Расчёт пропорциональных размеров эскиза на основе реальных размеров изображения и конфигурации.">PhotoRigma\Classes\Work_Image\calculate_thumbnail_size()</a> Метод, используемый для расчёта размера эскиза. </dd>
<dd>
<a class="el" href="#a096b7e5c3f9fb908fbb30e1adc2ac61b" title="Вычисляет размеры для вывода эскиза изображения через вызов внутреннего метода.">PhotoRigma\Classes\Work_Image\size_image()</a> Публичный метод-редирект для вызова этой логики. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a> строка <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l02104">2104</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l01136">calculate_thumbnail_size()</a>.</p>

<p class="reference">Используется в <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l02052">size_image()</a>.</p>
<div id="dynsection-8" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a887f702cc34cf74259c6f10365fc6c9b_cgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a887f702cc34cf74259c6f10365fc6c9b_cgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a887f702cc34cf74259c6f10365fc6c9b_cgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a887f702cc34cf74259c6f10365fc6c9b_cgraph">
<area shape="rect" title="Вычисляет размеры для вывода эскиза изображения." alt="" coords="5,5,148,30"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a87a203ec3e8e0964cd9637de5d35d22c" title="Расчёт пропорциональных размеров эскиза на основе реальных размеров изображения и конфигурации." alt="" coords="196,5,362,30"/>
<area shape="poly" title=" " alt="" coords="148,15,180,15,180,20,148,20"/>
</map>
</div>
<div id="dynsection-9" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a887f702cc34cf74259c6f10365fc6c9b_icgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a887f702cc34cf74259c6f10365fc6c9b_icgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a887f702cc34cf74259c6f10365fc6c9b_icgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a887f702cc34cf74259c6f10365fc6c9b_icgraph">
<area shape="rect" title="Вычисляет размеры для вывода эскиза изображения." alt="" coords="140,5,282,30"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a096b7e5c3f9fb908fbb30e1adc2ac61b" title="Вычисляет размеры для вывода эскиза изображения через вызов внутреннего метода." alt="" coords="5,5,92,30"/>
<area shape="poly" title=" " alt="" coords="124,20,92,20,92,15,124,15"/>
</map>
</div>

</div>
</div>
<a id="a87a203ec3e8e0964cd9637de5d35d22c" name="a87a203ec3e8e0964cd9637de5d35d22c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87a203ec3e8e0964cd9637de5d35d22c">&#9670;&#160;</a></span>calculate_thumbnail_size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">calculate_thumbnail_size </td>
          <td>(</td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$size</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Расчёт пропорциональных размеров эскиза на основе реальных размеров изображения и конфигурации. </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет входной массив <code>$size</code>, содержащий реальные размеры изображения:<ul>
<li>Ширина и высота должны быть положительными целыми числами.</li>
</ul>
</li>
<li>Проверяет конфигурацию (<code>temp_photo_w</code> и <code>temp_photo_h</code>):<ul>
<li>Значения должны быть числами ≥ 0.</li>
</ul>
</li>
<li>Вычисляет коэффициенты масштабирования через оператор <code>match</code>:<ul>
<li>Коэффициенты рассчитываются на основе реальных размеров и целевых размеров.</li>
</ul>
</li>
<li>Сохраняет пропорции изображения при масштабировании:<ul>
<li>Если исходное изображение меньше целевого размера, возвращаются оригинальные размеры.</li>
<li>Иначе изображение масштабируется пропорционально до целевого размера. Этот метод является приватным и предназначен только для использования внутри класса.</li>
</ul>
</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$size</td><td>Массив с реальными размерами изображения.<ul>
<li>Индекс 0: int — Ширина изображения (должна быть положительным целым числом).</li>
<li>Индекс 1: int — Высота изображения (должна быть положительным целым числом).</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>array Массив с шириной и высотой эскиза.<ul>
<li>Ключ 'width': int — Ширина эскиза (целое число ≥ 0).</li>
<li>Ключ 'height': int — Высота эскиза (целое число ≥ 0).</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Если массив <code>$size</code> не содержит двух положительных целых чисел. Пример сообщения: <pre class="fragment">Некорректные размеры изображения.
Требуется массив с двумя положительными целыми числами.
Получено: width = 0, height = undefined
</pre></td></tr>
    <tr><td class="paramname">RuntimeException</td><td>Если значения <code>temp_photo_w</code> или <code>temp_photo_h</code> в конфигурации некорректны. Пример сообщения: <pre class="fragment">Некорректная конфигурация temp_photo_w или temp_photo_h
Значения должны быть числами ≥ 0.
Получено: temp_photo_w = -100, temp_photo_h = undefined
</pre></td></tr>
  </table>
  </dd>
</dl>
<p>Пример вызова метода внутри класса: </p><div class="fragment"><div class="line"><span class="comment">// Исходные размеры изображения</span></div>
<div class="line">$originalSize = [1920, 1080];</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Конфигурация приложения</span></div>
<div class="line">$this-&gt;config[<span class="stringliteral">&#39;temp_photo_w&#39;</span>] = 800;</div>
<div class="line">$this-&gt;config[<span class="stringliteral">&#39;temp_photo_h&#39;</span>] = 600;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Вычисление размеров эскиза</span></div>
<div class="line">$thumbnailSize = $this-&gt;<a class="code hl_function" href="#a87a203ec3e8e0964cd9637de5d35d22c">calculate_thumbnail_size</a>($originalSize);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Результат</span></div>
<div class="line">echo <span class="stringliteral">&quot;Ширина эскиза: {$thumbnailSize[&#39;width&#39;]}, Высота эскиза: {$thumbnailSize[&#39;height&#39;]}&quot;</span>;</div>
<div class="line"><span class="comment">// Вывод: Ширина эскиза: 800, Высота эскиза: 450</span></div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Image_html_a87a203ec3e8e0964cd9637de5d35d22c"><div class="ttname"><a href="#a87a203ec3e8e0964cd9637de5d35d22c">PhotoRigma\Classes\Work_Image\calculate_thumbnail_size</a></div><div class="ttdeci">calculate_thumbnail_size(array $size)</div><div class="ttdoc">Расчёт пропорциональных размеров эскиза на основе реальных размеров изображения и конфигурации.</div><div class="ttdef"><b>Определения</b> <a href="../../dd/dbc/Work__Image_8php_source.html#l01136">Work_Image.php:1136</a></div></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#a096b7e5c3f9fb908fbb30e1adc2ac61b" title="Вычисляет размеры для вывода эскиза изображения через вызов внутреннего метода.">PhotoRigma\Classes\Work_Image\size_image()</a> Вычисляет размеры для вывода эскиза изображения. </dd>
<dd>
<a class="el" href="#af37eb2b0693905dd71dd677f86d47831" title="Изменяет размер изображения через вызов внутреннего метода.">PhotoRigma\Classes\Work_Image\image_resize()</a> Изменяет размер изображения. </dd>
<dd>
<a class="el" href="#ab76f8f2ac851632a23ef69df2bd99dad" title="Конфигурация приложения.">PhotoRigma\Classes\Work_Image\$config</a> Массив с конфигурацией приложения. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a> строка <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l01136">1136</a></p>

<p class="reference">Используется в <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00968">_image_resize_internal()</a> и <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l02104">_size_image_internal()</a>.</p>
<div id="dynsection-10" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="../../closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a87a203ec3e8e0964cd9637de5d35d22c_icgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a87a203ec3e8e0964cd9637de5d35d22c_icgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a87a203ec3e8e0964cd9637de5d35d22c_icgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a87a203ec3e8e0964cd9637de5d35d22c_icgraph">
<area shape="rect" title="Расчёт пропорциональных размеров эскиза на основе реальных размеров изображения и конфигурации." alt="" coords="352,31,518,55"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a7f18185f2629abbc3bf148d8addfcfe8" title="Изменяет размер изображения." alt="" coords="151,5,304,30"/>
<area shape="poly" title=" " alt="" coords="336,34,304,30,305,24,337,28"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a887f702cc34cf74259c6f10365fc6c9b" title="Вычисляет размеры для вывода эскиза изображения." alt="" coords="156,55,298,79"/>
<area shape="poly" title=" " alt="" coords="337,57,299,61,299,56,336,52"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#af37eb2b0693905dd71dd677f86d47831" title="Изменяет размер изображения через вызов внутреннего метода." alt="" coords="5,5,103,30"/>
<area shape="poly" title=" " alt="" coords="135,20,103,20,103,15,135,15"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a096b7e5c3f9fb908fbb30e1adc2ac61b" title="Вычисляет размеры для вывода эскиза изображения через вызов внутреннего метода." alt="" coords="11,55,97,79"/>
<area shape="poly" title=" " alt="" coords="140,70,98,70,98,64,140,64"/>
</map>
</div>

</div>
</div>
<a id="a935337e705b7a1b9ea422d2e04932109" name="a935337e705b7a1b9ea422d2e04932109"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a935337e705b7a1b9ea422d2e04932109">&#9670;&#160;</a></span>create_directory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">create_directory </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$directory_name</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Создаёт директории для категории и копирует файлы <code><a class="el" href="../../de/d20/index_8php.html" title="Точка входа в приложение PhotoRigma.">index.php</a></code> через вызов внутреннего метода. </p>
<p>Этот публичный метод является обёрткой для защищённого метода _create_directory_internal(). Он создаёт директории для категории и копирует файлы <code><a class="el" href="../../de/d20/index_8php.html" title="Точка входа в приложение PhotoRigma.">index.php</a></code>. Метод также доступен через метод-фасад <code>create_directory()</code> в родительском классе.</p>
<p>Вызывать этот метод напрямую, минуя метод-фасад родительского класса, крайне не рекомендуется. В противном случае поведение метода может быть непредсказуемым.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$directory_name</td><td>Имя директории:<ul>
<li>Должен быть строкой, содержащей только допустимые символы для имён директорий.</li>
<li>Не должен содержать запрещённых символов (например, <code>\/:*?"&lt;&gt;|&lt;/tt&gt;).

@return bool Возвращает &lt;tt&gt;true&lt;/tt&gt;, если директории успешно созданы и файлы скопированы.

@throws RuntimeException Выбрасывается исключение в следующих случаях:
                          - Если родительская директория недоступна для записи.
                          - Если не удалось создать директории.
                          - Если исходные файлы &lt;tt&gt;index.php&lt;/tt&gt; не существуют.
                          - Если не удалось прочитать или записать файлы &lt;tt&gt;index.php&lt;/tt&gt;.

@warning Используйте этот метод с осторожностью, так как он создаёт директории и изменяет файлы.
         Вызывать этот метод напрямую, минуя метод-фасад родительского класса, крайне не рекомендуется.

Пример использования:
@code 
// Создание директорий для новой категории
$object = new \PhotoRigma\Classes\Work_Image();
$directoryName = 'new_category';
$result = $object-&gt;create_directory($directoryName);
if ($result) {
    echo "Директории успешно созданы!"; }  </code></li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>См. также</dt><dd><code> <a class="el" href="#ae77f64cb663e7c3c35e7cbcdfd846cf2" title="Создает директории для категории и копирует файлы index.php, предварительно проверяя права доступа.">PhotoRigma\Classes\Work_Image\_create_directory_internal()</a> Защищённый метод, реализующий основную логику. </code></dd>
<dd>
<code> <a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a935337e705b7a1b9ea422d2e04932109" title="Создает директории для категории и копирует файлы через вызов внутреннего метода.">PhotoRigma\Classes\Work\create_directory()</a> Метод-фасад в родительском классе для вызова этой логики. </code></dd></dl>

<p>Замещает <a class="el" href="../../d1/de5/interfacePhotoRigma_1_1Interfaces_1_1Work__Image__Interface.html#a935337e705b7a1b9ea422d2e04932109">Work_Image_Interface</a>.</p>

<p class="definition">См. определение в файле <a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a> строка <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00336">336</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00389">_create_directory_internal()</a>.</p>
<div id="dynsection-11" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="../../closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a935337e705b7a1b9ea422d2e04932109_cgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a935337e705b7a1b9ea422d2e04932109_cgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a935337e705b7a1b9ea422d2e04932109_cgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a935337e705b7a1b9ea422d2e04932109_cgraph">
<area shape="rect" title="Создаёт директории для категории и копирует файлы index.php через вызов внутреннего метода." alt="" coords="5,5,119,30"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#ae77f64cb663e7c3c35e7cbcdfd846cf2" title="Создает директории для категории и копирует файлы index.php, предварительно проверяя права доступа." alt="" coords="167,5,336,30"/>
<area shape="poly" title=" " alt="" coords="119,15,151,15,151,20,119,20"/>
</map>
</div>

</div>
</div>
<a id="a89d4e7cb491d0c91282d16ff5abe3138" name="a89d4e7cb491d0c91282d16ff5abe3138"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89d4e7cb491d0c91282d16ff5abe3138">&#9670;&#160;</a></span>fix_file_extension()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fix_file_extension </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$full_path</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Корректирует расширение файла в соответствии с его MIME-типом через вызов внутреннего метода. </p>
<p>Этот публичный метод является обёрткой для защищённого метода _fix_file_extension_internal(). Он проверяет MIME-тип файла и корректирует его расширение на основе соответствия MIME-типу. Метод также доступен через метод-фасад <code>fix_file_extension()</code> в родительском классе.</p>
<p>Вызывать этот метод напрямую, минуя метод-фасад родительского класса, крайне не рекомендуется. В противном случае поведение метода может быть непредсказуемым.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$full_path</td><td>Полный путь к файлу:<ul>
<li>Путь должен быть абсолютным.</li>
<li>Файл должен существовать и быть доступным для чтения.</li>
<li>Формат пути должен соответствовать регулярному выражению /^[a-zA-Z0-9\/.-_]+$/.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>string Полный путь к файлу с правильным расширением. Если расширение было изменено или добавлено, возвращается новый путь. Если расширение уже корректное, возвращается исходный путь.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Если путь к файлу некорректен, имеет недопустимый формат или файл не существует. </td></tr>
    <tr><td class="paramname">RuntimeException</td><td>Если MIME-тип файла не поддерживается или файл недоступен для чтения. </td></tr>
    <tr><td class="paramname">Exception</td><td>При возникновении ошибок логирования информации через <code>log_in_file</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод завершает выполнение с ошибкой, если MIME-тип файла не поддерживается. Убедитесь, что файл существует и доступен для чтения перед вызовом метода. Вызывать этот метод напрямую, минуя метод-фасад родительского класса, крайне не рекомендуется.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание экземпляра класса Work_Image</span></div>
<div class="line">$image = new \PhotoRigma\Classes\Work_Image();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Корректировка расширения файла</span></div>
<div class="line">$full_path = <span class="stringliteral">&#39;/path/to/file_without_extension&#39;</span>;</div>
<div class="line">$corrected_path = $image-&gt;fix_file_extension($full_path);</div>
<div class="line">echo <span class="stringliteral">&quot;Исправленный путь: {$corrected_path}&quot;</span>;</div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#af7cd1deb24cdf852e9981eb4f2665ff1" title="Корректировка расширения файла в соответствии с его MIME-типом (защищённый метод).">PhotoRigma\Classes\Work_Image\_fix_file_extension_internal()</a> Защищённый метод, выполняющий основную логику. </dd>
<dd>
<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a89d4e7cb491d0c91282d16ff5abe3138" title="Вывод изображения через HTTP через вызов внутреннего метода.">PhotoRigma\Classes\Work\fix_file_extension()</a> Метод-фасад в родительском классе для вызова этой логики. </dd></dl>

<p>Замещает <a class="el" href="../../d1/de5/interfacePhotoRigma_1_1Interfaces_1_1Work__Image__Interface.html#a89d4e7cb491d0c91282d16ff5abe3138">Work_Image_Interface</a>.</p>

<p class="definition">См. определение в файле <a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a> строка <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00529">529</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00598">_fix_file_extension_internal()</a>.</p>
<div id="dynsection-12" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="../../closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a89d4e7cb491d0c91282d16ff5abe3138_cgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a89d4e7cb491d0c91282d16ff5abe3138_cgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a89d4e7cb491d0c91282d16ff5abe3138_cgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a89d4e7cb491d0c91282d16ff5abe3138_cgraph">
<area shape="rect" title="Корректирует расширение файла в соответствии с его MIME&#45;типом через вызов внутреннего метода." alt="" coords="5,12,124,37"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#af7cd1deb24cdf852e9981eb4f2665ff1" title="Корректировка расширения файла в соответствии с его MIME&#45;типом (защищённый метод)." alt="" coords="172,5,297,44"/>
<area shape="poly" title=" " alt="" coords="124,22,156,22,156,27,124,27"/>
</map>
</div>

</div>
</div>
<a id="af37eb2b0693905dd71dd677f86d47831" name="af37eb2b0693905dd71dd677f86d47831"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af37eb2b0693905dd71dd677f86d47831">&#9670;&#160;</a></span>image_resize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">image_resize </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$full_path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$thumbnail_path</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Изменяет размер изображения через вызов внутреннего метода. </p>
<p>Этот публичный метод является обёрткой для защищённого метода _image_resize_internal(). Он изменяет размер исходного изображения и создаёт эскиз заданных размеров. Метод также доступен через метод-фасад <code>image_resize()</code> в родительском классе.</p>
<p>Вызывать этот метод напрямую, минуя метод-фасад родительского класса, крайне не рекомендуется. В противном случае поведение метода может быть непредсказуемым.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$full_path</td><td>Путь к исходному изображению:<ul>
<li>Путь должен быть абсолютным.</li>
<li>Файл должен существовать и быть доступным для чтения. </li>
</ul>
</td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$thumbnail_path</td><td>Путь для сохранения эскиза:<ul>
<li>Путь должен быть абсолютным.</li>
<li>Директория должна быть доступна для записи.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>bool True, если операция выполнена успешно, иначе False.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Если пути к файлам некорректны или имеют недопустимый формат. </td></tr>
    <tr><td class="paramname">RuntimeException</td><td>Если возникли ошибки при проверке файлов, директорий или размеров изображения. </td></tr>
    <tr><td class="paramname">Exception</td><td>При возникновении ошибок логирования информации через <code>log_in_file</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Метод использует следующие константы класса для ограничения размеров исходного изображения:<ul>
<li><code>MAX_IMAGE_WIDTH</code>: Максимальная ширина исходного изображения (в пикселях). Значение: 5000.</li>
<li><code>MAX_IMAGE_HEIGHT</code>: Максимальная высота исходного изображения (в пикселях). Значение: 5000. Эти константы являются приватными и доступны только внутри класса.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод зависит от корректности данных в конфигурации (<code>temp_photo_w</code>, <code>temp_photo_h</code>). Если эти параметры некорректны, результат может быть непредсказуемым. Убедитесь, что пути к файлам и директориям корректны перед вызовом метода. Вызывать этот метод напрямую, минуя метод-фасад родительского класса, крайне не рекомендуется.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание экземпляра класса Work_Image</span></div>
<div class="line">$image = new \PhotoRigma\Classes\Work_Image();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Изменение размера изображения</span></div>
<div class="line">$full_path = <span class="stringliteral">&#39;/path/to/source_image.jpg&#39;</span>;</div>
<div class="line">$thumbnail_path = <span class="stringliteral">&#39;/path/to/thumbnail.jpg&#39;</span>;</div>
<div class="line">$success = $image-&gt;image_resize($full_path, $thumbnail_path);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> ($success) {</div>
<div class="line">    echo <span class="stringliteral">&quot;Эскиз успешно создан.&quot;</span>;</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    echo <span class="stringliteral">&quot;Ошибка при создании эскиза.&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#a7f18185f2629abbc3bf148d8addfcfe8" title="Изменяет размер изображения.">PhotoRigma\Classes\Work_Image\_image_resize_internal()</a> Защищённый метод, выполняющий основную логику. </dd>
<dd>
<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#af37eb2b0693905dd71dd677f86d47831" title="Изменяет размер изображения через вызов внутреннего метода.">PhotoRigma\Classes\Work\image_resize()</a> Метод-фасад в родительском классе для вызова этой логики. </dd></dl>

<p>Замещает <a class="el" href="../../d1/de5/interfacePhotoRigma_1_1Interfaces_1_1Work__Image__Interface.html#af37eb2b0693905dd71dd677f86d47831">Work_Image_Interface</a>.</p>

<p class="definition">См. определение в файле <a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a> строка <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00889">889</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00968">_image_resize_internal()</a>.</p>
<div id="dynsection-13" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="../../closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_af37eb2b0693905dd71dd677f86d47831_cgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_af37eb2b0693905dd71dd677f86d47831_cgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_af37eb2b0693905dd71dd677f86d47831_cgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_af37eb2b0693905dd71dd677f86d47831_cgraph">
<area shape="rect" title="Изменяет размер изображения через вызов внутреннего метода." alt="" coords="5,83,103,107"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a7f18185f2629abbc3bf148d8addfcfe8" title="Изменяет размер изображения." alt="" coords="151,83,304,107"/>
<area shape="poly" title=" " alt="" coords="103,92,135,92,135,98,103,98"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a87a203ec3e8e0964cd9637de5d35d22c" title="Расчёт пропорциональных размеров эскиза на основе реальных размеров изображения и конфигурации." alt="" coords="354,5,521,30"/>
<area shape="poly" title=" " alt="" coords="256,80,351,41,375,32,377,38,353,45,258,85"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#afaedd403d60cd5b36facbf5414e5b6ce" title="Создаёт эскиз изображения с использованием библиотеки GD, включая резервное копирование старого эскиз..." alt="" coords="352,55,523,79"/>
<area shape="poly" title=" " alt="" coords="304,82,336,78,337,83,305,87"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a6154fb2649a1052f31514aed4818ad2c" title="Создаёт эскиз изображения с использованием библиотеки GraphicsMagick, включая резервное копирование с..." alt="" coords="362,104,513,142"/>
<area shape="poly" title=" " alt="" coords="305,103,347,108,346,114,304,108"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#ab09fc88efda540da282034ef94d4ab74" title="Создаёт эскиз изображения с использованием библиотеки ImageMagick, включая резервное копирование стар..." alt="" coords="362,166,513,205"/>
<area shape="poly" title=" " alt="" coords="256,106,353,151,369,158,367,163,351,156,253,110"/>
</map>
</div>

</div>
</div>
<a id="adfcd1cb7963a860013ca9ca1898f54f1" name="adfcd1cb7963a860013ca9ca1898f54f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfcd1cb7963a860013ca9ca1898f54f1">&#9670;&#160;</a></span>no_photo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">no_photo </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Возвращает данные для отсутствующего изображения через вызов внутреннего метода. </p>
<p>Этот публичный метод является обёрткой для защищённого метода _no_photo_internal(). Он формирует массив данных для представления информации об отсутствующем изображении. Метод также доступен через метод-фасад <code>no_photo()</code> в родительском классе.</p>
<p>Вызывать этот метод напрямую, минуя метод-фасад родительского класса, крайне не рекомендуется. В противном случае поведение метода может быть непредсказуемым.</p>
<dl class="section return"><dt>Возвращает</dt><dd>array Массив данных об изображении или его отсутствии:<ul>
<li>&lsquo;'url&rsquo;<code>(string): URL полноразмерного изображения. -</code>'thumbnail_url'<code>(string): URL эскиза изображения. -</code>'name'<code>(string): Название изображения. -</code>'description'<code>(string): Описание изображения. -</code>'category_name'<code>(string): Название категории. -</code>'category_description'<code>(string): Описание категории. -</code>'rate'<code>(string): Рейтинг изображения. -</code>'url_user'&lsquo; (string): URL пользователя (пустая строка &rsquo;').</li>
<li>&lsquo;'real_name&rsquo;<code>(string): Имя пользователя. -</code>'full_path'<code>(string): Полный путь к изображению. -</code>'thumbnail_path'<code>(string): Полный путь к эскизу. -</code>'file'` (string): Имя файла. Значения по умолчанию используются для отсутствующих данных.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод зависит от корректности данных в конфигурации (<code>site_url</code>, <code>site_dir</code>, <code>gallery_folder</code>, <code>thumbnail_folder</code>). Если эти параметры некорректны, результат может быть непредсказуемым. Вызывать этот метод напрямую, минуя метод-фасад родительского класса, крайне не рекомендуется.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание экземпляра класса Work_Image</span></div>
<div class="line">$image = new \PhotoRigma\Classes\Work_Image();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Получение данных для отсутствующего изображения</span></div>
<div class="line">$noPhotoData = $image-&gt;no_photo();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Вывод данных</span></div>
<div class="line">echo <span class="stringliteral">&quot;URL изображения: {$noPhotoData[&#39;url&#39;]}\n&quot;</span>;</div>
<div class="line">echo <span class="stringliteral">&quot;Описание: {$noPhotoData[&#39;description&#39;]}\n&quot;</span>;</div>
<div class="line">echo <span class="stringliteral">&quot;Категория: {$noPhotoData[&#39;category_name&#39;]} - {$noPhotoData[&#39;category_description&#39;]}\n&quot;</span>;</div>
<div class="line">echo <span class="stringliteral">&quot;Рейтинг: {$noPhotoData[&#39;rate&#39;]}\n&quot;</span>;</div>
<div class="line">echo <span class="stringliteral">&quot;Пользователь: {$noPhotoData[&#39;real_name&#39;]}\n&quot;</span>;</div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#a2b5c40822e7f0dcc8beb47dad2660286" title="Возвращает данные для отсутствующего изображения.">PhotoRigma\Classes\Work_Image\_no_photo_internal()</a> Защищённый метод, выполняющий основную логику. </dd>
<dd>
<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#adfcd1cb7963a860013ca9ca1898f54f1" title="Возвращает данные для отсутствующего изображения через вызов внутреннего метода.">PhotoRigma\Classes\Work\no_photo()</a> Метод-фасад в родительском классе для вызова этой логики. </dd></dl>

<p>Замещает <a class="el" href="../../d1/de5/interfacePhotoRigma_1_1Interfaces_1_1Work__Image__Interface.html#adfcd1cb7963a860013ca9ca1898f54f1">Work_Image_Interface</a>.</p>

<p class="definition">См. определение в файле <a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a> строка <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l01811">1811</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l01864">_no_photo_internal()</a>.</p>
<div id="dynsection-14" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="../../closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_adfcd1cb7963a860013ca9ca1898f54f1_cgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_adfcd1cb7963a860013ca9ca1898f54f1_cgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_adfcd1cb7963a860013ca9ca1898f54f1_cgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_adfcd1cb7963a860013ca9ca1898f54f1_cgraph">
<area shape="rect" title="Возвращает данные для отсутствующего изображения через вызов внутреннего метода." alt="" coords="5,5,80,30"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a2b5c40822e7f0dcc8beb47dad2660286" title="Возвращает данные для отсутствующего изображения." alt="" coords="128,5,258,30"/>
<area shape="poly" title=" " alt="" coords="80,15,113,15,113,20,80,20"/>
</map>
</div>

</div>
</div>
<a id="afaedd403d60cd5b36facbf5414e5b6ce" name="afaedd403d60cd5b36facbf5414e5b6ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afaedd403d60cd5b36facbf5414e5b6ce">&#9670;&#160;</a></span>process_image_resize_gd()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">process_image_resize_gd </td>
          <td>(</td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$original_data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$thumbnail_data</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Создаёт эскиз изображения с использованием библиотеки GD, включая резервное копирование старого эскиза и восстановление при ошибках. </p>
<p>Этот метод выполняет следующие шаги:</p><ol type="1">
<li>Проверяет поддержку MIME-типа через массив разрешённых форматов.</li>
<li>Преобразует MIME-тип в константу IMAGETYPE_*.</li>
<li>Проверяет поддержку формата через функцию imagetypes().</li>
<li>Ограничивает использование памяти до 25% от доступной.</li>
<li>Создаёт резервную копию старого эскиза (если он существует).</li>
<li>Загружает исходное изображение и создаёт новый эскиз заданных размеров:<ul>
<li>Для форматов PNG и WebP настраивается прозрачность.</li>
<li>Используется функция imagecopyresampled для высококачественного масштабирования.</li>
</ul>
</li>
<li>Сохраняет новый эскиз в указанный файл.</li>
<li>Восстанавливает старый эскиз в случае ошибки.</li>
<li>Освобождает ресурсы в блоке finally через imagedestroy(). Этот метод является приватным и предназначен только для использования внутри класса.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$original_data</td><td>Данные об оригинальном изображении:<ul>
<li>'path' (string): Абсолютный путь к исходному файлу.</li>
<li>'type' (string): MIME-тип изображения (например, 'image/jpeg'). Должен быть одним из разрешённых MIME-типов.</li>
<li>'width' (int): Ширина исходного изображения (положительное число).</li>
<li>'height' (int): Высота исходного изображения (положительное число). </li>
</ul>
</td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$thumbnail_data</td><td>Данные об эскизе:<ul>
<li>'path' (string): Абсолютный путь для сохранения эскиза.</li>
<li>'width' (int): Желаемая ширина эскиза (положительное число).</li>
<li>'height' (int): Желаемая высота эскиза (положительное число).</li>
<li>'exists' (bool): Существует ли файл эскиза (<code>true</code> или <code>false</code>).</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>bool True, если эскиз создан успешно.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Если MIME-тип или тип изображения не поддерживаются. Пример сообщения: Неподдерживаемый MIME-тип для GD | Получено: [значение] </td></tr>
    <tr><td class="paramname">RuntimeException</td><td>Если возникает ошибка при работе с GD (например, при загрузке, обработке или сохранении изображения). Пример сообщения: Не удалось создать ресурс изображения через GD | Путь: [значение] </td></tr>
    <tr><td class="paramname">Exception</td><td>Может быть выброшено вызываемой функцией <code>log_in_file</code> при записи ошибок в лог.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод чувствителен к правам доступа при работе с файлами (например, при переименовании или удалении файлов). Убедитесь, что скрипт имеет необходимые права на запись и чтение. </dd>
<dd>
Ограничение памяти (25% от доступной) может быть недостаточным для больших изображений. </dd>
<dd>
Поддержка форматов зависит от текущей версии GD. Например, WebP может быть недоступен.</dd></dl>
<p>Пример вызова метода внутри класса: </p><div class="fragment"><div class="line">$original_data = [</div>
<div class="line">    <span class="stringliteral">&#39;path&#39;</span> =&gt; <span class="stringliteral">&#39;/path/to/original.jpg&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;type&#39;</span> =&gt; <span class="stringliteral">&#39;image/jpeg&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;width&#39;</span> =&gt; 1920,</div>
<div class="line">    <span class="stringliteral">&#39;height&#39;</span> =&gt; 1080,</div>
<div class="line">];</div>
<div class="line">$thumbnail_data = [</div>
<div class="line">    <span class="stringliteral">&#39;path&#39;</span> =&gt; <span class="stringliteral">&#39;/path/to/thumbnail.jpg&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;width&#39;</span> =&gt; 300,</div>
<div class="line">    <span class="stringliteral">&#39;height&#39;</span> =&gt; 200,</div>
<div class="line">    <span class="stringliteral">&#39;exists&#39;</span> =&gt; <span class="keyword">false</span>,</div>
<div class="line">];</div>
<div class="line">$result = $this-&gt;<a class="code hl_function" href="#afaedd403d60cd5b36facbf5414e5b6ce">process_image_resize_gd</a>($original_data, $thumbnail_data);</div>
<div class="line"><span class="keywordflow">if</span> ($result) {</div>
<div class="line">    echo <span class="stringliteral">&quot;Эскиз успешно создан!&quot;</span>;</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    echo <span class="stringliteral">&quot;Не удалось создать эскиз.&quot;</span>;</div>
<div class="line">}</div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Image_html_afaedd403d60cd5b36facbf5414e5b6ce"><div class="ttname"><a href="#afaedd403d60cd5b36facbf5414e5b6ce">PhotoRigma\Classes\Work_Image\process_image_resize_gd</a></div><div class="ttdeci">process_image_resize_gd(array $original_data, array $thumbnail_data)</div><div class="ttdoc">Создаёт эскиз изображения с использованием библиотеки GD, включая резервное копирование старого эскиз...</div><div class="ttdef"><b>Определения</b> <a href="../../dd/dbc/Work__Image_8php_source.html#l01618">Work_Image.php:1618</a></div></div>
</div><!-- fragment --><dl class="section see"><dt>См. также</dt><dd><a class="el" href="../../db/d02/namespacePhotoRigma_1_1Include.html#a2d74c46a21e4ce612a98eee60981aef0" title="Записывает сообщение об ошибке в лог-файл и, при необходимости, завершает выполнение скрипта.">PhotoRigma\Include\log_in_file()</a> Функция для логирования ошибок. </dd>
<dd>
<a class="el" href="#a7f18185f2629abbc3bf148d8addfcfe8" title="Изменяет размер изображения.">PhotoRigma\Classes\Work_Image\_image_resize_internal()</a> Метод, вызывающий этот приватный метод. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a> строка <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l01618">1618</a></p>

<p class="reference">Используется в <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00968">_image_resize_internal()</a>.</p>
<div id="dynsection-15" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="../../closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_afaedd403d60cd5b36facbf5414e5b6ce_icgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_afaedd403d60cd5b36facbf5414e5b6ce_icgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_afaedd403d60cd5b36facbf5414e5b6ce_icgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_afaedd403d60cd5b36facbf5414e5b6ce_icgraph">
<area shape="rect" title="Создаёт эскиз изображения с использованием библиотеки GD, включая резервное копирование старого эскиз..." alt="" coords="352,5,523,30"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a7f18185f2629abbc3bf148d8addfcfe8" title="Изменяет размер изображения." alt="" coords="151,5,304,30"/>
<area shape="poly" title=" " alt="" coords="337,20,304,20,304,15,337,15"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#af37eb2b0693905dd71dd677f86d47831" title="Изменяет размер изображения через вызов внутреннего метода." alt="" coords="5,5,103,30"/>
<area shape="poly" title=" " alt="" coords="135,20,103,20,103,15,135,15"/>
</map>
</div>

</div>
</div>
<a id="a6154fb2649a1052f31514aed4818ad2c" name="a6154fb2649a1052f31514aed4818ad2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6154fb2649a1052f31514aed4818ad2c">&#9670;&#160;</a></span>process_image_resize_gmagick()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">process_image_resize_gmagick </td>
          <td>(</td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$original_data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$thumbnail_data</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Создаёт эскиз изображения с использованием библиотеки GraphicsMagick, включая резервное копирование старого эскиза и восстановление при ошибках. </p>
<p>Этот метод выполняет следующие шаги:</p><ol type="1">
<li>Проверяет поддержку MIME-типа через массив разрешённых форматов.</li>
<li>Преобразует MIME-тип в формат GraphicsMagick.</li>
<li>Проверяет поддержку формата через <code>Gmagick::queryFormats()</code>.</li>
<li>Ограничивает использование памяти до 25% от доступной.</li>
<li>Создаёт резервную копию старого эскиза (если он существует).</li>
<li>Загружает исходное изображение и создаёт новый эскиз заданных размеров:<ul>
<li>Для форматов PNG и WebP настраивается прозрачность.</li>
<li>Используется фильтр <code>FILTER_LANCZOS</code> для высококачественного масштабирования.</li>
</ul>
</li>
<li>Сохраняет новый эскиз в указанный файл.</li>
<li>Восстанавливает старый эскиз в случае ошибки.</li>
<li>Освобождает ресурсы в блоке <code>finally</code>. Этот метод является приватным и предназначен только для использования внутри класса.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$original_data</td><td>Данные об оригинальном изображении:<ul>
<li>'path' (string): Абсолютный путь к исходному файлу.</li>
<li>'type' (string): MIME-тип изображения (например, 'image/jpeg'). Должен быть одним из разрешённых MIME-типов.</li>
<li>'width' (int): Ширина исходного изображения (положительное число).</li>
<li>'height' (int): Высота исходного изображения (положительное число). </li>
</ul>
</td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$thumbnail_data</td><td>Данные об эскизе:<ul>
<li>'path' (string): Абсолютный путь для сохранения эскиза.</li>
<li>'width' (int): Желаемая ширина эскиза (положительное число).</li>
<li>'height' (int): Желаемая высота эскиза (положительное число).</li>
<li>'exists' (bool): Существует ли файл эскиза (<code>true</code> или <code>false</code>).</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>bool True, если эскиз создан успешно.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">GmagickException</td><td>Если возникает ошибка при работе с GraphicsMagick (например, при загрузке или обработке изображения). </td></tr>
    <tr><td class="paramname">Exception</td><td>Может быть выброшено вызываемой функцией <code>log_in_file</code> при записи ошибок в лог.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод чувствителен к правам доступа при работе с файлами (например, при переименовании или удалении файлов). Убедитесь, что скрипт имеет необходимые права на запись и чтение. </dd>
<dd>
Ограничение памяти (25% от доступной) может быть недостаточным для больших изображений.</dd></dl>
<p>Пример вызова метода внутри класса: </p><div class="fragment"><div class="line">$original_data = [</div>
<div class="line">    <span class="stringliteral">&#39;path&#39;</span> =&gt; <span class="stringliteral">&#39;/path/to/original.jpg&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;type&#39;</span> =&gt; <span class="stringliteral">&#39;image/jpeg&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;width&#39;</span> =&gt; 1920,</div>
<div class="line">    <span class="stringliteral">&#39;height&#39;</span> =&gt; 1080,</div>
<div class="line">];</div>
<div class="line">$thumbnail_data = [</div>
<div class="line">    <span class="stringliteral">&#39;path&#39;</span> =&gt; <span class="stringliteral">&#39;/path/to/thumbnail.jpg&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;width&#39;</span> =&gt; 300,</div>
<div class="line">    <span class="stringliteral">&#39;height&#39;</span> =&gt; 200,</div>
<div class="line">    <span class="stringliteral">&#39;exists&#39;</span> =&gt; <span class="keyword">false</span>,</div>
<div class="line">];</div>
<div class="line">$result = $this-&gt;<a class="code hl_function" href="#a6154fb2649a1052f31514aed4818ad2c">process_image_resize_gmagick</a>($original_data, $thumbnail_data);</div>
<div class="line"><span class="keywordflow">if</span> ($result) {</div>
<div class="line">    echo <span class="stringliteral">&quot;Эскиз успешно создан!&quot;</span>;</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    echo <span class="stringliteral">&quot;Не удалось создать эскиз.&quot;</span>;</div>
<div class="line">}</div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Image_html_a6154fb2649a1052f31514aed4818ad2c"><div class="ttname"><a href="#a6154fb2649a1052f31514aed4818ad2c">PhotoRigma\Classes\Work_Image\process_image_resize_gmagick</a></div><div class="ttdeci">process_image_resize_gmagick(array $original_data, array $thumbnail_data)</div><div class="ttdoc">Создаёт эскиз изображения с использованием библиотеки GraphicsMagick, включая резервное копирование с...</div><div class="ttdef"><b>Определения</b> <a href="../../dd/dbc/Work__Image_8php_source.html#l01266">Work_Image.php:1266</a></div></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#a7f18185f2629abbc3bf148d8addfcfe8" title="Изменяет размер изображения.">PhotoRigma\Classes\Work_Image\_image_resize_internal()</a> Метод, вызывающий этот приватный метод. </dd>
<dd>
<a class="el" href="../../db/d02/namespacePhotoRigma_1_1Include.html#a2d74c46a21e4ce612a98eee60981aef0" title="Записывает сообщение об ошибке в лог-файл и, при необходимости, завершает выполнение скрипта.">PhotoRigma\Include\log_in_file()</a> Функция для логирования ошибок. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a> строка <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l01266">1266</a></p>

<p class="reference">Используется в <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00968">_image_resize_internal()</a>.</p>
<div id="dynsection-16" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="../../closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a6154fb2649a1052f31514aed4818ad2c_icgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a6154fb2649a1052f31514aed4818ad2c_icgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a6154fb2649a1052f31514aed4818ad2c_icgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a6154fb2649a1052f31514aed4818ad2c_icgraph">
<area shape="rect" title="Создаёт эскиз изображения с использованием библиотеки GraphicsMagick, включая резервное копирование с..." alt="" coords="352,5,502,44"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a7f18185f2629abbc3bf148d8addfcfe8" title="Изменяет размер изображения." alt="" coords="151,12,304,37"/>
<area shape="poly" title=" " alt="" coords="337,27,304,27,304,22,337,22"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#af37eb2b0693905dd71dd677f86d47831" title="Изменяет размер изображения через вызов внутреннего метода." alt="" coords="5,12,103,37"/>
<area shape="poly" title=" " alt="" coords="135,27,103,27,103,22,135,22"/>
</map>
</div>

</div>
</div>
<a id="ab09fc88efda540da282034ef94d4ab74" name="ab09fc88efda540da282034ef94d4ab74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab09fc88efda540da282034ef94d4ab74">&#9670;&#160;</a></span>process_image_resize_imagick()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">process_image_resize_imagick </td>
          <td>(</td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$original_data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$thumbnail_data</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Создаёт эскиз изображения с использованием библиотеки ImageMagick, включая резервное копирование старого эскиза и восстановление при ошибках. </p>
<p>Этот метод выполняет следующие шаги:</p><ol type="1">
<li>Проверяет поддержку MIME-типа через массив разрешённых форматов.</li>
<li>Преобразует MIME-тип в формат ImageMagick.</li>
<li>Проверяет поддержку формата через <code>Imagick::queryFormats()</code>.</li>
<li>Ограничивает использование памяти до 25% от доступной.</li>
<li>Создаёт резервную копию старого эскиза (если он существует).</li>
<li>Загружает исходное изображение и создаёт новый эскиз заданных размеров:<ul>
<li>Используется фильтр <code>FILTER_LANCZOS</code> для высококачественного масштабирования.</li>
</ul>
</li>
<li>Сохраняет новый эскиз в указанный файл.</li>
<li>Восстанавливает старый эскиз в случае ошибки.</li>
<li>Освобождает ресурсы в блоке <code>finally</code> через <code>$image-&gt;clear()</code>. Этот метод является приватным и предназначен только для использования внутри класса.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$original_data</td><td>Данные об оригинальном изображении:<ul>
<li>'path' (string): Абсолютный путь к исходному файлу.</li>
<li>'type' (string): MIME-тип изображения (например, 'image/jpeg'). Должен быть одним из разрешённых MIME-типов.</li>
<li>'width' (int): Ширина исходного изображения (положительное число).</li>
<li>'height' (int): Высота исходного изображения (положительное число). </li>
</ul>
</td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$thumbnail_data</td><td>Данные об эскизе:<ul>
<li>'path' (string): Абсолютный путь для сохранения эскиза.</li>
<li>'width' (int): Желаемая ширина эскиза (положительное число).</li>
<li>'height' (int): Желаемая высота эскиза (положительное число).</li>
<li>'exists' (bool): Существует ли файл эскиза (<code>true</code> или <code>false</code>).</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>bool True, если эскиз создан успешно.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td>Может быть выброшено вызываемой функцией <code>log_in_file</code> при записи ошибок в лог.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод чувствителен к правам доступа при работе с файлами (например, при переименовании или удалении файлов). Убедитесь, что скрипт имеет необходимые права на запись и чтение. </dd>
<dd>
Ограничение памяти (25% от доступной) может быть недостаточным для больших изображений.</dd></dl>
<p>Пример вызова метода внутри класса: </p><div class="fragment"><div class="line">$original_data = [</div>
<div class="line">    <span class="stringliteral">&#39;path&#39;</span> =&gt; <span class="stringliteral">&#39;/path/to/original.jpg&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;type&#39;</span> =&gt; <span class="stringliteral">&#39;image/jpeg&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;width&#39;</span> =&gt; 1920,</div>
<div class="line">    <span class="stringliteral">&#39;height&#39;</span> =&gt; 1080,</div>
<div class="line">];</div>
<div class="line">$thumbnail_data = [</div>
<div class="line">    <span class="stringliteral">&#39;path&#39;</span> =&gt; <span class="stringliteral">&#39;/path/to/thumbnail.jpg&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;width&#39;</span> =&gt; 300,</div>
<div class="line">    <span class="stringliteral">&#39;height&#39;</span> =&gt; 200,</div>
<div class="line">    <span class="stringliteral">&#39;exists&#39;</span> =&gt; <span class="keyword">false</span>,</div>
<div class="line">];</div>
<div class="line">$result = $this-&gt;<a class="code hl_function" href="#ab09fc88efda540da282034ef94d4ab74">process_image_resize_imagick</a>($original_data, $thumbnail_data);</div>
<div class="line"><span class="keywordflow">if</span> ($result) {</div>
<div class="line">    echo <span class="stringliteral">&quot;Эскиз успешно создан!&quot;</span>;</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    echo <span class="stringliteral">&quot;Не удалось создать эскиз.&quot;</span>;</div>
<div class="line">}</div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Image_html_ab09fc88efda540da282034ef94d4ab74"><div class="ttname"><a href="#ab09fc88efda540da282034ef94d4ab74">PhotoRigma\Classes\Work_Image\process_image_resize_imagick</a></div><div class="ttdeci">process_image_resize_imagick(array $original_data, array $thumbnail_data)</div><div class="ttdoc">Создаёт эскиз изображения с использованием библиотеки ImageMagick, включая резервное копирование стар...</div><div class="ttdef"><b>Определения</b> <a href="../../dd/dbc/Work__Image_8php_source.html#l01437">Work_Image.php:1437</a></div></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#a7f18185f2629abbc3bf148d8addfcfe8" title="Изменяет размер изображения.">PhotoRigma\Classes\Work_Image\_image_resize_internal()</a> Метод, вызывающий этот приватный метод. </dd>
<dd>
<a class="el" href="../../db/d02/namespacePhotoRigma_1_1Include.html#a2d74c46a21e4ce612a98eee60981aef0" title="Записывает сообщение об ошибке в лог-файл и, при необходимости, завершает выполнение скрипта.">PhotoRigma\Include\log_in_file()</a> Функция для логирования ошибок. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a> строка <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l01437">1437</a></p>

<p class="reference">Используется в <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00968">_image_resize_internal()</a>.</p>
<div id="dynsection-17" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="../../closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_ab09fc88efda540da282034ef94d4ab74_icgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_ab09fc88efda540da282034ef94d4ab74_icgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_ab09fc88efda540da282034ef94d4ab74_icgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_ab09fc88efda540da282034ef94d4ab74_icgraph">
<area shape="rect" title="Создаёт эскиз изображения с использованием библиотеки ImageMagick, включая резервное копирование стар..." alt="" coords="352,5,502,44"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a7f18185f2629abbc3bf148d8addfcfe8" title="Изменяет размер изображения." alt="" coords="151,12,304,37"/>
<area shape="poly" title=" " alt="" coords="337,27,304,27,304,22,337,22"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#af37eb2b0693905dd71dd677f86d47831" title="Изменяет размер изображения через вызов внутреннего метода." alt="" coords="5,12,103,37"/>
<area shape="poly" title=" " alt="" coords="135,27,103,27,103,22,135,22"/>
</map>
</div>

</div>
</div>
<a id="aaaf358ddc8223e4a5a479f645fc43da8" name="aaaf358ddc8223e4a5a479f645fc43da8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaaf358ddc8223e4a5a479f645fc43da8">&#9670;&#160;</a></span>remove_directory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">remove_directory </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$path</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Удаляет директорию и её содержимое через вызов внутреннего метода. </p>
<p>Этот публичный метод является обёрткой для защищённого метода _remove_directory_internal(). Он удаляет директорию и всё её содержимое. Метод также доступен через метод-фасад <code>remove_directory()</code> в родительском классе.</p>
<p>Вызывать этот метод напрямую, минуя метод-фасад родительского класса, крайне не рекомендуется. В противном случае поведение метода может быть непредсказуемым.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$path</td><td>Путь к директории:<ul>
<li>Должен быть строкой, указывающей на существующую директорию.</li>
<li>Директория должна быть доступна для записи.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>bool Возвращает <code>true</code>, если директория успешно удалена.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">RuntimeException</td><td>Выбрасывается исключение в следующих случаях:<ul>
<li>Если директория не существует.</li>
<li>Если директория недоступна для записи.</li>
<li>Если не удалось удалить файл внутри директории.</li>
<li>Если не удалось удалить саму директорию.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Метод рекурсивно удаляет все файлы внутри директории.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Используйте этот метод с осторожностью, так как удаление директории необратимо. Убедитесь, что переданная директория действительно должна быть удалена. Вызывать этот метод напрямую, минуя метод-фасад родительского класса, крайне не рекомендуется.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание экземпляра класса Work_Image</span></div>
<div class="line">$image = new \PhotoRigma\Classes\Work_Image();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Удаление директории</span></div>
<div class="line">$path = <span class="stringliteral">&#39;/path/to/directory&#39;</span>;</div>
<div class="line">$result = $image-&gt;remove_directory($path);</div>
<div class="line"><span class="keywordflow">if</span> ($result) {</div>
<div class="line">    echo <span class="stringliteral">&quot;Директория успешно удалена!&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#a16c229fbb1b62aee5791544bc1086248" title="Удаляет директорию и её содержимое, предварительно проверяя права доступа.">PhotoRigma\Classes\Work_Image\_remove_directory_internal()</a> Защищённый метод, выполняющий основную логику удаления. </dd>
<dd>
<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#aaaf358ddc8223e4a5a479f645fc43da8" title="Удаляет директорию и её содержимое через вызов внутреннего метода.">PhotoRigma\Classes\Work\remove_directory()</a> Метод-фасад в родительском классе для вызова этой логики. </dd></dl>

<p>Замещает <a class="el" href="../../d1/de5/interfacePhotoRigma_1_1Interfaces_1_1Work__Image__Interface.html#aaaf358ddc8223e4a5a479f645fc43da8">Work_Image_Interface</a>.</p>

<p class="definition">См. определение в файле <a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a> строка <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l01927">1927</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l01976">_remove_directory_internal()</a>.</p>
<div id="dynsection-18" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="../../closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_aaaf358ddc8223e4a5a479f645fc43da8_cgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_aaaf358ddc8223e4a5a479f645fc43da8_cgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_aaaf358ddc8223e4a5a479f645fc43da8_cgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_aaaf358ddc8223e4a5a479f645fc43da8_cgraph">
<area shape="rect" title="Удаляет директорию и её содержимое через вызов внутреннего метода." alt="" coords="5,5,126,30"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a16c229fbb1b62aee5791544bc1086248" title="Удаляет директорию и её содержимое, предварительно проверяя права доступа." alt="" coords="174,5,350,30"/>
<area shape="poly" title=" " alt="" coords="126,15,158,15,158,20,126,20"/>
</map>
</div>

</div>
</div>
<a id="a096b7e5c3f9fb908fbb30e1adc2ac61b" name="a096b7e5c3f9fb908fbb30e1adc2ac61b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a096b7e5c3f9fb908fbb30e1adc2ac61b">&#9670;&#160;</a></span>size_image()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_image </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$path_image</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Вычисляет размеры для вывода эскиза изображения через вызов внутреннего метода. </p>
<p>Этот публичный метод является обёрткой для защищённого метода _size_image_internal(). Он рассчитывает ширину и высоту эскиза на основе реальных размеров изображения и конфигурационных параметров (<code>temp_photo_w</code> и <code>temp_photo_h</code>). Метод также доступен через метод-фасад <code>size_image()</code> в родительском классе.</p>
<p>Вызывать этот метод напрямую, минуя метод-фасад родительского класса, крайне не рекомендуется. В противном случае поведение метода может быть непредсказуемым.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$path_image</td><td>Путь к файлу изображения:<ul>
<li>Путь должен быть абсолютным.</li>
<li>Файл должен существовать и быть доступным для чтения.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>array Массив с шириной и высотой эскиза:<ul>
<li>Ключ 'width': int — Ширина эскиза (целое число ≥ 0).</li>
<li>Ключ 'height': int — Высота эскиза (целое число ≥ 0). Размеры могут совпадать с оригинальными размерами изображения, если оно меньше целевого размера.</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">RuntimeException</td><td>Если файл не существует или не удалось получить размеры изображения.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод зависит от корректности данных в конфигурации (<code>temp_photo_w</code> и <code>temp_photo_h</code>). Если эти параметры некорректны, результат может быть непредсказуемым. Вызывать этот метод напрямую, минуя метод-фасад родительского класса, крайне не рекомендуется.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание экземпляра класса Work_Image</span></div>
<div class="line">$image = new \PhotoRigma\Classes\Work_Image();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Вычисление размеров эскиза для изображения</span></div>
<div class="line">$path = <span class="stringliteral">&#39;/path/to/image.jpg&#39;</span>;</div>
<div class="line">$sizes = $image-&gt;size_image($path);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Вывод результатов</span></div>
<div class="line">echo <span class="stringliteral">&quot;Ширина: {$sizes[&#39;width&#39;]}, Высота: {$sizes[&#39;height&#39;]}&quot;</span>;</div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#a887f702cc34cf74259c6f10365fc6c9b" title="Вычисляет размеры для вывода эскиза изображения.">PhotoRigma\Classes\Work_Image\_size_image_internal()</a> Защищённый метод, выполняющий основную логику. </dd>
<dd>
<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a096b7e5c3f9fb908fbb30e1adc2ac61b" title="Вычисляет размеры для вывода эскиза изображения через вызов внутреннего метода.">PhotoRigma\Classes\Work\size_image()</a> Метод-фасад в родительском классе для вызова этой логики. </dd></dl>

<p>Замещает <a class="el" href="../../d1/de5/interfacePhotoRigma_1_1Interfaces_1_1Work__Image__Interface.html#a096b7e5c3f9fb908fbb30e1adc2ac61b">Work_Image_Interface</a>.</p>

<p class="definition">См. определение в файле <a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a> строка <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l02052">2052</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l02104">_size_image_internal()</a>.</p>
<div id="dynsection-19" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="../../closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a096b7e5c3f9fb908fbb30e1adc2ac61b_cgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a096b7e5c3f9fb908fbb30e1adc2ac61b_cgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a096b7e5c3f9fb908fbb30e1adc2ac61b_cgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a096b7e5c3f9fb908fbb30e1adc2ac61b_cgraph">
<area shape="rect" title="Вычисляет размеры для вывода эскиза изображения через вызов внутреннего метода." alt="" coords="5,5,92,30"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a887f702cc34cf74259c6f10365fc6c9b" title="Вычисляет размеры для вывода эскиза изображения." alt="" coords="140,5,282,30"/>
<area shape="poly" title=" " alt="" coords="92,15,124,15,124,20,92,20"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a87a203ec3e8e0964cd9637de5d35d22c" title="Расчёт пропорциональных размеров эскиза на основе реальных размеров изображения и конфигурации." alt="" coords="330,5,496,30"/>
<area shape="poly" title=" " alt="" coords="283,15,314,15,314,20,283,20"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Данные класса</h2>
<a id="ab76f8f2ac851632a23ef69df2bd99dad" name="ab76f8f2ac851632a23ef69df2bd99dad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab76f8f2ac851632a23ef69df2bd99dad">&#9670;&#160;</a></span>$config</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">array $config</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Конфигурация приложения. </p>

<p class="definition">См. определение в файле <a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a> строка <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00120">120</a></p>

<p class="reference">Используется в <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00151">__construct()</a> и <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00199">__get()</a>.</p>

</div>
</div>
<a id="a015aa0bda28030cbf1a64c0afb88f958" name="a015aa0bda28030cbf1a64c0afb88f958"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a015aa0bda28030cbf1a64c0afb88f958">&#9670;&#160;</a></span>$fh</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$fh = fopen($full_path, 'rb')</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a> строка <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00822">822</a></p>

</div>
</div>
<a id="a7a835ab7aded33c3c34cd60ab84ae6c7" name="a7a835ab7aded33c3c34cd60ab84ae6c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a835ab7aded33c3c34cd60ab84ae6c7">&#9670;&#160;</a></span>$file_size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if (! $mime_type||!str_starts_with( $mime_type, 'image/')) $file_size = filesize($full_path)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a> строка <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00800">800</a></p>

</div>
</div>
<a id="a4d1985caafb49b059e3ca3dedfee257a" name="a4d1985caafb49b059e3ca3dedfee257a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d1985caafb49b059e3ca3dedfee257a">&#9670;&#160;</a></span>$mime_type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$mime_type = finfo_file($finfo, $full_path)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Выводит изображение через HTTP через вызов внутреннего метода. </p>
<p>Этот публичный метод является обёрткой для защищённого метода _image_attach_internal(). Он проверяет существование и доступность файла, определяет его MIME-тип и отправляет содержимое файла через HTTP. Метод также доступен через метод-фасад <code>image_attach()</code> в родительском классе.</p>
<p>Вызывать этот метод напрямую, минуя метод-фасад родительского класса, крайне не рекомендуется. В противном случае поведение метода может быть непредсказуемым.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$full_path</td><td>Полный путь к файлу:<ul>
<li>Путь должен быть абсолютным.</li>
<li>Файл должен существовать и быть доступным для чтения. </li>
</ul>
</td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$name_file</td><td>Имя файла для заголовка <code>Content-Disposition</code>:<ul>
<li>Имя должно быть корректным (например, без запрещённых символов).</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>void Метод ничего не возвращает. Завершает выполнение скрипта после отправки заголовков и содержимого файла.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td>Если произошла ошибка при отправке файла или определении его MIME-типа.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод завершает выполнение скрипта (<code>exit</code>), отправляя заголовки и содержимое файла. Убедитесь, что файл существует и доступен для чтения перед вызовом метода. Вызывать этот метод напрямую, минуя метод-фасад родительского класса, крайне не рекомендуется.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание экземпляра класса Work_Image</span></div>
<div class="line">$image = new \PhotoRigma\Classes\Work_Image();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Вызов метода для вывода изображения через HTTP</span></div>
<div class="line">$image-&gt;image_attach(<span class="stringliteral">&#39;/path/to/image.jpg&#39;</span>, <span class="stringliteral">&#39;example.jpg&#39;</span>);</div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd>PhotoRigma::Classes::Work_Image::_image_attach_internal() Защищённый метод, выполняющий основную логику. </dd>
<dd>
PhotoRigma::Classes::Work::image_attach() Метод-фасад в родительском классе для вызова этой логики.</dd></dl>
<p>Вывод изображения через HTTP.</p>
<p>Этот защищённый метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет существование и доступность файла:<ul>
<li>Если файл не существует или недоступен для чтения, отправляется HTTP-статус <code>404 Not Found</code>.</li>
</ul>
</li>
<li>Определяет MIME-тип файла с помощью <code>finfo_open(FILEINFO_MIME_TYPE)</code>:<ul>
<li>Если MIME-тип не начинается с <code>image/</code>, отправляется HTTP-статус <code>500 Internal Server Error</code>.</li>
</ul>
</li>
<li>Проверяет размер файла:<ul>
<li>Если размер превышает 10 МБ или неизвестен, отправляется HTTP-статус <code>413 Payload Too Large</code>.</li>
</ul>
</li>
<li>Устанавливает заголовки для вывода изображения:<ul>
<li><code>Content-Type</code>: MIME-тип файла.</li>
<li><code>Content-Disposition</code>: Имя файла для заголовка.</li>
<li><code>Content-Length</code>: Размер файла.</li>
<li>Дополнительные заголовки безопасности: <code>X-Content-Type-Options</code>, <code>X-Frame-Options</code>, <code>X-XSS-Protection</code>, <code>Referrer-Policy</code>, <code>Content-Security-Policy</code>.</li>
</ul>
</li>
<li>Открывает файл в режиме чтения и отправляет его содержимое через <code>fpassthru()</code>.</li>
<li>Завершает выполнение скрипта после отправки заголовков и содержимого файла. Метод вызывается через публичный метод <code>image_attach()</code> и предназначен для использования внутри класса или его наследников.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$full_path</td><td>Полный путь к файлу. Путь должен быть абсолютным, и файл должен существовать и быть доступным для чтения. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$name_file</td><td>Имя файла для заголовка <code>Content-Disposition</code>. Имя должно быть корректным (например, без запрещённых символов).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>void Метод ничего не возвращает. Завершает выполнение скрипта после отправки заголовков и содержимого файла.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td>При возникновении ошибок логирования информации через <code>log_in_file</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Метод завершает выполнение скрипта (<code>exit</code>), отправляя заголовки и содержимое файла. Дополнительные заголовки безопасности:<ul>
<li><code>X-Content-Type-Options: nosniff</code></li>
<li><code>X-Frame-Options: DENY</code></li>
<li><code>X-XSS-Protection: 1; mode=block</code></li>
<li><code>Referrer-Policy: no-referrer</code></li>
<li>&lsquo;Content-Security-Policy: default-src 'self&rsquo;; img-src 'self' data:;`</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод завершает выполнение скрипта (<code>exit</code>), отправляя заголовки и содержимое файла. Убедитесь, что файл существует и доступен для чтения перед вызовом метода.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Вызов защищённого метода внутри класса или наследника</span></div>
<div class="line">$this-&gt;_image_attach_internal(<span class="stringliteral">&#39;/path/to/image.jpg&#39;</span>, <span class="stringliteral">&#39;example.jpg&#39;</span>);</div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="../../db/d02/namespacePhotoRigma_1_1Include.html#a2d74c46a21e4ce612a98eee60981aef0" title="Записывает сообщение об ошибке в лог-файл и, при необходимости, завершает выполнение скрипта.">PhotoRigma\Include\log_in_file()</a> Функция для логирования ошибок. </dd>
<dd>
<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a8ecb9d3a6cba675b7a2d72ddc14b53f3" title="Очищает строку от HTML-тегов и специальных символов через вызов публичного метода в дочернем классе.">PhotoRigma\Classes\Work\clean_field()</a> Метод для очистки имени файла. </dd>
<dd>
<a class="el" href="../../d1/de5/interfacePhotoRigma_1_1Interfaces_1_1Work__Image__Interface.html#aeabe138e0704bd8403da0faf894ad0df" title="Выводит изображение через HTTP.">PhotoRigma\Classes\Work_Image\image_attach()</a> Публичный метод, вызывающий этот защищённый метод. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a> строка <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00790">790</a></p>

<p class="reference">Используется в <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00968">_image_resize_internal()</a>.</p>

</div>
</div>
<a id="a6733eb5f605d09eaede9845835d71c4e" name="a6733eb5f605d09eaede9845835d71c4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6733eb5f605d09eaede9845835d71c4e">&#9670;&#160;</a></span>exit</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">exit</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a> строка <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00832">832</a></p>

</div>
</div>
<a id="a09a081b5d674123079734cef551329c9" name="a09a081b5d674123079734cef551329c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09a081b5d674123079734cef551329c9">&#9670;&#160;</a></span>MAX_IMAGE_HEIGHT</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int MAX_IMAGE_HEIGHT = 5000</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Максимальная высота изображения (в пикселях) </p>

<p class="definition">См. определение в файле <a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a> строка <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00119">119</a></p>

</div>
</div>
<a id="a030bd442b445d4a25e28afd6b37accc6" name="a030bd442b445d4a25e28afd6b37accc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a030bd442b445d4a25e28afd6b37accc6">&#9670;&#160;</a></span>MAX_IMAGE_WIDTH</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int MAX_IMAGE_WIDTH = 5000</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Максимальная ширина изображения (в пикселях) </p>

<p class="definition">См. определение в файле <a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a> строка <a class="el" href="../../dd/dbc/Work__Image_8php_source.html#l00118">118</a></p>

</div>
</div>
<hr/>Объявления и описания членов класса находятся в файле:<ul>
<li>include/<a class="el" href="../../dd/dbc/Work__Image_8php_source.html">Work_Image.php</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../de/d90/namespacePhotoRigma.html">PhotoRigma</a></li><li class="navelem"><a class="el" href="../../d6/dc3/namespacePhotoRigma_1_1Classes.html">Classes</a></li><li class="navelem"><a class="el" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html">Work_Image</a></li>
    <li class="footer">Создано системой <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
