<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Photo-Rigma-BiZ: Класс Work_Image</title>
<link rel="icon" href="../../favicon.ico" type="image/x-icon" />
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo-1.png"/></td>
  <td id="projectalign">
   <div id="projectname">Photo-Rigma-BiZ<span id="projectnumber">&#160;0.4.0</span>
   </div>
   <div id="projectbrief">Gallery_Photo-Rigma-BiZ</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Поиск',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Загрузка...</div>
<div class="SRStatus" id="Searching">Поиск...</div>
<div class="SRStatus" id="NoMatches">Не найдено</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Открытые члены</a> &#124;
<a href="#pub-attribs">Открытые атрибуты</a> &#124;
<a href="#pro-methods">Защищенные члены</a> &#124;
<a href="#pri-methods">Закрытые члены</a> &#124;
<a href="#pri-attribs">Закрытые данные</a> &#124;
<a href="../../d5/d90/classPhotoRigma_1_1Classes_1_1Work__Image-members.html">Полный список членов класса</a>  </div>
  <div class="headertitle"><div class="title">Класс Work_Image</div></div>
</div><!--header-->
<div class="contents">

<p>Класс для работы с изображениями.  
 <a href="#details">Подробнее...</a></p>
<div id="dynsection-0" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Граф наследования:Work_Image:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d7/de5/classPhotoRigma_1_1Classes_1_1Work__Image__inherit__graph.png" border="0" usemap="#aWork__Image_inherit__map" alt="Inheritance graph"/></div>
<map name="aWork__Image_inherit__map" id="aWork__Image_inherit__map">
<area shape="rect" title="Класс для работы с изображениями." alt="" coords="34,78,129,103"/>
<area shape="rect" href="../../d2/daa/interfacePhotoRigma_1_1Classes_1_1Work__Image__Interface.html" title="Интерфейс для работы с изображениями." alt="" coords="5,5,158,30"/>
<area shape="poly" title=" " alt="" coords="84,46,84,78,79,78,79,46"/>
</map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">см. легенду</a>]</span></center></div>
<div id="dynsection-1" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Граф связей класса Work_Image:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d3/d59/classPhotoRigma_1_1Classes_1_1Work__Image__coll__graph.png" border="0" usemap="#aWork__Image_coll__map" alt="Collaboration graph"/></div>
<map name="aWork__Image_coll__map" id="aWork__Image_coll__map">
<area shape="rect" title="Класс для работы с изображениями." alt="" coords="34,78,129,103"/>
<area shape="rect" href="../../d2/daa/interfacePhotoRigma_1_1Classes_1_1Work__Image__Interface.html" title="Интерфейс для работы с изображениями." alt="" coords="5,5,158,30"/>
<area shape="poly" title=" " alt="" coords="84,46,84,78,79,78,79,46"/>
</map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">см. легенду</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Открытые члены</h2></td></tr>
<tr class="memitem:a1538e33cc82d38ead75aba61979dbcf9" id="r_a1538e33cc82d38ead75aba61979dbcf9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1538e33cc82d38ead75aba61979dbcf9">__construct</a> (array $config)</td></tr>
<tr class="memdesc:a1538e33cc82d38ead75aba61979dbcf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Конструктор класса.  <br /></td></tr>
<tr class="separator:a1538e33cc82d38ead75aba61979dbcf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96d631a05b563f91f5494b409b357cbc" id="r_a96d631a05b563f91f5494b409b357cbc"><td class="memItemLeft" align="right" valign="top">&amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a96d631a05b563f91f5494b409b357cbc">__get</a> (string $name)</td></tr>
<tr class="memdesc:a96d631a05b563f91f5494b409b357cbc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Получает значение приватного свойства.  <br /></td></tr>
<tr class="separator:a96d631a05b563f91f5494b409b357cbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c8aa5e8f1335dd150232b9ba442d694" id="r_a7c8aa5e8f1335dd150232b9ba442d694"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7c8aa5e8f1335dd150232b9ba442d694">__set</a> (string $name, array $value)</td></tr>
<tr class="memdesc:a7c8aa5e8f1335dd150232b9ba442d694"><td class="mdescLeft">&#160;</td><td class="mdescRight">Устанавливает значение приватного свойства.  <br /></td></tr>
<tr class="separator:a7c8aa5e8f1335dd150232b9ba442d694"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c45daa80235f514090aa7789f5e93b3" id="r_a0c45daa80235f514090aa7789f5e93b3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0c45daa80235f514090aa7789f5e93b3">__isset</a> (string $name)</td></tr>
<tr class="separator:a0c45daa80235f514090aa7789f5e93b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a935337e705b7a1b9ea422d2e04932109" id="r_a935337e705b7a1b9ea422d2e04932109"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a935337e705b7a1b9ea422d2e04932109">create_directory</a> (string $directory_name)</td></tr>
<tr class="memdesc:a935337e705b7a1b9ea422d2e04932109"><td class="mdescLeft">&#160;</td><td class="mdescRight">Создает директории для категории и копирует файлы index.php через вызов защищённого метода.  <br /></td></tr>
<tr class="separator:a935337e705b7a1b9ea422d2e04932109"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89d4e7cb491d0c91282d16ff5abe3138" id="r_a89d4e7cb491d0c91282d16ff5abe3138"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a89d4e7cb491d0c91282d16ff5abe3138">fix_file_extension</a> (string $full_path)</td></tr>
<tr class="memdesc:a89d4e7cb491d0c91282d16ff5abe3138"><td class="mdescLeft">&#160;</td><td class="mdescRight">Корректировка расширения файла в соответствии с его MIME-типом (публичный интерфейс).  <br /></td></tr>
<tr class="separator:a89d4e7cb491d0c91282d16ff5abe3138"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af37eb2b0693905dd71dd677f86d47831" id="r_af37eb2b0693905dd71dd677f86d47831"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af37eb2b0693905dd71dd677f86d47831">image_resize</a> (string $full_path, string $thumbnail_path)</td></tr>
<tr class="memdesc:af37eb2b0693905dd71dd677f86d47831"><td class="mdescLeft">&#160;</td><td class="mdescRight">Изменяет размер изображения.  <br /></td></tr>
<tr class="separator:af37eb2b0693905dd71dd677f86d47831"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfcd1cb7963a860013ca9ca1898f54f1" id="r_adfcd1cb7963a860013ca9ca1898f54f1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adfcd1cb7963a860013ca9ca1898f54f1">no_photo</a> ()</td></tr>
<tr class="memdesc:adfcd1cb7963a860013ca9ca1898f54f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Возвращает данные для отсутствующего изображения.  <br /></td></tr>
<tr class="separator:adfcd1cb7963a860013ca9ca1898f54f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaaf358ddc8223e4a5a479f645fc43da8" id="r_aaaf358ddc8223e4a5a479f645fc43da8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaaf358ddc8223e4a5a479f645fc43da8">remove_directory</a> (string $path)</td></tr>
<tr class="memdesc:aaaf358ddc8223e4a5a479f645fc43da8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Удаляет директорию и её содержимое через вызов защищённого метода <code>_remove_directory_internal()</code>.  <br /></td></tr>
<tr class="separator:aaaf358ddc8223e4a5a479f645fc43da8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a096b7e5c3f9fb908fbb30e1adc2ac61b" id="r_a096b7e5c3f9fb908fbb30e1adc2ac61b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a096b7e5c3f9fb908fbb30e1adc2ac61b">size_image</a> (string $path_image)</td></tr>
<tr class="memdesc:a096b7e5c3f9fb908fbb30e1adc2ac61b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Вычисляет размеры для вывода эскиза изображения.  <br /></td></tr>
<tr class="separator:a096b7e5c3f9fb908fbb30e1adc2ac61b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_interfacePhotoRigma_1_1Classes_1_1Work__Image__Interface"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_methods_interfacePhotoRigma_1_1Classes_1_1Work__Image__Interface')"><img src="../../closed.png" alt="-"/>&#160;Открытые члены унаследованные от <a class="el" href="../../d2/daa/interfacePhotoRigma_1_1Classes_1_1Work__Image__Interface.html">Work_Image_Interface</a></td></tr>
<tr class="memitem:aeabe138e0704bd8403da0faf894ad0df inherit pub_methods_interfacePhotoRigma_1_1Classes_1_1Work__Image__Interface" id="r_aeabe138e0704bd8403da0faf894ad0df"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/daa/interfacePhotoRigma_1_1Classes_1_1Work__Image__Interface.html#aeabe138e0704bd8403da0faf894ad0df">image_attach</a> (string $full_path, string $name_file)</td></tr>
<tr class="memdesc:aeabe138e0704bd8403da0faf894ad0df inherit pub_methods_interfacePhotoRigma_1_1Classes_1_1Work__Image__Interface"><td class="mdescLeft">&#160;</td><td class="mdescRight">Вывод изображения через HTTP.  <br /></td></tr>
<tr class="separator:aeabe138e0704bd8403da0faf894ad0df inherit pub_methods_interfacePhotoRigma_1_1Classes_1_1Work__Image__Interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Открытые атрибуты</h2></td></tr>
<tr class="memitem:a4d1985caafb49b059e3ca3dedfee257a" id="r_a4d1985caafb49b059e3ca3dedfee257a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4d1985caafb49b059e3ca3dedfee257a">$mime_type</a> = finfo_file($finfo, $full_path)</td></tr>
<tr class="memdesc:a4d1985caafb49b059e3ca3dedfee257a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Вывод изображения через HTTP.  <br /></td></tr>
<tr class="separator:a4d1985caafb49b059e3ca3dedfee257a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a835ab7aded33c3c34cd60ab84ae6c7" id="r_a7a835ab7aded33c3c34cd60ab84ae6c7"><td class="memItemLeft" align="right" valign="top">if(! $mime_type||!str_starts_with($mime_type, 'image/'))&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7a835ab7aded33c3c34cd60ab84ae6c7">$file_size</a> = filesize($full_path)</td></tr>
<tr class="separator:a7a835ab7aded33c3c34cd60ab84ae6c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a015aa0bda28030cbf1a64c0afb88f958" id="r_a015aa0bda28030cbf1a64c0afb88f958"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a015aa0bda28030cbf1a64c0afb88f958">$fh</a> = fopen($full_path, 'rb')</td></tr>
<tr class="separator:a015aa0bda28030cbf1a64c0afb88f958"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6733eb5f605d09eaede9845835d71c4e" id="r_a6733eb5f605d09eaede9845835d71c4e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6733eb5f605d09eaede9845835d71c4e">exit</a></td></tr>
<tr class="separator:a6733eb5f605d09eaede9845835d71c4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Защищенные члены</h2></td></tr>
<tr class="memitem:ae77f64cb663e7c3c35e7cbcdfd846cf2" id="r_ae77f64cb663e7c3c35e7cbcdfd846cf2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae77f64cb663e7c3c35e7cbcdfd846cf2">_create_directory_internal</a> (string $directory_name)</td></tr>
<tr class="memdesc:ae77f64cb663e7c3c35e7cbcdfd846cf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Создает директории для категории и копирует файлы index.php, предварительно проверяя права доступа.  <br /></td></tr>
<tr class="separator:ae77f64cb663e7c3c35e7cbcdfd846cf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7cd1deb24cdf852e9981eb4f2665ff1" id="r_af7cd1deb24cdf852e9981eb4f2665ff1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af7cd1deb24cdf852e9981eb4f2665ff1">_fix_file_extension_internal</a> (string $full_path)</td></tr>
<tr class="memdesc:af7cd1deb24cdf852e9981eb4f2665ff1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Корректировка расширения файла в соответствии с его MIME-типом (защищённый метод).  <br /></td></tr>
<tr class="separator:af7cd1deb24cdf852e9981eb4f2665ff1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f18185f2629abbc3bf148d8addfcfe8" id="r_a7f18185f2629abbc3bf148d8addfcfe8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7f18185f2629abbc3bf148d8addfcfe8">_image_resize_internal</a> (string $full_path, string $thumbnail_path)</td></tr>
<tr class="memdesc:a7f18185f2629abbc3bf148d8addfcfe8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Изменяет размер изображения.  <br /></td></tr>
<tr class="separator:a7f18185f2629abbc3bf148d8addfcfe8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b5c40822e7f0dcc8beb47dad2660286" id="r_a2b5c40822e7f0dcc8beb47dad2660286"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2b5c40822e7f0dcc8beb47dad2660286">_no_photo_internal</a> ()</td></tr>
<tr class="memdesc:a2b5c40822e7f0dcc8beb47dad2660286"><td class="mdescLeft">&#160;</td><td class="mdescRight">Возвращает данные для отсутствующего изображения.  <br /></td></tr>
<tr class="separator:a2b5c40822e7f0dcc8beb47dad2660286"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16c229fbb1b62aee5791544bc1086248" id="r_a16c229fbb1b62aee5791544bc1086248"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a16c229fbb1b62aee5791544bc1086248">_remove_directory_internal</a> (string $path)</td></tr>
<tr class="memdesc:a16c229fbb1b62aee5791544bc1086248"><td class="mdescLeft">&#160;</td><td class="mdescRight">Удаляет директорию и её содержимое, предварительно проверяя права доступа.  <br /></td></tr>
<tr class="separator:a16c229fbb1b62aee5791544bc1086248"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a887f702cc34cf74259c6f10365fc6c9b" id="r_a887f702cc34cf74259c6f10365fc6c9b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a887f702cc34cf74259c6f10365fc6c9b">_size_image_internal</a> (string $path_image)</td></tr>
<tr class="memdesc:a887f702cc34cf74259c6f10365fc6c9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Вычисляет размеры для вывода эскиза изображения.  <br /></td></tr>
<tr class="separator:a887f702cc34cf74259c6f10365fc6c9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Закрытые члены</h2></td></tr>
<tr class="memitem:a6154fb2649a1052f31514aed4818ad2c" id="r_a6154fb2649a1052f31514aed4818ad2c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6154fb2649a1052f31514aed4818ad2c">process_image_resize_gmagick</a> (array $original_data, array $thumbnail_data)</td></tr>
<tr class="memdesc:a6154fb2649a1052f31514aed4818ad2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Обработка создания эскиза изображения с использованием библиотеки GraphicsMagick.  <br /></td></tr>
<tr class="separator:a6154fb2649a1052f31514aed4818ad2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab09fc88efda540da282034ef94d4ab74" id="r_ab09fc88efda540da282034ef94d4ab74"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab09fc88efda540da282034ef94d4ab74">process_image_resize_imagick</a> (array $original_data, array $thumbnail_data)</td></tr>
<tr class="memdesc:ab09fc88efda540da282034ef94d4ab74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Обработка создания эскиза изображения с использованием библиотеки ImageMagick.  <br /></td></tr>
<tr class="separator:ab09fc88efda540da282034ef94d4ab74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afaedd403d60cd5b36facbf5414e5b6ce" id="r_afaedd403d60cd5b36facbf5414e5b6ce"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afaedd403d60cd5b36facbf5414e5b6ce">process_image_resize_gd</a> (array $original_data, array $thumbnail_data)</td></tr>
<tr class="memdesc:afaedd403d60cd5b36facbf5414e5b6ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Обработка создания эскиза изображения с использованием библиотеки GD.  <br /></td></tr>
<tr class="separator:afaedd403d60cd5b36facbf5414e5b6ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87a203ec3e8e0964cd9637de5d35d22c" id="r_a87a203ec3e8e0964cd9637de5d35d22c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a87a203ec3e8e0964cd9637de5d35d22c">calculate_thumbnail_size</a> (array $size)</td></tr>
<tr class="memdesc:a87a203ec3e8e0964cd9637de5d35d22c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Расчёт размера эскиза.  <br /></td></tr>
<tr class="separator:a87a203ec3e8e0964cd9637de5d35d22c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Закрытые данные</h2></td></tr>
<tr class="memitem:a030bd442b445d4a25e28afd6b37accc6" id="r_a030bd442b445d4a25e28afd6b37accc6"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a030bd442b445d4a25e28afd6b37accc6">MAX_IMAGE_WIDTH</a> = 5000</td></tr>
<tr class="memdesc:a030bd442b445d4a25e28afd6b37accc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Максимальная ширина изображения (в пикселях)  <br /></td></tr>
<tr class="separator:a030bd442b445d4a25e28afd6b37accc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09a081b5d674123079734cef551329c9" id="r_a09a081b5d674123079734cef551329c9"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a09a081b5d674123079734cef551329c9">MAX_IMAGE_HEIGHT</a> = 5000</td></tr>
<tr class="memdesc:a09a081b5d674123079734cef551329c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Максимальная высота изображения (в пикселях)  <br /></td></tr>
<tr class="separator:a09a081b5d674123079734cef551329c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab76f8f2ac851632a23ef69df2bd99dad" id="r_ab76f8f2ac851632a23ef69df2bd99dad"><td class="memItemLeft" align="right" valign="top">array&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab76f8f2ac851632a23ef69df2bd99dad">$config</a></td></tr>
<tr class="memdesc:ab76f8f2ac851632a23ef69df2bd99dad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Конфигурация приложения.  <br /></td></tr>
<tr class="separator:ab76f8f2ac851632a23ef69df2bd99dad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Подробное описание</h2>
<div class="textblock"><p>Класс для работы с изображениями. </p>
<p>Класс <code>Work_Image</code> реализует интерфейс <code>Work_Image_Interface</code> и предоставляет методы для:</p><ul>
<li>Загрузки, обработки и сохранения изображений.</li>
<li>Изменения размеров изображений с использованием библиотек GraphicsMagick, ImageMagick или GD.</li>
<li>Применения фильтров и эффектов к изображениям.</li>
<li>Работы с различными форматами изображений (JPEG, PNG, GIF, WebP и др.).</li>
<li>Вывода изображений через HTTP с защитой от MIME-sniffing и кликджекинга.</li>
<li>Логирования ошибок через функцию <code>log_in_file</code>.</li>
<li>Корректировки расширения файла в соответствии с его MIME-типом.</li>
</ul>
<dl class="section see"><dt>См. также</dt><dd><a class="el" href="../../d2/daa/interfacePhotoRigma_1_1Classes_1_1Work__Image__Interface.html" title="Интерфейс для работы с изображениями.">PhotoRigma\Classes\Work_Image_Interface</a> Интерфейс для работы с изображениями. </dd>
<dd>
<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html">PhotoRigma\Classes\Work</a> Родительский класс, от которого наследуется текущий класс. </dd>
<dd>
<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a8ecb9d3a6cba675b7a2d72ddc14b53f3" title="Очистка строки от HTML-тегов и специальных символов.">PhotoRigma\Classes\Work\clean_field()</a> Метод для очистки данных. </dd>
<dd>
<a class="el" href="../../db/d02/namespacePhotoRigma_1_1Include.html#a2d74c46a21e4ce612a98eee60981aef0" title="Записывает сообщение об ошибке в лог-файл и, при необходимости, завершает выполнение скрипта.">PhotoRigma\Include\log_in_file</a> Функция для логирования ошибок.</dd></dl>
<dl class="section note"><dt>Заметки</dt><dd>Этот класс реализует интерфейс <code>Work_Image_Interface</code>. Используются константы:<ul>
<li><code>MAX_IMAGE_WIDTH = 5000</code>: Максимальная ширина изображения (в пикселях).</li>
<li><code>MAX_IMAGE_HEIGHT = 5000</code>: Максимальная высота изображения (в пикселях).</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Не используйте этот класс напрямую, все вызовы должны выполняться через класс <code>Work</code>.</dd></dl>
<p>Пример использования класса: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта класса Work_Image</span></div>
<div class="line"><a class="code hl_variable" href="#ab76f8f2ac851632a23ef69df2bd99dad">$config</a> = [</div>
<div class="line">    <span class="stringliteral">&#39;site_url&#39;</span> =&gt; <span class="stringliteral">&#39;https://example.com&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;temp_photo_w&#39;</span> =&gt; 800,</div>
<div class="line">    <span class="stringliteral">&#39;temp_photo_h&#39;</span> =&gt; 600,</div>
<div class="line">];</div>
<div class="line">$image = new \PhotoRigma\Classes\Work_Image(<a class="code hl_variable" href="#ab76f8f2ac851632a23ef69df2bd99dad">$config</a>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Вызов метода через класс Work</span></div>
<div class="line">$image-&gt;resize_image(<span class="stringliteral">&#39;/path/to/source.jpg&#39;</span>, <span class="stringliteral">&#39;/path/to/thumbnail.jpg&#39;</span>);</div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Image_html_ab76f8f2ac851632a23ef69df2bd99dad"><div class="ttname"><a href="#ab76f8f2ac851632a23ef69df2bd99dad">PhotoRigma\Classes\Work_Image\$config</a></div><div class="ttdeci">array $config</div><div class="ttdoc">Конфигурация приложения.</div><div class="ttdef"><b>Определения</b> <a href="../../de/d67/work__image_8php_source.html#l00436">work_image.php:436</a></div></div>
</div><!-- fragment --> 
<p class="definition">См. определение в файле <a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a> строка <a class="el" href="../../de/d67/work__image_8php_source.html#l00431">431</a></p>
</div><h2 class="groupheader">Конструктор(ы)</h2>
<a id="a1538e33cc82d38ead75aba61979dbcf9" name="a1538e33cc82d38ead75aba61979dbcf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1538e33cc82d38ead75aba61979dbcf9">&#9670;&#160;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__construct </td>
          <td>(</td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$config</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Конструктор класса. </p>
<p>Инициализирует объект класса <code>Work_Image</code> с переданной конфигурацией. Этот класс является дочерним для <a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html">PhotoRigma\Classes\Work</a>.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$config</td><td>Конфигурация приложения. Должен быть массивом. Если передан некорректный тип, выбрасывается исключение.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Если параметр $config не является массивом.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Конфигурация должна содержать все необходимые параметры для корректной работы класса. Параметры сохраняются в свойство $this-&gt;config.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Отсутствие необходимых ключей в массиве $config может привести к ошибкам при работе класса. Убедитесь, что конфигурация содержит все требуемые параметры.</dd></dl>
<p>Пример использования конструктора: </p><div class="fragment"><div class="line"><a class="code hl_variable" href="#ab76f8f2ac851632a23ef69df2bd99dad">$config</a> = [</div>
<div class="line">    <span class="stringliteral">&#39;temp_photo_w&#39;</span> =&gt; 800,</div>
<div class="line">    <span class="stringliteral">&#39;temp_photo_h&#39;</span> =&gt; 600,</div>
<div class="line">];</div>
<div class="line">$workImage = new \PhotoRigma\Classes\Work_Image(<a class="code hl_variable" href="#ab76f8f2ac851632a23ef69df2bd99dad">$config</a>);</div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html">PhotoRigma\Classes\Work</a> Родительский класс, который создаёт объект класса Work_Image. </dd>
<dd>
<a class="el" href="#ab76f8f2ac851632a23ef69df2bd99dad" title="Конфигурация приложения.">PhotoRigma\Classes\Work_Image\$config</a> Свойство, содержащее конфигурацию приложения. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a> строка <a class="el" href="../../de/d67/work__image_8php_source.html#l00470">470</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../de/d67/work__image_8php_source.html#l00436">$config</a>.</p>

</div>
</div>
<h2 class="groupheader">Методы</h2>
<a id="a96d631a05b563f91f5494b409b357cbc" name="a96d631a05b563f91f5494b409b357cbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96d631a05b563f91f5494b409b357cbc">&#9670;&#160;</a></span>__get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">&amp; __get </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$name</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Получает значение приватного свойства. </p>
<p>Метод позволяет получить доступ к приватному свойству <code>$config</code>. Если запрашиваемое свойство не существует, выбрасывается исключение.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$name</td><td>Имя свойства:<ul>
<li>Допустимое значение: 'config'.</li>
<li>Если указано другое имя, выбрасывается исключение.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>mixed Значение свойства <code>$config</code>.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Если запрашиваемое свойство не существует.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Этот метод предназначен только для доступа к свойству <code>$config</code>. Любые другие запросы будут игнорироваться с выбросом исключения.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Попытка доступа к несуществующему свойству вызовет исключение. Убедитесь, что вы запрашиваете только допустимые свойства.</dd></dl>
<p>Пример использования метода: </p><div class="fragment"><div class="line">$workImage = new \PhotoRigma\Classes\Work_Image([<span class="stringliteral">&#39;temp_photo_w&#39;</span> =&gt; 800]);</div>
<div class="line">echo $workImage-&gt;config[<span class="stringliteral">&#39;temp_photo_w&#39;</span>]; <span class="comment">// Выведет: 800</span></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#ab76f8f2ac851632a23ef69df2bd99dad" title="Конфигурация приложения.">PhotoRigma\Classes\Work_Image\$config</a> Свойство, к которому обращается метод. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a> строка <a class="el" href="../../de/d67/work__image_8php_source.html#l00506">506</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../de/d67/work__image_8php_source.html#l00436">$config</a>.</p>

</div>
</div>
<a id="a0c45daa80235f514090aa7789f5e93b3" name="a0c45daa80235f514090aa7789f5e93b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c45daa80235f514090aa7789f5e93b3">&#9670;&#160;</a></span>__isset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__isset </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$name</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a> строка <a class="el" href="../../de/d67/work__image_8php_source.html#l00560">560</a></p>

</div>
</div>
<a id="a7c8aa5e8f1335dd150232b9ba442d694" name="a7c8aa5e8f1335dd150232b9ba442d694"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c8aa5e8f1335dd150232b9ba442d694">&#9670;&#160;</a></span>__set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__set </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$value</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Устанавливает значение приватного свойства. </p>
<p>Метод позволяет изменить значение приватного свойства <code>$config</code>. Если переданное имя свойства не соответствует <code>$config</code>, выбрасывается исключение.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$name</td><td>Имя свойства:<ul>
<li>Допустимое значение: 'config'.</li>
<li>Если указано другое имя, выбрасывается исключение. </li>
</ul>
</td></tr>
    <tr><td class="paramtype">mixed</td><td class="paramname">$value</td><td>Новое значение свойства:<ul>
<li>Может быть любого типа, но рекомендуется использовать массив для конфигурации.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Если переданное имя свойства не соответствует <code>$config</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Этот метод предназначен только для изменения свойства <code>$config</code>. Любые другие попытки установки значений будут игнорироваться с выбросом исключения.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Попытка установки значения для несуществующего свойства вызовет исключение. Убедитесь, что вы устанавливаете значение только для допустимых свойств.</dd></dl>
<p>Пример использования метода: </p><div class="fragment"><div class="line">$workImage = new \PhotoRigma\Classes\Work_Image([]);</div>
<div class="line">$workImage-&gt;config = [<span class="stringliteral">&#39;temp_photo_w&#39;</span> =&gt; 1024];</div>
<div class="line">echo $workImage-&gt;config[<span class="stringliteral">&#39;temp_photo_w&#39;</span>]; <span class="comment">// Выведет: 1024</span></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#ab76f8f2ac851632a23ef69df2bd99dad" title="Конфигурация приложения.">PhotoRigma\Classes\Work_Image\$config</a> Свойство, которое изменяет метод. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a> строка <a class="el" href="../../de/d67/work__image_8php_source.html#l00549">549</a></p>

</div>
</div>
<a id="ae77f64cb663e7c3c35e7cbcdfd846cf2" name="ae77f64cb663e7c3c35e7cbcdfd846cf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae77f64cb663e7c3c35e7cbcdfd846cf2">&#9670;&#160;</a></span>_create_directory_internal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">_create_directory_internal </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$directory_name</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Создает директории для категории и копирует файлы index.php, предварительно проверяя права доступа. </p>
<p>Этот защищенный метод выполняет следующие действия:</p><ul>
<li>Проверяет права доступа к родительским директориям.</li>
<li>Рекурсивно создает директории для галереи и миниатюр.</li>
<li>Копирует и модифицирует файлы <code>index.php</code> для новой директории галереи и миниатюр. Метод вызывается через публичный метод-редирект <code><a class="el" href="#a935337e705b7a1b9ea422d2e04932109" title="Создает директории для категории и копирует файлы index.php через вызов защищённого метода.">PhotoRigma\Classes\Work_Image\create_directory()</a></code> и предназначен для использования внутри класса или его наследников.</li>
</ul>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$directory_name</td><td>Имя директории. Должен быть строкой, содержащей только допустимые символы для имён директорий. Не должен содержать запрещённых символов (например, <code>\/:*?"&lt;&gt;|&lt;/tt&gt;).

@return bool Возвращает &lt;tt&gt;true&lt;/tt&gt;, если директории успешно созданы и файлы скопированы.

@throws RuntimeException Выбрасывается исключение в следующих случаях:
                          - Если родительская директория недоступна для записи.
                          - Если не удалось создать директории.
                          - Если исходные файлы &lt;tt&gt;index.php&lt;/tt&gt; не существуют.
                          - Если не удалось прочитать или записать файлы &lt;tt&gt;index.php&lt;/tt&gt;.

@note    Метод использует конфигурационные параметры &lt;tt&gt;site_dir&lt;/tt&gt;, &lt;tt&gt;gallery_folder&lt;/tt&gt; и &lt;tt&gt;thumbnail_folder&lt;/tt&gt;.

@warning Используйте этот метод с осторожностью, так как он создаёт директории и изменяет файлы.

Пример вызова метода внутри класса или наследника:
@code 
$directoryName = 'new_category';
$result = $this-&gt;_create_directory_internal($directoryName);
if ($result) {
    echo "Директории успешно созданы!"; }  </code></td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>См. также</dt><dd><code> <a class="el" href="#a935337e705b7a1b9ea422d2e04932109" title="Создает директории для категории и копирует файлы index.php через вызов защищённого метода.">PhotoRigma\Classes\Work_Image\create_directory()</a> Публичный метод-редирект для вызова этой логики.</code></dd>
<dd>
<code> <a class="el" href="#ab76f8f2ac851632a23ef69df2bd99dad" title="Конфигурация приложения.">PhotoRigma\Classes\Work_Image\$config</a> Конфигурационные параметры, используемые для формирования путей. </code></dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a> строка <a class="el" href="../../de/d67/work__image_8php_source.html#l00654">654</a></p>

<p class="reference">Используется в <a class="el" href="../../de/d67/work__image_8php_source.html#l00608">create_directory()</a>.</p>
<div id="dynsection-2" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_ae77f64cb663e7c3c35e7cbcdfd846cf2_icgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_ae77f64cb663e7c3c35e7cbcdfd846cf2_icgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_ae77f64cb663e7c3c35e7cbcdfd846cf2_icgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_ae77f64cb663e7c3c35e7cbcdfd846cf2_icgraph">
<area shape="rect" title="Создает директории для категории и копирует файлы index.php, предварительно проверяя права доступа." alt="" coords="167,5,336,30"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a935337e705b7a1b9ea422d2e04932109" title="Создает директории для категории и копирует файлы index.php через вызов защищённого метода." alt="" coords="5,5,119,30"/>
<area shape="poly" title=" " alt="" coords="151,20,119,20,119,15,151,15"/>
</map>
</div>

</div>
</div>
<a id="af7cd1deb24cdf852e9981eb4f2665ff1" name="af7cd1deb24cdf852e9981eb4f2665ff1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7cd1deb24cdf852e9981eb4f2665ff1">&#9670;&#160;</a></span>_fix_file_extension_internal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">_fix_file_extension_internal </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$full_path</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Корректировка расширения файла в соответствии с его MIME-типом (защищённый метод). </p>
<p>Метод проверяет MIME-тип файла и корректирует его расширение на основе соответствия MIME-типу. Если у файла отсутствует расширение, оно добавляется автоматически. Если расширение уже корректное, файл остаётся без изменений. Этот метод является защищённым и предназначен для использования внутри класса или его наследников. Основная логика вызывается через публичный метод fix_file_extension().</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$full_path</td><td>Полный путь к файлу. Путь должен быть абсолютным, и файл должен существовать и быть доступным для чтения. Формат пути должен соответствовать регулярному выражению /^[a-zA-Z0-9\/.-_]+$/.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>string Полный путь к файлу с правильным расширением. Если расширение было изменено или добавлено, возвращается новый путь. Если расширение уже корректное, возвращается исходный путь.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Если путь к файлу некорректен, имеет недопустимый формат или файл не существует. </td></tr>
    <tr><td class="paramname">RuntimeException</td><td>Если MIME-тип файла не поддерживается или файл недоступен для чтения. </td></tr>
    <tr><td class="paramname">Exception</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод завершает выполнение с ошибкой, если MIME-тип файла не поддерживается. Убедитесь, что файл существует и доступен для чтения перед вызовом метода.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Корректировка расширения файла</span></div>
<div class="line">$full_path = <span class="stringliteral">&#39;/path/to/file_without_extension&#39;</span>;</div>
<div class="line">$corrected_path = $this-&gt;<a class="code hl_function" href="#af7cd1deb24cdf852e9981eb4f2665ff1">_fix_file_extension_internal</a>($full_path);</div>
<div class="line">echo <span class="stringliteral">&quot;Исправленный путь: {$corrected_path}&quot;</span>;</div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Image_html_af7cd1deb24cdf852e9981eb4f2665ff1"><div class="ttname"><a href="#af7cd1deb24cdf852e9981eb4f2665ff1">PhotoRigma\Classes\Work_Image\_fix_file_extension_internal</a></div><div class="ttdeci">_fix_file_extension_internal(string $full_path)</div><div class="ttdoc">Корректировка расширения файла в соответствии с его MIME-типом (защищённый метод).</div><div class="ttdef"><b>Определения</b> <a href="../../de/d67/work__image_8php_source.html#l00839">work_image.php:839</a></div></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#a89d4e7cb491d0c91282d16ff5abe3138" title="Корректировка расширения файла в соответствии с его MIME-типом (публичный интерфейс).">PhotoRigma\Classes\Work_Image\fix_file_extension()</a> Публичный метод, вызывающий этот защищённый метод. </dd>
<dd>
<a class="el" href="../../db/d02/namespacePhotoRigma_1_1Include.html#a2d74c46a21e4ce612a98eee60981aef0" title="Записывает сообщение об ошибке в лог-файл и, при необходимости, завершает выполнение скрипта.">PhotoRigma\Include\log_in_file()</a> Функция для логирования ошибок. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a> строка <a class="el" href="../../de/d67/work__image_8php_source.html#l00839">839</a></p>

<p class="reference">Используется в <a class="el" href="../../de/d67/work__image_8php_source.html#l00794">fix_file_extension()</a>.</p>
<div id="dynsection-3" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_af7cd1deb24cdf852e9981eb4f2665ff1_icgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_af7cd1deb24cdf852e9981eb4f2665ff1_icgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_af7cd1deb24cdf852e9981eb4f2665ff1_icgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_af7cd1deb24cdf852e9981eb4f2665ff1_icgraph">
<area shape="rect" title="Корректировка расширения файла в соответствии с его MIME&#45;типом (защищённый метод)." alt="" coords="172,5,297,44"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a89d4e7cb491d0c91282d16ff5abe3138" title="Корректировка расширения файла в соответствии с его MIME&#45;типом (публичный интерфейс)." alt="" coords="5,12,124,37"/>
<area shape="poly" title=" " alt="" coords="156,27,124,27,124,22,156,22"/>
</map>
</div>

</div>
</div>
<a id="a7f18185f2629abbc3bf148d8addfcfe8" name="a7f18185f2629abbc3bf148d8addfcfe8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f18185f2629abbc3bf148d8addfcfe8">&#9670;&#160;</a></span>_image_resize_internal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">_image_resize_internal </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$full_path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$thumbnail_path</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Изменяет размер изображения. </p>
<p>Метод изменяет размер исходного изображения и создаёт эскиз заданных размеров. Размеры эскиза рассчитываются на основе конфигурации (<code>temp_photo_w</code>, <code>temp_photo_h</code>) с использованием метода <code>calculate_thumbnail_size</code>. Если файл эскиза уже существует и его размеры совпадают с рассчитанными, метод завершает работу без изменений. В противном случае создаётся новый эскиз с использованием одной из доступных библиотек: GraphicsMagick, ImageMagick или GD (в порядке приоритета). Этот метод является защищённым и предназначен для использования внутри класса или его наследников. Основная логика метода вызывается через публичный метод image_resize().</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$full_path</td><td>Путь к исходному изображению. Путь должен быть абсолютным, и файл должен существовать и быть доступным для чтения. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$thumbnail_path</td><td>Путь для сохранения эскиза. Путь должен быть абсолютным, и директория должна быть доступна для записи.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>bool True, если операция выполнена успешно, иначе False.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Если пути к файлам некорректны или имеют недопустимый формат. </td></tr>
    <tr><td class="paramname">RuntimeException</td><td>Если возникли ошибки при проверке файлов, директорий или размеров изображения. </td></tr>
    <tr><td class="paramname">Exception</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод зависит от корректности данных в конфигурации (<code>temp_photo_w</code>, <code>temp_photo_h</code>). Если эти параметры некорректны, результат может быть непредсказуемым.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Изменение размера изображения</span></div>
<div class="line">$full_path = <span class="stringliteral">&#39;/path/to/source_image.jpg&#39;</span>;</div>
<div class="line">$thumbnail_path = <span class="stringliteral">&#39;/path/to/thumbnail.jpg&#39;</span>;</div>
<div class="line">$success = $this-&gt;<a class="code hl_function" href="#a7f18185f2629abbc3bf148d8addfcfe8">_image_resize_internal</a>($full_path, $thumbnail_path);</div>
<div class="line"><span class="keywordflow">if</span> ($success) {</div>
<div class="line">    echo <span class="stringliteral">&quot;Эскиз успешно создан.&quot;</span>;</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    echo <span class="stringliteral">&quot;Ошибка при создании эскиза.&quot;</span>;</div>
<div class="line">}</div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Image_html_a7f18185f2629abbc3bf148d8addfcfe8"><div class="ttname"><a href="#a7f18185f2629abbc3bf148d8addfcfe8">PhotoRigma\Classes\Work_Image\_image_resize_internal</a></div><div class="ttdeci">_image_resize_internal(string $full_path, string $thumbnail_path)</div><div class="ttdoc">Изменяет размер изображения.</div><div class="ttdef"><b>Определения</b> <a href="../../de/d67/work__image_8php_source.html#l01168">work_image.php:1168</a></div></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#af37eb2b0693905dd71dd677f86d47831" title="Изменяет размер изображения.">PhotoRigma\Classes\Work_Image\image_resize()</a> Публичный метод-редирект для вызова этой логики. </dd>
<dd>
<a class="el" href="#a87a203ec3e8e0964cd9637de5d35d22c" title="Расчёт размера эскиза.">PhotoRigma\Classes\Work_Image\calculate_thumbnail_size()</a> Метод для расчёта размеров эскиза. </dd>
<dd>
<a class="el" href="#a6154fb2649a1052f31514aed4818ad2c" title="Обработка создания эскиза изображения с использованием библиотеки GraphicsMagick.">PhotoRigma\Classes\Work_Image\process_image_resize_gmagick()</a> Обработка через GraphicsMagick. </dd>
<dd>
<a class="el" href="#ab09fc88efda540da282034ef94d4ab74" title="Обработка создания эскиза изображения с использованием библиотеки ImageMagick.">PhotoRigma\Classes\Work_Image\process_image_resize_imagick()</a> Обработка через ImageMagick. </dd>
<dd>
<a class="el" href="#afaedd403d60cd5b36facbf5414e5b6ce" title="Обработка создания эскиза изображения с использованием библиотеки GD.">PhotoRigma\Classes\Work_Image\process_image_resize_gd()</a> Обработка через GD. </dd>
<dd>
<a class="el" href="../../db/d02/namespacePhotoRigma_1_1Include.html#a2d74c46a21e4ce612a98eee60981aef0" title="Записывает сообщение об ошибке в лог-файл и, при необходимости, завершает выполнение скрипта.">PhotoRigma\Include\log_in_file()</a> Функция для логирования ошибок. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a> строка <a class="el" href="../../de/d67/work__image_8php_source.html#l01168">1168</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../de/d67/work__image_8php_source.html#l01012">$mime_type</a>, <a class="el" href="../../de/d67/work__image_8php_source.html#l02223">calculate_thumbnail_size()</a>, <a class="el" href="../../de/d67/work__image_8php_source.html#l01686">process_image_resize_gd()</a>, <a class="el" href="../../de/d67/work__image_8php_source.html#l01343">process_image_resize_gmagick()</a> и <a class="el" href="../../de/d67/work__image_8php_source.html#l01512">process_image_resize_imagick()</a>.</p>

<p class="reference">Используется в <a class="el" href="../../de/d67/work__image_8php_source.html#l01107">image_resize()</a>.</p>
<div id="dynsection-4" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a7f18185f2629abbc3bf148d8addfcfe8_cgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a7f18185f2629abbc3bf148d8addfcfe8_cgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a7f18185f2629abbc3bf148d8addfcfe8_cgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a7f18185f2629abbc3bf148d8addfcfe8_cgraph">
<area shape="rect" title="Изменяет размер изображения." alt="" coords="5,83,159,107"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a87a203ec3e8e0964cd9637de5d35d22c" title="Расчёт размера эскиза." alt="" coords="209,5,376,30"/>
<area shape="poly" title=" " alt="" coords="110,80,206,41,230,32,231,38,208,45,112,85"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#afaedd403d60cd5b36facbf5414e5b6ce" title="Обработка создания эскиза изображения с использованием библиотеки GD." alt="" coords="207,55,378,79"/>
<area shape="poly" title=" " alt="" coords="159,82,191,78,191,83,159,87"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a6154fb2649a1052f31514aed4818ad2c" title="Обработка создания эскиза изображения с использованием библиотеки GraphicsMagick." alt="" coords="217,104,368,142"/>
<area shape="poly" title=" " alt="" coords="159,103,202,108,201,114,159,108"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#ab09fc88efda540da282034ef94d4ab74" title="Обработка создания эскиза изображения с использованием библиотеки ImageMagick." alt="" coords="217,166,368,205"/>
<area shape="poly" title=" " alt="" coords="110,106,208,151,224,158,221,163,206,156,108,110"/>
</map>
</div>
<div id="dynsection-5" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a7f18185f2629abbc3bf148d8addfcfe8_icgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a7f18185f2629abbc3bf148d8addfcfe8_icgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a7f18185f2629abbc3bf148d8addfcfe8_icgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a7f18185f2629abbc3bf148d8addfcfe8_icgraph">
<area shape="rect" title="Изменяет размер изображения." alt="" coords="151,5,304,30"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#af37eb2b0693905dd71dd677f86d47831" title="Изменяет размер изображения." alt="" coords="5,5,103,30"/>
<area shape="poly" title=" " alt="" coords="135,20,103,20,103,15,135,15"/>
</map>
</div>

</div>
</div>
<a id="a2b5c40822e7f0dcc8beb47dad2660286" name="a2b5c40822e7f0dcc8beb47dad2660286"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b5c40822e7f0dcc8beb47dad2660286">&#9670;&#160;</a></span>_no_photo_internal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">_no_photo_internal </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Возвращает данные для отсутствующего изображения. </p>
<p>Метод формирует массив данных, который используется для представления информации об отсутствующем изображении. Это может быть полезно, например, если изображение не найдено или недоступно. Метод использует конфигурацию приложения (<code>site_url</code>) для формирования URL-адресов. Этот метод является защищённым и предназначен для использования внутри класса или его наследников. Основная логика метода вызывается через публичный метод no_photo().</p>
<dl class="section return"><dt>Возвращает</dt><dd>array Массив данных об изображении или его отсутствии:<ul>
<li>&lsquo;'url&rsquo;<code>(string): URL полноразмерного изображения. -</code>'thumbnail_url'<code>(string): URL эскиза изображения. -</code>'name'<code>(string): Название изображения. -</code>'description'<code>(string): Описание изображения. -</code>'category_name'<code>(string): Название категории. -</code>'category_description'<code>(string): Описание категории. -</code>'rate'<code>(string): Рейтинг изображения. -</code>'url_user'&lsquo; (string): URL пользователя (пустая строка &rsquo;').</li>
<li>&lsquo;'real_name&rsquo;<code>(string): Имя пользователя. -</code>'full_path'<code>(string): Полный путь к изображению. -</code>'thumbnail_path'<code>(string): Полный путь к эскизу. -</code>'file'` (string): Имя файла. Значения по умолчанию используются для отсутствующих данных.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод зависит от корректности данных в конфигурации (<code>site_url</code>). Если этот параметр некорректен, результат может быть непредсказуемым.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Вызов защищённого метода внутри класса или наследника</span></div>
<div class="line">$noPhotoData = $this-&gt;<a class="code hl_function" href="#a2b5c40822e7f0dcc8beb47dad2660286">_no_photo_internal</a>();</div>
<div class="line">echo <span class="stringliteral">&quot;URL изображения: {$noPhotoData[&#39;url&#39;]}\n&quot;</span>;</div>
<div class="line">echo <span class="stringliteral">&quot;Описание: {$noPhotoData[&#39;description&#39;]}\n&quot;</span>;</div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Image_html_a2b5c40822e7f0dcc8beb47dad2660286"><div class="ttname"><a href="#a2b5c40822e7f0dcc8beb47dad2660286">PhotoRigma\Classes\Work_Image\_no_photo_internal</a></div><div class="ttdeci">_no_photo_internal()</div><div class="ttdoc">Возвращает данные для отсутствующего изображения.</div><div class="ttdef"><b>Определения</b> <a href="../../de/d67/work__image_8php_source.html#l01925">work_image.php:1925</a></div></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#ab76f8f2ac851632a23ef69df2bd99dad" title="Конфигурация приложения.">PhotoRigma\Classes\Work_Image\$config</a> Свойство конфигурации проекта в классе.</dd>
<dd>
<a class="el" href="#adfcd1cb7963a860013ca9ca1898f54f1" title="Возвращает данные для отсутствующего изображения.">PhotoRigma\Classes\Work_Image\no_photo()</a> Публичный метод-редирект для вызова этой логики. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a> строка <a class="el" href="../../de/d67/work__image_8php_source.html#l01925">1925</a></p>

<p class="reference">Используется в <a class="el" href="../../de/d67/work__image_8php_source.html#l01878">no_photo()</a>.</p>
<div id="dynsection-6" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a2b5c40822e7f0dcc8beb47dad2660286_icgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a2b5c40822e7f0dcc8beb47dad2660286_icgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a2b5c40822e7f0dcc8beb47dad2660286_icgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a2b5c40822e7f0dcc8beb47dad2660286_icgraph">
<area shape="rect" title="Возвращает данные для отсутствующего изображения." alt="" coords="128,5,258,30"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#adfcd1cb7963a860013ca9ca1898f54f1" title="Возвращает данные для отсутствующего изображения." alt="" coords="5,5,80,30"/>
<area shape="poly" title=" " alt="" coords="112,20,80,20,80,15,112,15"/>
</map>
</div>

</div>
</div>
<a id="a16c229fbb1b62aee5791544bc1086248" name="a16c229fbb1b62aee5791544bc1086248"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16c229fbb1b62aee5791544bc1086248">&#9670;&#160;</a></span>_remove_directory_internal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">_remove_directory_internal </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$path</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Удаляет директорию и её содержимое, предварительно проверяя права доступа. </p>
<p>Этот защищенный метод выполняет следующие действия:</p><ul>
<li>Проверяет существование указанной директории.</li>
<li>Проверяет права доступа к директории (должна быть доступна для записи).</li>
<li>Рекурсивно удаляет все файлы внутри директории.</li>
<li>Удаляет саму директорию. Метод вызывается через публичный метод-редирект <code><a class="el" href="#aaaf358ddc8223e4a5a479f645fc43da8" title="Удаляет директорию и её содержимое через вызов защищённого метода _remove_directory_internal().">PhotoRigma\Classes\Work_Image\remove_directory()</a></code> и предназначен для использования внутри класса или его наследников.</li>
</ul>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$path</td><td>Путь к директории. Должен быть строкой, указывающей на существующую директорию. Директория должна быть доступна для записи.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>bool Возвращает <code>true</code>, если директория успешно удалена.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">RuntimeException</td><td>Выбрасывается исключение в следующих случаях:<ul>
<li>Если директория не существует.</li>
<li>Если директория недоступна для записи.</li>
<li>Если не удалось удалить файл внутри директории.</li>
<li>Если не удалось удалить саму директорию.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Метод рекурсивно удаляет все файлы внутри директории.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Используйте этот метод с осторожностью, так как удаление директории необратимо.</dd></dl>
<p>Пример вызова метода внутри класса или наследника: </p><div class="fragment"><div class="line">$path = <span class="stringliteral">&#39;/path/to/directory&#39;</span>;</div>
<div class="line">$result = $this-&gt;<a class="code hl_function" href="#a16c229fbb1b62aee5791544bc1086248">_remove_directory_internal</a>($path);</div>
<div class="line"><span class="keywordflow">if</span> ($result) {</div>
<div class="line">    echo <span class="stringliteral">&quot;Директория успешно удалена!&quot;</span>;</div>
<div class="line">}</div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Image_html_a16c229fbb1b62aee5791544bc1086248"><div class="ttname"><a href="#a16c229fbb1b62aee5791544bc1086248">PhotoRigma\Classes\Work_Image\_remove_directory_internal</a></div><div class="ttdeci">_remove_directory_internal(string $path)</div><div class="ttdoc">Удаляет директорию и её содержимое, предварительно проверяя права доступа.</div><div class="ttdef"><b>Определения</b> <a href="../../de/d67/work__image_8php_source.html#l02029">work_image.php:2029</a></div></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#aaaf358ddc8223e4a5a479f645fc43da8" title="Удаляет директорию и её содержимое через вызов защищённого метода _remove_directory_internal().">PhotoRigma\Classes\Work_Image\remove_directory()</a> Публичный метод-редирект для вызова этой логики. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a> строка <a class="el" href="../../de/d67/work__image_8php_source.html#l02029">2029</a></p>

<p class="reference">Используется в <a class="el" href="../../de/d67/work__image_8php_source.html#l01984">remove_directory()</a>.</p>
<div id="dynsection-7" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a16c229fbb1b62aee5791544bc1086248_icgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a16c229fbb1b62aee5791544bc1086248_icgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a16c229fbb1b62aee5791544bc1086248_icgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a16c229fbb1b62aee5791544bc1086248_icgraph">
<area shape="rect" title="Удаляет директорию и её содержимое, предварительно проверяя права доступа." alt="" coords="174,5,350,30"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#aaaf358ddc8223e4a5a479f645fc43da8" title="Удаляет директорию и её содержимое через вызов защищённого метода _remove_directory_internal()." alt="" coords="5,5,126,30"/>
<area shape="poly" title=" " alt="" coords="158,20,126,20,126,15,158,15"/>
</map>
</div>

</div>
</div>
<a id="a887f702cc34cf74259c6f10365fc6c9b" name="a887f702cc34cf74259c6f10365fc6c9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a887f702cc34cf74259c6f10365fc6c9b">&#9670;&#160;</a></span>_size_image_internal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">_size_image_internal </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$path_image</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Вычисляет размеры для вывода эскиза изображения. </p>
<p>Метод рассчитывает ширину и высоту эскиза на основе реальных размеров изображения и конфигурационных параметров (<code>temp_photo_w</code> и <code>temp_photo_h</code>). Если изображение меньше целевого размера, возвращаются оригинальные размеры. В противном случае размеры масштабируются пропорционально. Этот метод является защищённым и предназначен для использования внутри класса или его наследников. Основная логика метода вызывается через публичный метод size_image().</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$path_image</td><td>Путь к файлу изображения. Путь должен быть абсолютным, и файл должен существовать и быть доступным для чтения.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>array Массив с шириной и высотой эскиза.<ul>
<li>Ключ 'width': int — Ширина эскиза (целое число ≥ 0).</li>
<li>Ключ 'height': int — Высота эскиза (целое число ≥ 0). Размеры могут совпадать с оригинальными размерами изображения, если оно меньше целевого размера.</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">RuntimeException</td><td>Если файл не существует или не удалось получить размеры изображения.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод зависит от корректности данных в конфигурации (<code>temp_photo_w</code> и <code>temp_photo_h</code>). Если эти параметры некорректны, результат может быть непредсказуемым.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Вычисление размеров эскиза для изображения</span></div>
<div class="line">$path = <span class="stringliteral">&#39;/path/to/image.jpg&#39;</span>;</div>
<div class="line">$sizes = $this-&gt;<a class="code hl_function" href="#a887f702cc34cf74259c6f10365fc6c9b">_size_image_internal</a>($path);</div>
<div class="line">echo <span class="stringliteral">&quot;Ширина: {$sizes[&#39;width&#39;]}, Высота: {$sizes[&#39;height&#39;]}&quot;</span>;</div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Image_html_a887f702cc34cf74259c6f10365fc6c9b"><div class="ttname"><a href="#a887f702cc34cf74259c6f10365fc6c9b">PhotoRigma\Classes\Work_Image\_size_image_internal</a></div><div class="ttdeci">_size_image_internal(string $path_image)</div><div class="ttdoc">Вычисляет размеры для вывода эскиза изображения.</div><div class="ttdef"><b>Определения</b> <a href="../../de/d67/work__image_8php_source.html#l02146">work_image.php:2146</a></div></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#a87a203ec3e8e0964cd9637de5d35d22c" title="Расчёт размера эскиза.">PhotoRigma\Classes\Work_Image\calculate_thumbnail_size()</a> Метод, используемый для расчёта размера эскиза.</dd>
<dd>
<a class="el" href="#a096b7e5c3f9fb908fbb30e1adc2ac61b" title="Вычисляет размеры для вывода эскиза изображения.">PhotoRigma\Classes\Work_Image\size_image()</a> Публичный метод-редирект для вызова этой логики. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a> строка <a class="el" href="../../de/d67/work__image_8php_source.html#l02146">2146</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../de/d67/work__image_8php_source.html#l02223">calculate_thumbnail_size()</a>.</p>

<p class="reference">Используется в <a class="el" href="../../de/d67/work__image_8php_source.html#l02102">size_image()</a>.</p>
<div id="dynsection-8" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a887f702cc34cf74259c6f10365fc6c9b_cgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a887f702cc34cf74259c6f10365fc6c9b_cgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a887f702cc34cf74259c6f10365fc6c9b_cgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a887f702cc34cf74259c6f10365fc6c9b_cgraph">
<area shape="rect" title="Вычисляет размеры для вывода эскиза изображения." alt="" coords="5,5,148,30"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a87a203ec3e8e0964cd9637de5d35d22c" title="Расчёт размера эскиза." alt="" coords="196,5,362,30"/>
<area shape="poly" title=" " alt="" coords="148,15,180,15,180,20,148,20"/>
</map>
</div>
<div id="dynsection-9" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a887f702cc34cf74259c6f10365fc6c9b_icgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a887f702cc34cf74259c6f10365fc6c9b_icgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a887f702cc34cf74259c6f10365fc6c9b_icgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a887f702cc34cf74259c6f10365fc6c9b_icgraph">
<area shape="rect" title="Вычисляет размеры для вывода эскиза изображения." alt="" coords="140,5,282,30"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a096b7e5c3f9fb908fbb30e1adc2ac61b" title="Вычисляет размеры для вывода эскиза изображения." alt="" coords="5,5,92,30"/>
<area shape="poly" title=" " alt="" coords="124,20,92,20,92,15,124,15"/>
</map>
</div>

</div>
</div>
<a id="a87a203ec3e8e0964cd9637de5d35d22c" name="a87a203ec3e8e0964cd9637de5d35d22c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87a203ec3e8e0964cd9637de5d35d22c">&#9670;&#160;</a></span>calculate_thumbnail_size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">calculate_thumbnail_size </td>
          <td>(</td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$size</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Расчёт размера эскиза. </p>
<p>Метод вычисляет ширину и высоту эскиза на основе реальных размеров изображения и конфигурационных параметров (<code>temp_photo_w</code> и <code>temp_photo_h</code>). Этот метод является приватным и предназначен только для использования внутри класса.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$size</td><td>Массив с реальными размерами изображения.<ul>
<li>Индекс 0: int — Ширина изображения (должна быть положительным целым числом).</li>
<li>Индекс 1: int — Высота изображения (должна быть положительным целым числом).</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>array Массив с шириной и высотой эскиза.<ul>
<li>Ключ 'width': int — Ширина эскиза (целое число ≥ 0).</li>
<li>Ключ 'height': int — Высота эскиза (целое число ≥ 0).</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Если массив <code>$size</code> не содержит двух положительных целых чисел. Пример сообщения: <pre class="fragment">Некорректные размеры изображения.
Требуется массив с двумя положительными целыми числами.
Получено: width = [значение], height = [значение]
</pre></td></tr>
    <tr><td class="paramname">RuntimeException</td><td>Если значения <code>temp_photo_w</code> или <code>temp_photo_h</code> в конфигурации некорректны. Пример сообщения: <pre class="fragment">Некорректная конфигурация temp_photo_w или temp_photo_h
Значения должны быть числами ≥ 0.
Получено: temp_photo_w = [значение], temp_photo_h = [значение]
</pre></td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>См. также</dt><dd><a class="el" href="#a096b7e5c3f9fb908fbb30e1adc2ac61b" title="Вычисляет размеры для вывода эскиза изображения.">PhotoRigma\Classes\Work_Image\size_image()</a> Вычисляет размеры для вывода эскиза изображения. </dd>
<dd>
<a class="el" href="#af37eb2b0693905dd71dd677f86d47831" title="Изменяет размер изображения.">PhotoRigma\Classes\Work_Image\image_resize()</a> Изменяет размер изображения.</dd>
<dd>
<a class="el" href="#ab76f8f2ac851632a23ef69df2bd99dad" title="Конфигурация приложения.">PhotoRigma\Classes\Work_Image\$config</a> Массив с конфигурацией приложения. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000013">Необходимо сделать</a></b></dt><dd>Перевести аргументы на массивовые значения ($size[0] -&gt; $size['width']; $size[1] -&gt; $size['height']).</dd></dl>
<p>Пример вызова метода внутри класса: </p><div class="fragment"><div class="line"><span class="comment">// Исходные размеры изображения</span></div>
<div class="line">$originalSize = [1920, 1080];</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Конфигурация приложения</span></div>
<div class="line">$this-&gt;config[<span class="stringliteral">&#39;temp_photo_w&#39;</span>] = 800;</div>
<div class="line">$this-&gt;config[<span class="stringliteral">&#39;temp_photo_h&#39;</span>] = 600;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Вычисление размеров эскиза</span></div>
<div class="line">$thumbnailSize = $this-&gt;<a class="code hl_function" href="#a87a203ec3e8e0964cd9637de5d35d22c">calculate_thumbnail_size</a>($originalSize);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Результат</span></div>
<div class="line">echo <span class="stringliteral">&quot;Ширина эскиза: {$thumbnailSize[&#39;width&#39;]}, Высота эскиза: {$thumbnailSize[&#39;height&#39;]}&quot;</span>;</div>
<div class="line"><span class="comment">// Вывод: Ширина эскиза: 800, Высота эскиза: 450</span></div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Image_html_a87a203ec3e8e0964cd9637de5d35d22c"><div class="ttname"><a href="#a87a203ec3e8e0964cd9637de5d35d22c">PhotoRigma\Classes\Work_Image\calculate_thumbnail_size</a></div><div class="ttdeci">calculate_thumbnail_size(array $size)</div><div class="ttdoc">Расчёт размера эскиза.</div><div class="ttdef"><b>Определения</b> <a href="../../de/d67/work__image_8php_source.html#l02223">work_image.php:2223</a></div></div>
</div><!-- fragment --> 
<p class="definition">См. определение в файле <a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a> строка <a class="el" href="../../de/d67/work__image_8php_source.html#l02223">2223</a></p>

<p class="reference">Используется в <a class="el" href="../../de/d67/work__image_8php_source.html#l01168">_image_resize_internal()</a> и <a class="el" href="../../de/d67/work__image_8php_source.html#l02146">_size_image_internal()</a>.</p>
<div id="dynsection-10" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="../../closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a87a203ec3e8e0964cd9637de5d35d22c_icgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a87a203ec3e8e0964cd9637de5d35d22c_icgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a87a203ec3e8e0964cd9637de5d35d22c_icgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a87a203ec3e8e0964cd9637de5d35d22c_icgraph">
<area shape="rect" title="Расчёт размера эскиза." alt="" coords="352,31,518,55"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a7f18185f2629abbc3bf148d8addfcfe8" title="Изменяет размер изображения." alt="" coords="151,5,304,30"/>
<area shape="poly" title=" " alt="" coords="336,34,304,30,305,24,337,28"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a887f702cc34cf74259c6f10365fc6c9b" title="Вычисляет размеры для вывода эскиза изображения." alt="" coords="156,55,298,79"/>
<area shape="poly" title=" " alt="" coords="337,57,299,61,299,56,336,52"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#af37eb2b0693905dd71dd677f86d47831" title="Изменяет размер изображения." alt="" coords="5,5,103,30"/>
<area shape="poly" title=" " alt="" coords="135,20,103,20,103,15,135,15"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a096b7e5c3f9fb908fbb30e1adc2ac61b" title="Вычисляет размеры для вывода эскиза изображения." alt="" coords="11,55,97,79"/>
<area shape="poly" title=" " alt="" coords="140,70,98,70,98,64,140,64"/>
</map>
</div>

</div>
</div>
<a id="a935337e705b7a1b9ea422d2e04932109" name="a935337e705b7a1b9ea422d2e04932109"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a935337e705b7a1b9ea422d2e04932109">&#9670;&#160;</a></span>create_directory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">create_directory </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$directory_name</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Создает директории для категории и копирует файлы index.php через вызов защищённого метода. </p>
<p>Этот публичный метод является редиректом, который вызывает защищённый метод <code>_create_directory_internal()</code> для выполнения создания директорий и копирования файлов <code>index.php</code>. Дополнительные проверки или преобразования данных перед вызовом защищённого метода отсутствуют. Метод предназначен для использования вне класса.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$directory_name</td><td>Имя директории. Должен быть строкой, содержащей только допустимые символы для имён директорий. Не должен содержать запрещённых символов (например, <code>\/:*?"&lt;&gt;|&lt;/tt&gt;).

@return bool Возвращает &lt;tt&gt;true&lt;/tt&gt;, если директории успешно созданы и файлы скопированы.

@throws RuntimeException Выбрасывается исключение в следующих случаях:
                          - Если родительская директория недоступна для записи.
                          - Если не удалось создать директории.
                          - Если исходные файлы &lt;tt&gt;index.php&lt;/tt&gt; не существуют.
                          - Если не удалось прочитать или записать файлы &lt;tt&gt;index.php&lt;/tt&gt;.

@note    Метод использует конфигурационные параметры &lt;tt&gt;site_dir&lt;/tt&gt;, &lt;tt&gt;gallery_folder&lt;/tt&gt; и &lt;tt&gt;thumbnail_folder&lt;/tt&gt;.

@warning Используйте этот метод с осторожностью, так как он создаёт директории и изменяет файлы.

Пример внешнего вызова метода:
@code 
$object = new \PhotoRigma\Classes\Work_Image();
$directoryName = 'new_category';
$result = $object-&gt;create_directory($directoryName);
if ($result) {
    echo "Директории успешно созданы!"; }  </code></td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>См. также</dt><dd><code> <a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a935337e705b7a1b9ea422d2e04932109" title="Создает директории для категории и копирует файлы index.php через вызов метода из дочернего класса.">PhotoRigma\Classes\Work\create_directory()</a> Метод-фасад в родительском классе Work. </code></dd>
<dd>
<code> <a class="el" href="#ae77f64cb663e7c3c35e7cbcdfd846cf2" title="Создает директории для категории и копирует файлы index.php, предварительно проверяя права доступа.">PhotoRigma\Classes\Work_Image\_create_directory_internal()</a> Защищённый метод, реализующий основную логику. </code></dd>
<dd>
<code> <a class="el" href="#ab76f8f2ac851632a23ef69df2bd99dad" title="Конфигурация приложения.">PhotoRigma\Classes\Work_Image\$config</a> Конфигурационные параметры, используемые для формирования путей. </code></dd></dl>

<p>Замещает <a class="el" href="../../d2/daa/interfacePhotoRigma_1_1Classes_1_1Work__Image__Interface.html#a935337e705b7a1b9ea422d2e04932109">Work_Image_Interface</a>.</p>

<p class="definition">См. определение в файле <a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a> строка <a class="el" href="../../de/d67/work__image_8php_source.html#l00608">608</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../de/d67/work__image_8php_source.html#l00654">_create_directory_internal()</a>.</p>
<div id="dynsection-11" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="../../closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a935337e705b7a1b9ea422d2e04932109_cgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a935337e705b7a1b9ea422d2e04932109_cgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a935337e705b7a1b9ea422d2e04932109_cgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a935337e705b7a1b9ea422d2e04932109_cgraph">
<area shape="rect" title="Создает директории для категории и копирует файлы index.php через вызов защищённого метода." alt="" coords="5,5,119,30"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#ae77f64cb663e7c3c35e7cbcdfd846cf2" title="Создает директории для категории и копирует файлы index.php, предварительно проверяя права доступа." alt="" coords="167,5,336,30"/>
<area shape="poly" title=" " alt="" coords="119,15,151,15,151,20,119,20"/>
</map>
</div>

</div>
</div>
<a id="a89d4e7cb491d0c91282d16ff5abe3138" name="a89d4e7cb491d0c91282d16ff5abe3138"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89d4e7cb491d0c91282d16ff5abe3138">&#9670;&#160;</a></span>fix_file_extension()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fix_file_extension </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$full_path</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Корректировка расширения файла в соответствии с его MIME-типом (публичный интерфейс). </p>
<p>Публичная обёртка для вызова защищённого метода <code>_fix_file_extension_internal</code>, который проверяет MIME-тип файла и корректирует его расширение на основе соответствия MIME-типу. Если у файла отсутствует расширение, оно добавляется автоматически. Если расширение уже корректное, файл остаётся без изменений.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$full_path</td><td>Полный путь к файлу. Путь должен быть абсолютным, и файл должен существовать и быть доступным для чтения. Формат пути должен соответствовать регулярному выражению /^[a-zA-Z0-9\/.-_]+$/.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>string Полный путь к файлу с правильным расширением. Если расширение было изменено или добавлено, возвращается новый путь. Если расширение уже корректное, возвращается исходный путь.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Если путь к файлу некорректен, имеет недопустимый формат или файл не существует. </td></tr>
    <tr><td class="paramname">RuntimeException</td><td>Если MIME-тип файла не поддерживается или файл недоступен для чтения. </td></tr>
    <tr><td class="paramname">Exception</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод завершает выполнение с ошибкой, если MIME-тип файла не поддерживается. Убедитесь, что файл существует и доступен для чтения перед вызовом метода.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание экземпляра класса Work_Image</span></div>
<div class="line">$image = <span class="keyword">new</span> <a class="code hl_class" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html">PhotoRigma::Classes::Work_Image</a>();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Корректировка расширения файла</span></div>
<div class="line">$full_path = <span class="stringliteral">&#39;/path/to/file_without_extension&#39;</span>;</div>
<div class="line">$corrected_path = $image-&gt;fix_file_extension($full_path);</div>
<div class="line">echo <span class="stringliteral">&quot;Исправленный путь: {$corrected_path}&quot;</span>;</div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Image_html"><div class="ttname"><a href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html">PhotoRigma\Classes\Work_Image</a></div><div class="ttdoc">Класс для работы с изображениями.</div><div class="ttdef"><b>Определения</b> <a href="../../de/d67/work__image_8php_source.html#l00431">work_image.php:432</a></div></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a89d4e7cb491d0c91282d16ff5abe3138" title="Вывод изображения через HTTP.">PhotoRigma\Classes\Work\fix_file_extension()</a> Этот метод вызывается через класс Work. </dd>
<dd>
<a class="el" href="../../db/d02/namespacePhotoRigma_1_1Include.html#a2d74c46a21e4ce612a98eee60981aef0" title="Записывает сообщение об ошибке в лог-файл и, при необходимости, завершает выполнение скрипта.">PhotoRigma\Include\log_in_file()</a> Функция для логирования ошибок.</dd>
<dd>
<a class="el" href="#af7cd1deb24cdf852e9981eb4f2665ff1" title="Корректировка расширения файла в соответствии с его MIME-типом (защищённый метод).">PhotoRigma\Classes\Work_Image\_fix_file_extension_internal()</a> Защищённый метод, выполняющий основную логику. </dd></dl>

<p>Замещает <a class="el" href="../../d2/daa/interfacePhotoRigma_1_1Classes_1_1Work__Image__Interface.html#a89d4e7cb491d0c91282d16ff5abe3138">Work_Image_Interface</a>.</p>

<p class="definition">См. определение в файле <a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a> строка <a class="el" href="../../de/d67/work__image_8php_source.html#l00794">794</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../de/d67/work__image_8php_source.html#l00839">_fix_file_extension_internal()</a>.</p>
<div id="dynsection-12" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="../../closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a89d4e7cb491d0c91282d16ff5abe3138_cgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a89d4e7cb491d0c91282d16ff5abe3138_cgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a89d4e7cb491d0c91282d16ff5abe3138_cgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a89d4e7cb491d0c91282d16ff5abe3138_cgraph">
<area shape="rect" title="Корректировка расширения файла в соответствии с его MIME&#45;типом (публичный интерфейс)." alt="" coords="5,12,124,37"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#af7cd1deb24cdf852e9981eb4f2665ff1" title="Корректировка расширения файла в соответствии с его MIME&#45;типом (защищённый метод)." alt="" coords="172,5,297,44"/>
<area shape="poly" title=" " alt="" coords="124,22,156,22,156,27,124,27"/>
</map>
</div>

</div>
</div>
<a id="af37eb2b0693905dd71dd677f86d47831" name="af37eb2b0693905dd71dd677f86d47831"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af37eb2b0693905dd71dd677f86d47831">&#9670;&#160;</a></span>image_resize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">image_resize </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$full_path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$thumbnail_path</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Изменяет размер изображения. </p>
<p>Публичная обёртка для вызова защищённого метода <code>_image_resize_internal</code>, который изменяет размер исходного изображения и создаёт эскиз заданных размеров. Размеры эскиза рассчитываются на основе конфигурации (<code>temp_photo_w</code>, <code>temp_photo_h</code>) с использованием метода <code>calculate_thumbnail_size</code>. Если файл эскиза уже существует и его размеры совпадают с рассчитанными, метод завершает работу без изменений. В противном случае создаётся новый эскиз с использованием одной из доступных библиотек: GraphicsMagick, ImageMagick или GD (в порядке приоритета).</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$full_path</td><td>Путь к исходному изображению. Путь должен быть абсолютным, и файл должен существовать и быть доступным для чтения. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$thumbnail_path</td><td>Путь для сохранения эскиза. Путь должен быть абсолютным, и директория должна быть доступна для записи.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>bool True, если операция выполнена успешно, иначе False.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Если пути к файлам некорректны или имеют недопустимый формат. </td></tr>
    <tr><td class="paramname">RuntimeException|Exception</td><td>Если возникли ошибки при проверке файлов, директорий или размеров изображения.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод зависит от корректности данных в конфигурации (<code>temp_photo_w</code>, <code>temp_photo_h</code>). Если эти параметры некорректны, результат может быть непредсказуемым.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание экземпляра класса Work_Image</span></div>
<div class="line">$image = <span class="keyword">new</span> <a class="code hl_class" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html">Work_Image</a>();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Изменение размера изображения</span></div>
<div class="line">$full_path = <span class="stringliteral">&#39;/path/to/source_image.jpg&#39;</span>;</div>
<div class="line">$thumbnail_path = <span class="stringliteral">&#39;/path/to/thumbnail.jpg&#39;</span>;</div>
<div class="line">$success = $image-&gt;image_resize($full_path, $thumbnail_path);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> ($success) {</div>
<div class="line">    echo <span class="stringliteral">&quot;Эскиз успешно создан.&quot;</span>;</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    echo <span class="stringliteral">&quot;Ошибка при создании эскиза.&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="../../db/d02/namespacePhotoRigma_1_1Include.html#a2d74c46a21e4ce612a98eee60981aef0" title="Записывает сообщение об ошибке в лог-файл и, при необходимости, завершает выполнение скрипта.">PhotoRigma\Include\log_in_file()</a> Функция для логирования ошибок.</dd>
<dd>
<a class="el" href="#a7f18185f2629abbc3bf148d8addfcfe8" title="Изменяет размер изображения.">PhotoRigma\Classes\Work_Image\_image_resize_internal()</a> Защищённый метод, выполняющий основную логику. </dd>
<dd>
<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#af37eb2b0693905dd71dd677f86d47831" title="Изменяет размер изображения.">PhotoRigma\Classes\Work\image_resize()</a> Этот метод вызывается через класс Work. </dd></dl>

<p>Замещает <a class="el" href="../../d2/daa/interfacePhotoRigma_1_1Classes_1_1Work__Image__Interface.html#af37eb2b0693905dd71dd677f86d47831">Work_Image_Interface</a>.</p>

<p class="definition">См. определение в файле <a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a> строка <a class="el" href="../../de/d67/work__image_8php_source.html#l01107">1107</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../de/d67/work__image_8php_source.html#l01168">_image_resize_internal()</a>.</p>
<div id="dynsection-13" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="../../closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_af37eb2b0693905dd71dd677f86d47831_cgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_af37eb2b0693905dd71dd677f86d47831_cgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_af37eb2b0693905dd71dd677f86d47831_cgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_af37eb2b0693905dd71dd677f86d47831_cgraph">
<area shape="rect" title="Изменяет размер изображения." alt="" coords="5,83,103,107"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a7f18185f2629abbc3bf148d8addfcfe8" title="Изменяет размер изображения." alt="" coords="151,83,304,107"/>
<area shape="poly" title=" " alt="" coords="103,92,135,92,135,98,103,98"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a87a203ec3e8e0964cd9637de5d35d22c" title="Расчёт размера эскиза." alt="" coords="354,5,521,30"/>
<area shape="poly" title=" " alt="" coords="256,80,351,41,375,32,377,38,353,45,258,85"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#afaedd403d60cd5b36facbf5414e5b6ce" title="Обработка создания эскиза изображения с использованием библиотеки GD." alt="" coords="352,55,523,79"/>
<area shape="poly" title=" " alt="" coords="304,82,336,78,337,83,305,87"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a6154fb2649a1052f31514aed4818ad2c" title="Обработка создания эскиза изображения с использованием библиотеки GraphicsMagick." alt="" coords="362,104,513,142"/>
<area shape="poly" title=" " alt="" coords="305,103,347,108,346,114,304,108"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#ab09fc88efda540da282034ef94d4ab74" title="Обработка создания эскиза изображения с использованием библиотеки ImageMagick." alt="" coords="362,166,513,205"/>
<area shape="poly" title=" " alt="" coords="256,106,353,151,369,158,367,163,351,156,253,110"/>
</map>
</div>

</div>
</div>
<a id="adfcd1cb7963a860013ca9ca1898f54f1" name="adfcd1cb7963a860013ca9ca1898f54f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfcd1cb7963a860013ca9ca1898f54f1">&#9670;&#160;</a></span>no_photo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">no_photo </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Возвращает данные для отсутствующего изображения. </p>
<p>Публичная обёртка для вызова защищённого метода <code>_no_photo_internal</code>, который формирует массив данных для представления информации об отсутствующем изображении. Это может быть полезно, например, если изображение не найдено или недоступно. Метод использует конфигурацию приложения (<code>site_url</code>) для формирования URL-адресов.</p>
<dl class="section return"><dt>Возвращает</dt><dd>array Массив данных об изображении или его отсутствии:<ul>
<li>&lsquo;'url&rsquo;<code>(string): URL полноразмерного изображения. -</code>'thumbnail_url'<code>(string): URL эскиза изображения. -</code>'name'<code>(string): Название изображения. -</code>'description'<code>(string): Описание изображения. -</code>'category_name'<code>(string): Название категории. -</code>'category_description'<code>(string): Описание категории. -</code>'rate'<code>(string): Рейтинг изображения. -</code>'url_user'&lsquo; (string): URL пользователя (пустая строка &rsquo;').</li>
<li>&lsquo;'real_name&rsquo;<code>(string): Имя пользователя. -</code>'full_path'<code>(string): Полный путь к изображению. -</code>'thumbnail_path'<code>(string): Полный путь к эскизу. -</code>'file'` (string): Имя файла. Значения по умолчанию используются для отсутствующих данных.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод зависит от корректности данных в конфигурации (<code>site_url</code>). Если этот параметр некорректен, результат может быть непредсказуемым.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание экземпляра класса Work_Image</span></div>
<div class="line">$image = <span class="keyword">new</span> <a class="code hl_class" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html">Work_Image</a>();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Получение данных для отсутствующего изображения</span></div>
<div class="line">$noPhotoData = $image-&gt;no_photo();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Вывод данных</span></div>
<div class="line">echo <span class="stringliteral">&quot;URL изображения: {$noPhotoData[&#39;url&#39;]}\n&quot;</span>;</div>
<div class="line">echo <span class="stringliteral">&quot;Описание: {$noPhotoData[&#39;description&#39;]}\n&quot;</span>;</div>
<div class="line">echo <span class="stringliteral">&quot;Категория: {$noPhotoData[&#39;category_name&#39;]} - {$noPhotoData[&#39;category_description&#39;]}\n&quot;</span>;</div>
<div class="line">echo <span class="stringliteral">&quot;Рейтинг: {$noPhotoData[&#39;rate&#39;]}\n&quot;</span>;</div>
<div class="line">echo <span class="stringliteral">&quot;Пользователь: {$noPhotoData[&#39;real_name&#39;]}\n&quot;</span>;</div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#adfcd1cb7963a860013ca9ca1898f54f1" title="Возвращает данные для отсутствующего изображения.">PhotoRigma\Classes\Work\no_photo()</a> Этот метод вызывается через класс Work.</dd>
<dd>
<a class="el" href="#a2b5c40822e7f0dcc8beb47dad2660286" title="Возвращает данные для отсутствующего изображения.">PhotoRigma\Classes\Work_Image\_no_photo_internal()</a> Защищённый метод, выполняющий основную логику. </dd></dl>

<p>Замещает <a class="el" href="../../d2/daa/interfacePhotoRigma_1_1Classes_1_1Work__Image__Interface.html#adfcd1cb7963a860013ca9ca1898f54f1">Work_Image_Interface</a>.</p>

<p class="definition">См. определение в файле <a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a> строка <a class="el" href="../../de/d67/work__image_8php_source.html#l01878">1878</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../de/d67/work__image_8php_source.html#l01925">_no_photo_internal()</a>.</p>
<div id="dynsection-14" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="../../closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_adfcd1cb7963a860013ca9ca1898f54f1_cgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_adfcd1cb7963a860013ca9ca1898f54f1_cgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_adfcd1cb7963a860013ca9ca1898f54f1_cgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_adfcd1cb7963a860013ca9ca1898f54f1_cgraph">
<area shape="rect" title="Возвращает данные для отсутствующего изображения." alt="" coords="5,5,80,30"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a2b5c40822e7f0dcc8beb47dad2660286" title="Возвращает данные для отсутствующего изображения." alt="" coords="128,5,258,30"/>
<area shape="poly" title=" " alt="" coords="80,15,113,15,113,20,80,20"/>
</map>
</div>

</div>
</div>
<a id="afaedd403d60cd5b36facbf5414e5b6ce" name="afaedd403d60cd5b36facbf5414e5b6ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afaedd403d60cd5b36facbf5414e5b6ce">&#9670;&#160;</a></span>process_image_resize_gd()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">process_image_resize_gd </td>
          <td>(</td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$original_data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$thumbnail_data</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Обработка создания эскиза изображения с использованием библиотеки GD. </p>
<p>Метод выполняет следующие шаги:</p><ol type="1">
<li>Проверяет поддержку MIME-типа через массив разрешённых форматов.</li>
<li>Преобразует MIME-тип в константу IMAGETYPE_*.</li>
<li>Проверяет поддержку формата через функцию imagetypes().</li>
<li>Ограничивает использование памяти до 25% от доступной.</li>
<li>Создаёт резервную копию старого эскиза (если он существует).</li>
<li>Загружает исходное изображение и создаёт новый эскиз заданных размеров.</li>
<li>Сохраняет новый эскиз в указанный файл.</li>
<li>Восстанавливает старый эскиз в случае ошибки.</li>
</ol>
<p>Этот метод является приватным и предназначен только для использования внутри класса.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$original_data</td><td>Данные об оригинальном изображении:<ul>
<li>'path' (string): Абсолютный путь к исходному файлу.</li>
<li>'type' (string): MIME-тип изображения (например, 'image/jpeg'). Должен быть одним из разрешённых MIME-типов.</li>
<li>'width' (int): Ширина исходного изображения (положительное число).</li>
<li>'height' (int): Высота исходного изображения (положительное число). </li>
</ul>
</td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$thumbnail_data</td><td>Данные об эскизе:<ul>
<li>'path' (string): Абсолютный путь для сохранения эскиза.</li>
<li>'width' (int): Желаемая ширина эскиза (положительное число).</li>
<li>'height' (int): Желаемая высота эскиза (положительное число).</li>
<li>'exists' (bool): Существует ли файл эскиза (<code>true</code> или <code>false</code>).</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>bool True, если эскиз создан успешно.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Если MIME-тип или тип изображения не поддерживаются. Пример сообщения: Неподдерживаемый MIME-тип для GD | Получено: [значение] </td></tr>
    <tr><td class="paramname">RuntimeException|Exception</td><td>Если возникает ошибка при работе с GD (например, при загрузке, обработке или сохранении изображения). Пример сообщения: Не удалось создать ресурс изображения через GD | Путь: [значение]</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод чувствителен к правам доступа при работе с файлами (например, при переименовании или удалении файлов). Убедитесь, что скрипт имеет необходимые права на запись и чтение. </dd>
<dd>
Ограничение памяти (25% от доступной) может быть недостаточным для больших изображений. </dd>
<dd>
Поддержка форматов зависит от текущей версии GD. Например, WebP может быть недоступен.</dd></dl>
<p>Пример вызова метода внутри класса: </p><div class="fragment"><div class="line">$original_data = [</div>
<div class="line">    <span class="stringliteral">&#39;path&#39;</span> =&gt; <span class="stringliteral">&#39;/path/to/original.jpg&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;type&#39;</span> =&gt; <span class="stringliteral">&#39;image/jpeg&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;width&#39;</span> =&gt; 1920,</div>
<div class="line">    <span class="stringliteral">&#39;height&#39;</span> =&gt; 1080,</div>
<div class="line">];</div>
<div class="line">$thumbnail_data = [</div>
<div class="line">    <span class="stringliteral">&#39;path&#39;</span> =&gt; <span class="stringliteral">&#39;/path/to/thumbnail.jpg&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;width&#39;</span> =&gt; 300,</div>
<div class="line">    <span class="stringliteral">&#39;height&#39;</span> =&gt; 200,</div>
<div class="line">    <span class="stringliteral">&#39;exists&#39;</span> =&gt; <span class="keyword">false</span>,</div>
<div class="line">];</div>
<div class="line">$result = $this-&gt;<a class="code hl_function" href="#afaedd403d60cd5b36facbf5414e5b6ce">process_image_resize_gd</a>($original_data, $thumbnail_data);</div>
<div class="line"><span class="keywordflow">if</span> ($result) {</div>
<div class="line">    echo <span class="stringliteral">&quot;Эскиз успешно создан!&quot;</span>;</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    echo <span class="stringliteral">&quot;Не удалось создать эскиз.&quot;</span>;</div>
<div class="line">}</div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Image_html_afaedd403d60cd5b36facbf5414e5b6ce"><div class="ttname"><a href="#afaedd403d60cd5b36facbf5414e5b6ce">PhotoRigma\Classes\Work_Image\process_image_resize_gd</a></div><div class="ttdeci">process_image_resize_gd(array $original_data, array $thumbnail_data)</div><div class="ttdoc">Обработка создания эскиза изображения с использованием библиотеки GD.</div><div class="ttdef"><b>Определения</b> <a href="../../de/d67/work__image_8php_source.html#l01686">work_image.php:1686</a></div></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="../../db/d02/namespacePhotoRigma_1_1Include.html#a2d74c46a21e4ce612a98eee60981aef0" title="Записывает сообщение об ошибке в лог-файл и, при необходимости, завершает выполнение скрипта.">PhotoRigma\Include\log_in_file()</a> Функция для логирования ошибок.</dd>
<dd>
<a class="el" href="#a7f18185f2629abbc3bf148d8addfcfe8" title="Изменяет размер изображения.">PhotoRigma\Classes\Work_Image\_image_resize_internal()</a> Метод, вызывающий этот приватный метод. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a> строка <a class="el" href="../../de/d67/work__image_8php_source.html#l01686">1686</a></p>

<p class="reference">Используется в <a class="el" href="../../de/d67/work__image_8php_source.html#l01168">_image_resize_internal()</a>.</p>
<div id="dynsection-15" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="../../closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_afaedd403d60cd5b36facbf5414e5b6ce_icgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_afaedd403d60cd5b36facbf5414e5b6ce_icgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_afaedd403d60cd5b36facbf5414e5b6ce_icgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_afaedd403d60cd5b36facbf5414e5b6ce_icgraph">
<area shape="rect" title="Обработка создания эскиза изображения с использованием библиотеки GD." alt="" coords="352,5,523,30"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a7f18185f2629abbc3bf148d8addfcfe8" title="Изменяет размер изображения." alt="" coords="151,5,304,30"/>
<area shape="poly" title=" " alt="" coords="337,20,304,20,304,15,337,15"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#af37eb2b0693905dd71dd677f86d47831" title="Изменяет размер изображения." alt="" coords="5,5,103,30"/>
<area shape="poly" title=" " alt="" coords="135,20,103,20,103,15,135,15"/>
</map>
</div>

</div>
</div>
<a id="a6154fb2649a1052f31514aed4818ad2c" name="a6154fb2649a1052f31514aed4818ad2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6154fb2649a1052f31514aed4818ad2c">&#9670;&#160;</a></span>process_image_resize_gmagick()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">process_image_resize_gmagick </td>
          <td>(</td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$original_data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$thumbnail_data</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Обработка создания эскиза изображения с использованием библиотеки GraphicsMagick. </p>
<p>Метод выполняет следующие шаги:</p><ol type="1">
<li>Проверяет поддержку MIME-типа через массив разрешённых форматов.</li>
<li>Преобразует MIME-тип в формат GraphicsMagick.</li>
<li>Проверяет поддержку формата через Gmagick::queryFormats().</li>
<li>Ограничивает использование памяти до 25% от доступной.</li>
<li>Создаёт резервную копию старого эскиза (если он существует).</li>
<li>Загружает исходное изображение и создаёт новый эскиз заданных размеров.</li>
<li>Сохраняет новый эскиз в указанный файл.</li>
<li>Восстанавливает старый эскиз в случае ошибки.</li>
</ol>
<p>Этот метод является приватным и предназначен только для использования внутри класса.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$original_data</td><td>Данные об оригинальном изображении:<ul>
<li>'path' (string): Абсолютный путь к исходному файлу.</li>
<li>'type' (string): MIME-тип изображения (например, 'image/jpeg'). Должен быть одним из разрешённых MIME-типов.</li>
<li>'width' (int): Ширина исходного изображения (положительное число).</li>
<li>'height' (int): Высота исходного изображения (положительное число). </li>
</ul>
</td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$thumbnail_data</td><td>Данные об эскизе:<ul>
<li>'path' (string): Абсолютный путь для сохранения эскиза.</li>
<li>'width' (int): Желаемая ширина эскиза (положительное число).</li>
<li>'height' (int): Желаемая высота эскиза (положительное число).</li>
<li>'exists' (bool): Существует ли файл эскиза (<code>true</code> или <code>false</code>).</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>bool True, если эскиз создан успешно.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">GmagickException</td><td>Если возникает ошибка при работе с GraphicsMagick (например, при загрузке или обработке изображения).*</td></tr>
    <tr><td class="paramname"></td><td></td></tr>
  </table>
  </dd>
</dl>
<p>GmagickException </p><dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод чувствителен к правам доступа при работе с файлами (например, при переименовании или удалении файлов). Убедитесь, что скрипт имеет необходимые права на запись и чтение. </dd>
<dd>
Ограничение памяти (25% от доступной) может быть недостаточным для больших изображений.</dd></dl>
<p>Пример вызова метода внутри класса: </p><div class="fragment"><div class="line">$original_data = [</div>
<div class="line">    <span class="stringliteral">&#39;path&#39;</span> =&gt; <span class="stringliteral">&#39;/path/to/original.jpg&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;type&#39;</span> =&gt; <span class="stringliteral">&#39;image/jpeg&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;width&#39;</span> =&gt; 1920,</div>
<div class="line">    <span class="stringliteral">&#39;height&#39;</span> =&gt; 1080,</div>
<div class="line">];</div>
<div class="line">$thumbnail_data = [</div>
<div class="line">    <span class="stringliteral">&#39;path&#39;</span> =&gt; <span class="stringliteral">&#39;/path/to/thumbnail.jpg&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;width&#39;</span> =&gt; 300,</div>
<div class="line">    <span class="stringliteral">&#39;height&#39;</span> =&gt; 200,</div>
<div class="line">    <span class="stringliteral">&#39;exists&#39;</span> =&gt; <span class="keyword">false</span>,</div>
<div class="line">];</div>
<div class="line">$result = $this-&gt;<a class="code hl_function" href="#a6154fb2649a1052f31514aed4818ad2c">process_image_resize_gmagick</a>($original_data, $thumbnail_data);</div>
<div class="line"><span class="keywordflow">if</span> ($result) {</div>
<div class="line">    echo <span class="stringliteral">&quot;Эскиз успешно создан!&quot;</span>;</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    echo <span class="stringliteral">&quot;Не удалось создать эскиз.&quot;</span>;</div>
<div class="line">}</div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Image_html_a6154fb2649a1052f31514aed4818ad2c"><div class="ttname"><a href="#a6154fb2649a1052f31514aed4818ad2c">PhotoRigma\Classes\Work_Image\process_image_resize_gmagick</a></div><div class="ttdeci">process_image_resize_gmagick(array $original_data, array $thumbnail_data)</div><div class="ttdoc">Обработка создания эскиза изображения с использованием библиотеки GraphicsMagick.</div><div class="ttdef"><b>Определения</b> <a href="../../de/d67/work__image_8php_source.html#l01343">work_image.php:1343</a></div></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#a7f18185f2629abbc3bf148d8addfcfe8" title="Изменяет размер изображения.">PhotoRigma\Classes\Work_Image\_image_resize_internal()</a> Метод, вызывающий этот приватный метод. </dd>
<dd>
<a class="el" href="../../db/d02/namespacePhotoRigma_1_1Include.html#a2d74c46a21e4ce612a98eee60981aef0" title="Записывает сообщение об ошибке в лог-файл и, при необходимости, завершает выполнение скрипта.">PhotoRigma\Include\log_in_file()</a> Функция для логирования ошибок. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a> строка <a class="el" href="../../de/d67/work__image_8php_source.html#l01343">1343</a></p>

<p class="reference">Используется в <a class="el" href="../../de/d67/work__image_8php_source.html#l01168">_image_resize_internal()</a>.</p>
<div id="dynsection-16" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="../../closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a6154fb2649a1052f31514aed4818ad2c_icgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a6154fb2649a1052f31514aed4818ad2c_icgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a6154fb2649a1052f31514aed4818ad2c_icgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a6154fb2649a1052f31514aed4818ad2c_icgraph">
<area shape="rect" title="Обработка создания эскиза изображения с использованием библиотеки GraphicsMagick." alt="" coords="352,5,502,44"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a7f18185f2629abbc3bf148d8addfcfe8" title="Изменяет размер изображения." alt="" coords="151,12,304,37"/>
<area shape="poly" title=" " alt="" coords="337,27,304,27,304,22,337,22"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#af37eb2b0693905dd71dd677f86d47831" title="Изменяет размер изображения." alt="" coords="5,12,103,37"/>
<area shape="poly" title=" " alt="" coords="135,27,103,27,103,22,135,22"/>
</map>
</div>

</div>
</div>
<a id="ab09fc88efda540da282034ef94d4ab74" name="ab09fc88efda540da282034ef94d4ab74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab09fc88efda540da282034ef94d4ab74">&#9670;&#160;</a></span>process_image_resize_imagick()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">process_image_resize_imagick </td>
          <td>(</td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$original_data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$thumbnail_data</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Обработка создания эскиза изображения с использованием библиотеки ImageMagick. </p>
<p>Метод выполняет следующие шаги:</p><ol type="1">
<li>Проверяет поддержку MIME-типа через массив разрешённых форматов.</li>
<li>Преобразует MIME-тип в формат ImageMagick.</li>
<li>Проверяет поддержку формата через Imagick::queryFormats().</li>
<li>Ограничивает использование памяти до 25% от доступной.</li>
<li>Создаёт резервную копию старого эскиза (если он существует).</li>
<li>Загружает исходное изображение и создаёт новый эскиз заданных размеров.</li>
<li>Сохраняет новый эскиз в указанный файл.</li>
<li>Восстанавливает старый эскиз в случае ошибки.</li>
</ol>
<p>Этот метод является приватным и предназначен только для использования внутри класса.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$original_data</td><td>Данные об оригинальном изображении:<ul>
<li>'path' (string): Абсолютный путь к исходному файлу.</li>
<li>'type' (string): MIME-тип изображения (например, 'image/jpeg'). Должен быть одним из разрешённых MIME-типов.</li>
<li>'width' (int): Ширина исходного изображения (положительное число).</li>
<li>'height' (int): Высота исходного изображения (положительное число). </li>
</ul>
</td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$thumbnail_data</td><td>Данные об эскизе:<ul>
<li>'path' (string): Абсолютный путь для сохранения эскиза.</li>
<li>'width' (int): Желаемая ширина эскиза (положительное число).</li>
<li>'height' (int): Желаемая высота эскиза (положительное число).</li>
<li>'exists' (bool): Существует ли файл эскиза (<code>true</code> или <code>false</code>).</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>bool True, если эскиз создан успешно.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td>Если возникает ошибка при работе с ImageMagick (например, при загрузке или обработке изображения).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод чувствителен к правам доступа при работе с файлами (например, при переименовании или удалении файлов). Убедитесь, что скрипт имеет необходимые права на запись и чтение. </dd>
<dd>
Ограничение памяти (25% от доступной) может быть недостаточным для больших изображений.</dd></dl>
<p>Пример вызова метода внутри класса: </p><div class="fragment"><div class="line">$original_data = [</div>
<div class="line">    <span class="stringliteral">&#39;path&#39;</span> =&gt; <span class="stringliteral">&#39;/path/to/original.jpg&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;type&#39;</span> =&gt; <span class="stringliteral">&#39;image/jpeg&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;width&#39;</span> =&gt; 1920,</div>
<div class="line">    <span class="stringliteral">&#39;height&#39;</span> =&gt; 1080,</div>
<div class="line">];</div>
<div class="line">$thumbnail_data = [</div>
<div class="line">    <span class="stringliteral">&#39;path&#39;</span> =&gt; <span class="stringliteral">&#39;/path/to/thumbnail.jpg&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;width&#39;</span> =&gt; 300,</div>
<div class="line">    <span class="stringliteral">&#39;height&#39;</span> =&gt; 200,</div>
<div class="line">    <span class="stringliteral">&#39;exists&#39;</span> =&gt; <span class="keyword">false</span>,</div>
<div class="line">];</div>
<div class="line">$result = $this-&gt;<a class="code hl_function" href="#ab09fc88efda540da282034ef94d4ab74">process_image_resize_imagick</a>($original_data, $thumbnail_data);</div>
<div class="line"><span class="keywordflow">if</span> ($result) {</div>
<div class="line">    echo <span class="stringliteral">&quot;Эскиз успешно создан!&quot;</span>;</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    echo <span class="stringliteral">&quot;Не удалось создать эскиз.&quot;</span>;</div>
<div class="line">}</div>
<div class="ttc" id="aclassPhotoRigma_1_1Classes_1_1Work__Image_html_ab09fc88efda540da282034ef94d4ab74"><div class="ttname"><a href="#ab09fc88efda540da282034ef94d4ab74">PhotoRigma\Classes\Work_Image\process_image_resize_imagick</a></div><div class="ttdeci">process_image_resize_imagick(array $original_data, array $thumbnail_data)</div><div class="ttdoc">Обработка создания эскиза изображения с использованием библиотеки ImageMagick.</div><div class="ttdef"><b>Определения</b> <a href="../../de/d67/work__image_8php_source.html#l01512">work_image.php:1512</a></div></div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#a7f18185f2629abbc3bf148d8addfcfe8" title="Изменяет размер изображения.">PhotoRigma\Classes\Work_Image\_image_resize_internal()</a> Метод, вызывающий этот приватный метод. </dd>
<dd>
<a class="el" href="../../db/d02/namespacePhotoRigma_1_1Include.html#a2d74c46a21e4ce612a98eee60981aef0" title="Записывает сообщение об ошибке в лог-файл и, при необходимости, завершает выполнение скрипта.">PhotoRigma\Include\log_in_file()</a> Функция для логирования ошибок. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a> строка <a class="el" href="../../de/d67/work__image_8php_source.html#l01512">1512</a></p>

<p class="reference">Используется в <a class="el" href="../../de/d67/work__image_8php_source.html#l01168">_image_resize_internal()</a>.</p>
<div id="dynsection-17" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="../../closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_ab09fc88efda540da282034ef94d4ab74_icgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_ab09fc88efda540da282034ef94d4ab74_icgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_ab09fc88efda540da282034ef94d4ab74_icgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_ab09fc88efda540da282034ef94d4ab74_icgraph">
<area shape="rect" title="Обработка создания эскиза изображения с использованием библиотеки ImageMagick." alt="" coords="352,5,502,44"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a7f18185f2629abbc3bf148d8addfcfe8" title="Изменяет размер изображения." alt="" coords="151,12,304,37"/>
<area shape="poly" title=" " alt="" coords="337,27,304,27,304,22,337,22"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#af37eb2b0693905dd71dd677f86d47831" title="Изменяет размер изображения." alt="" coords="5,12,103,37"/>
<area shape="poly" title=" " alt="" coords="135,27,103,27,103,22,135,22"/>
</map>
</div>

</div>
</div>
<a id="aaaf358ddc8223e4a5a479f645fc43da8" name="aaaf358ddc8223e4a5a479f645fc43da8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaaf358ddc8223e4a5a479f645fc43da8">&#9670;&#160;</a></span>remove_directory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">remove_directory </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$path</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Удаляет директорию и её содержимое через вызов защищённого метода <code>_remove_directory_internal()</code>. </p>
<p>Этот публичный метод является редиректом, который вызывает защищённый метод <code>_remove_directory_internal()</code> для выполнения удаления директории и её содержимого. Также существует редирект из родительского класса <code><a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#aaaf358ddc8223e4a5a479f645fc43da8" title="Удаляет директорию и её содержимое через вызов метода из дочернего класса.">PhotoRigma\Classes\Work\remove_directory()</a></code>. Дополнительные проверки или преобразования данных перед вызовом защищённого метода отсутствуют.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$path</td><td>Путь к директории. Должен быть строкой, указывающей на существующую директорию. Директория должна быть доступна для записи.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>bool Возвращает <code>true</code>, если директория успешно удалена.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">RuntimeException</td><td>Выбрасывается исключение в следующих случаях:<ul>
<li>Если директория не существует.</li>
<li>Если директория недоступна для записи.</li>
<li>Если не удалось удалить файл внутри директории.</li>
<li>Если не удалось удалить саму директорию.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Метод рекурсивно удаляет все файлы внутри директории.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Используйте этот метод с осторожностью, так как удаление директории необратимо.</dd></dl>
<p>Пример внешнего вызова метода: </p><div class="fragment"><div class="line">$object = new \PhotoRigma\Classes\Work_Image();</div>
<div class="line">$path = <span class="stringliteral">&#39;/path/to/directory&#39;</span>;</div>
<div class="line">$result = $object-&gt;remove_directory($path);</div>
<div class="line"><span class="keywordflow">if</span> ($result) {</div>
<div class="line">    echo <span class="stringliteral">&quot;Директория успешно удалена!&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#aaaf358ddc8223e4a5a479f645fc43da8" title="Удаляет директорию и её содержимое через вызов метода из дочернего класса.">PhotoRigma\Classes\Work\remove_directory()</a> Метод из родительского класса, используемый как редирект.</dd>
<dd>
<a class="el" href="#a16c229fbb1b62aee5791544bc1086248" title="Удаляет директорию и её содержимое, предварительно проверяя права доступа.">PhotoRigma\Classes\Work_Image\_remove_directory_internal()</a> Защищённый метод, реализующий основную логику удаления. </dd></dl>

<p>Замещает <a class="el" href="../../d2/daa/interfacePhotoRigma_1_1Classes_1_1Work__Image__Interface.html#aaaf358ddc8223e4a5a479f645fc43da8">Work_Image_Interface</a>.</p>

<p class="definition">См. определение в файле <a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a> строка <a class="el" href="../../de/d67/work__image_8php_source.html#l01984">1984</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../de/d67/work__image_8php_source.html#l02029">_remove_directory_internal()</a>.</p>
<div id="dynsection-18" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="../../closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_aaaf358ddc8223e4a5a479f645fc43da8_cgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_aaaf358ddc8223e4a5a479f645fc43da8_cgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_aaaf358ddc8223e4a5a479f645fc43da8_cgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_aaaf358ddc8223e4a5a479f645fc43da8_cgraph">
<area shape="rect" title="Удаляет директорию и её содержимое через вызов защищённого метода _remove_directory_internal()." alt="" coords="5,5,126,30"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a16c229fbb1b62aee5791544bc1086248" title="Удаляет директорию и её содержимое, предварительно проверяя права доступа." alt="" coords="174,5,350,30"/>
<area shape="poly" title=" " alt="" coords="126,15,158,15,158,20,126,20"/>
</map>
</div>

</div>
</div>
<a id="a096b7e5c3f9fb908fbb30e1adc2ac61b" name="a096b7e5c3f9fb908fbb30e1adc2ac61b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a096b7e5c3f9fb908fbb30e1adc2ac61b">&#9670;&#160;</a></span>size_image()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_image </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$path_image</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Вычисляет размеры для вывода эскиза изображения. </p>
<p>Публичная обёртка для вызова защищённого метода <code>_size_image_internal</code>, который рассчитывает ширину и высоту эскиза на основе реальных размеров изображения и конфигурационных параметров (<code>temp_photo_w</code> и <code>temp_photo_h</code>). Если изображение меньше целевого размера, возвращаются оригинальные размеры. В противном случае размеры масштабируются пропорционально.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$path_image</td><td>Путь к файлу изображения. Путь должен быть абсолютным, и файл должен существовать и быть доступным для чтения.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>array Массив с шириной и высотой эскиза.<ul>
<li>Ключ 'width': int — Ширина эскиза (целое число ≥ 0).</li>
<li>Ключ 'height': int — Высота эскиза (целое число ≥ 0). Размеры могут совпадать с оригинальными размерами изображения, если оно меньше целевого размера.</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">RuntimeException</td><td>Если файл не существует или не удалось получить размеры изображения.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод зависит от корректности данных в конфигурации (<code>temp_photo_w</code> и <code>temp_photo_h</code>). Если эти параметры некорректны, результат может быть непредсказуемым.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание экземпляра класса Work_Image</span></div>
<div class="line">$image = <span class="keyword">new</span> <a class="code hl_class" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html">Work_Image</a>();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Вычисление размеров эскиза для изображения</span></div>
<div class="line">$path = <span class="stringliteral">&#39;/path/to/image.jpg&#39;</span>;</div>
<div class="line">$sizes = $image-&gt;size_image($path);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Вывод результатов</span></div>
<div class="line">echo <span class="stringliteral">&quot;Ширина: {$sizes[&#39;width&#39;]}, Высота: {$sizes[&#39;height&#39;]}&quot;</span>;</div>
</div><!-- fragment --> <dl class="section see"><dt>См. также</dt><dd><a class="el" href="#a887f702cc34cf74259c6f10365fc6c9b" title="Вычисляет размеры для вывода эскиза изображения.">PhotoRigma\Classes\Work_Image\_size_image_internal()</a> Защищённый метод, выполняющий основную логику. </dd>
<dd>
<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a096b7e5c3f9fb908fbb30e1adc2ac61b" title="Вычисляет размеры для вывода эскиза изображения.">PhotoRigma\Classes\Work\size_image()</a> Этот метод вызывается через класс Work. </dd>
<dd>
<a class="el" href="../../d9/da8/classPhotoRigma_1_1Classes_1_1Work__CoreLogic.html#a88355b68549854e972970158df564179" title="Генерирует блок данных для вывода изображений различных типов.">PhotoRigma\Classes\Work_CoreLogic\_create_photo_internal()</a> Метод, вызывающий этот метод. </dd></dl>

<p>Замещает <a class="el" href="../../d2/daa/interfacePhotoRigma_1_1Classes_1_1Work__Image__Interface.html#a096b7e5c3f9fb908fbb30e1adc2ac61b">Work_Image_Interface</a>.</p>

<p class="definition">См. определение в файле <a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a> строка <a class="el" href="../../de/d67/work__image_8php_source.html#l02102">2102</a></p>

<p class="reference">Перекрестные ссылки <a class="el" href="../../de/d67/work__image_8php_source.html#l02146">_size_image_internal()</a>.</p>
<div id="dynsection-19" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="../../closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a096b7e5c3f9fb908fbb30e1adc2ac61b_cgraph.png" border="0" usemap="#ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a096b7e5c3f9fb908fbb30e1adc2ac61b_cgraph" alt=""/></div>
<map name="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a096b7e5c3f9fb908fbb30e1adc2ac61b_cgraph" id="ad9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image_a096b7e5c3f9fb908fbb30e1adc2ac61b_cgraph">
<area shape="rect" title="Вычисляет размеры для вывода эскиза изображения." alt="" coords="5,5,92,30"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a887f702cc34cf74259c6f10365fc6c9b" title="Вычисляет размеры для вывода эскиза изображения." alt="" coords="140,5,282,30"/>
<area shape="poly" title=" " alt="" coords="92,15,124,15,124,20,92,20"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a87a203ec3e8e0964cd9637de5d35d22c" title="Расчёт размера эскиза." alt="" coords="330,5,496,30"/>
<area shape="poly" title=" " alt="" coords="283,15,314,15,314,20,283,20"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Данные класса</h2>
<a id="ab76f8f2ac851632a23ef69df2bd99dad" name="ab76f8f2ac851632a23ef69df2bd99dad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab76f8f2ac851632a23ef69df2bd99dad">&#9670;&#160;</a></span>$config</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">array $config</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Конфигурация приложения. </p>

<p class="definition">См. определение в файле <a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a> строка <a class="el" href="../../de/d67/work__image_8php_source.html#l00436">436</a></p>

<p class="reference">Используется в <a class="el" href="../../de/d67/work__image_8php_source.html#l00470">__construct()</a> и <a class="el" href="../../de/d67/work__image_8php_source.html#l00506">__get()</a>.</p>

</div>
</div>
<a id="a015aa0bda28030cbf1a64c0afb88f958" name="a015aa0bda28030cbf1a64c0afb88f958"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a015aa0bda28030cbf1a64c0afb88f958">&#9670;&#160;</a></span>$fh</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$fh = fopen($full_path, 'rb')</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a> строка <a class="el" href="../../de/d67/work__image_8php_source.html#l01044">1044</a></p>

</div>
</div>
<a id="a7a835ab7aded33c3c34cd60ab84ae6c7" name="a7a835ab7aded33c3c34cd60ab84ae6c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a835ab7aded33c3c34cd60ab84ae6c7">&#9670;&#160;</a></span>$file_size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if (! $mime_type||!str_starts_with( $mime_type, 'image/')) $file_size = filesize($full_path)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a> строка <a class="el" href="../../de/d67/work__image_8php_source.html#l01022">1022</a></p>

</div>
</div>
<a id="a4d1985caafb49b059e3ca3dedfee257a" name="a4d1985caafb49b059e3ca3dedfee257a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d1985caafb49b059e3ca3dedfee257a">&#9670;&#160;</a></span>$mime_type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$mime_type = finfo_file($finfo, $full_path)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Вывод изображения через HTTP. </p>
<p>Публичная обёртка для вызова защищённого метода <code>_image_attach_internal</code>, который проверяет существование и доступность файла, определяет его MIME-тип и отправляет содержимое файла через HTTP. Если файл не найден или недоступен, возвращается HTTP-статус 404. Если возникли проблемы с чтением файла или определением MIME-типа, возвращается HTTP-статус 500. Метод завершает выполнение скрипта после отправки заголовков и содержимого файла.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$full_path</td><td>Полный путь к файлу. Путь должен быть абсолютным, и файл должен существовать и быть доступным для чтения. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$name_file</td><td>Имя файла для заголовка Content-Disposition. Имя должно быть корректным (например, без запрещённых символов).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>void Метод ничего не возвращает. Завершает выполнение скрипта после отправки заголовков и содержимого файла.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод завершает выполнение скрипта (<code>exit</code>), отправляя заголовки и содержимое файла.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание экземпляра класса Work_Image</span></div>
<div class="line">$image = <span class="keyword">new</span> <a class="code hl_class" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html">PhotoRigma::Classes::Work_Image</a>();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Вызов метода для вывода изображения через HTTP</span></div>
<div class="line">$image-&gt;image_attach(<span class="stringliteral">&#39;/path/to/image.jpg&#39;</span>, <span class="stringliteral">&#39;example.jpg&#39;</span>);</div>
</div><!-- fragment --> <dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>См. также</dt><dd>PhotoRigma::Classes::Work_Image::_image_attach_internal() Защищённый метод, выполняющий основную логику. </dd>
<dd>
PhotoRigma::Classes::Work::image_attach() Этот метод вызывается через класс Work. </dd>
<dd>
<a class="el" href="../../db/d02/namespacePhotoRigma_1_1Include.html#a2d74c46a21e4ce612a98eee60981aef0" title="Записывает сообщение об ошибке в лог-файл и, при необходимости, завершает выполнение скрипта.">PhotoRigma\Include\log_in_file()</a> Функция для логирования ошибок. </dd>
<dd>
<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a8ecb9d3a6cba675b7a2d72ddc14b53f3" title="Очистка строки от HTML-тегов и специальных символов.">PhotoRigma\Classes\Work\clean_field()</a> Публичный метод для очистки данных.</dd></dl>
<p>Вывод изображения через HTTP.</p>
<p>Метод проверяет существование и доступность файла, определяет его MIME-тип и отправляет содержимое файла через HTTP. Если файл не найден или недоступен, возвращается HTTP-статус 404. Если возникли проблемы с чтением файла или определением MIME-типа, возвращается HTTP-статус 500. Этот метод является защищённым и предназначен для использования внутри класса или его наследников. Основная логика метода вызывается через публичный метод image_attach(). Метод завершает выполнение скрипта после отправки заголовков и содержимого файла.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$full_path</td><td>Полный путь к файлу. Путь должен быть абсолютным, и файл должен существовать и быть доступным для чтения. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$name_file</td><td>Имя файла для заголовка Content-Disposition. Имя должно быть корректным (например, без запрещённых символов).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>void Метод ничего не возвращает. Завершает выполнение скрипта после отправки заголовков и содержимого файла.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод завершает выполнение скрипта (<code>exit</code>), отправляя заголовки и содержимое файла.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Вызов защищённого метода внутри класса или наследника</span></div>
<div class="line">$this-&gt;_image_attach_internal(<span class="stringliteral">&#39;/path/to/image.jpg&#39;</span>, <span class="stringliteral">&#39;example.jpg&#39;</span>);</div>
</div><!-- fragment --> <dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>См. также</dt><dd><a class="el" href="../../db/d02/namespacePhotoRigma_1_1Include.html#a2d74c46a21e4ce612a98eee60981aef0" title="Записывает сообщение об ошибке в лог-файл и, при необходимости, завершает выполнение скрипта.">PhotoRigma\Include\log_in_file()</a> Функция для логирования ошибок. </dd>
<dd>
<a class="el" href="../../d7/d53/classPhotoRigma_1_1Classes_1_1Work.html#a8ecb9d3a6cba675b7a2d72ddc14b53f3" title="Очистка строки от HTML-тегов и специальных символов.">PhotoRigma\Classes\Work\clean_field()</a> Публичный метод-редирект для вызова этой логики.</dd>
<dd>
<a class="el" href="../../d2/daa/interfacePhotoRigma_1_1Classes_1_1Work__Image__Interface.html#aeabe138e0704bd8403da0faf894ad0df" title="Вывод изображения через HTTP.">PhotoRigma\Classes\Work_Image\image_attach()</a> Публичный метод-редирект для вызова этой логики. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a> строка <a class="el" href="../../de/d67/work__image_8php_source.html#l01012">1012</a></p>

<p class="reference">Используется в <a class="el" href="../../de/d67/work__image_8php_source.html#l01168">_image_resize_internal()</a>.</p>

</div>
</div>
<a id="a6733eb5f605d09eaede9845835d71c4e" name="a6733eb5f605d09eaede9845835d71c4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6733eb5f605d09eaede9845835d71c4e">&#9670;&#160;</a></span>exit</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">exit</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a> строка <a class="el" href="../../de/d67/work__image_8php_source.html#l01054">1054</a></p>

</div>
</div>
<a id="a09a081b5d674123079734cef551329c9" name="a09a081b5d674123079734cef551329c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09a081b5d674123079734cef551329c9">&#9670;&#160;</a></span>MAX_IMAGE_HEIGHT</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int MAX_IMAGE_HEIGHT = 5000</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Максимальная высота изображения (в пикселях) </p>

<p class="definition">См. определение в файле <a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a> строка <a class="el" href="../../de/d67/work__image_8php_source.html#l00435">435</a></p>

</div>
</div>
<a id="a030bd442b445d4a25e28afd6b37accc6" name="a030bd442b445d4a25e28afd6b37accc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a030bd442b445d4a25e28afd6b37accc6">&#9670;&#160;</a></span>MAX_IMAGE_WIDTH</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int MAX_IMAGE_WIDTH = 5000</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Максимальная ширина изображения (в пикселях) </p>

<p class="definition">См. определение в файле <a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a> строка <a class="el" href="../../de/d67/work__image_8php_source.html#l00434">434</a></p>

</div>
</div>
<hr/>Объявления и описания членов класса находятся в файле:<ul>
<li>include/<a class="el" href="../../de/d67/work__image_8php_source.html">work_image.php</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../de/d90/namespacePhotoRigma.html">PhotoRigma</a></li><li class="navelem"><a class="el" href="../../d6/dc3/namespacePhotoRigma_1_1Classes.html">Classes</a></li><li class="navelem"><a class="el" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html">Work_Image</a></li>
    <li class="footer">Создано системой <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
