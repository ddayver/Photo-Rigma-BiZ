<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Photo-Rigma-BiZ: Интерфейс Work_Image_Interface</title>
<link rel="icon" href="../../favicon.ico" type="image/x-icon" />
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo-1.png"/></td>
  <td id="projectalign">
   <div id="projectname">Photo-Rigma-BiZ<span id="projectnumber">&#160;0.4.4</span>
   </div>
   <div id="projectbrief">Gallery_Photo-Rigma-BiZ</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Поиск',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d1/de5/interfacePhotoRigma_1_1Interfaces_1_1Work__Image__Interface.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Загрузка...</div>
<div class="SRStatus" id="Searching">Поиск...</div>
<div class="SRStatus" id="NoMatches">Не найдено</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Открытые члены</a> &#124;
<a href="../../dd/dd7/interfacePhotoRigma_1_1Interfaces_1_1Work__Image__Interface-members.html">Полный список членов класса</a>  </div>
  <div class="headertitle"><div class="title">Интерфейс Work_Image_Interface</div></div>
</div><!--header-->
<div class="contents">

<p>Интерфейс для работы с изображениями.  
 <a href="#details">Подробнее...</a></p>
<div id="dynsection-0" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Граф наследования:Work_Image_Interface:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../db/d9c/interfacePhotoRigma_1_1Interfaces_1_1Work__Image__Interface__inherit__graph.png" border="0" usemap="#aWork__Image__Interface_inherit__map" alt="Inheritance graph"/></div>
<map name="aWork__Image__Interface_inherit__map" id="aWork__Image__Interface_inherit__map">
<area shape="rect" title="Интерфейс для работы с изображениями." alt="" coords="5,5,158,30"/>
<area shape="rect" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html" title="Класс для работы с изображениями." alt="" coords="34,78,129,103"/>
<area shape="poly" title=" " alt="" coords="84,46,84,78,79,78,79,46"/>
</map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">см. легенду</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Открытые члены</h2></td></tr>
<tr class="memitem:a096b7e5c3f9fb908fbb30e1adc2ac61b" id="r_a096b7e5c3f9fb908fbb30e1adc2ac61b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a096b7e5c3f9fb908fbb30e1adc2ac61b">size_image</a> (string $path_image)</td></tr>
<tr class="memdesc:a096b7e5c3f9fb908fbb30e1adc2ac61b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Вычисляет размеры для вывода эскиза изображения.  <br /></td></tr>
<tr class="separator:a096b7e5c3f9fb908fbb30e1adc2ac61b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af37eb2b0693905dd71dd677f86d47831" id="r_af37eb2b0693905dd71dd677f86d47831"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af37eb2b0693905dd71dd677f86d47831">image_resize</a> (string $full_path, string $thumbnail_path)</td></tr>
<tr class="memdesc:af37eb2b0693905dd71dd677f86d47831"><td class="mdescLeft">&#160;</td><td class="mdescRight">Изменяет размер изображения.  <br /></td></tr>
<tr class="separator:af37eb2b0693905dd71dd677f86d47831"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfcd1cb7963a860013ca9ca1898f54f1" id="r_adfcd1cb7963a860013ca9ca1898f54f1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adfcd1cb7963a860013ca9ca1898f54f1">no_photo</a> ()</td></tr>
<tr class="memdesc:adfcd1cb7963a860013ca9ca1898f54f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Возвращает данные для отсутствующего изображения.  <br /></td></tr>
<tr class="separator:adfcd1cb7963a860013ca9ca1898f54f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeabe138e0704bd8403da0faf894ad0df" id="r_aeabe138e0704bd8403da0faf894ad0df"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aeabe138e0704bd8403da0faf894ad0df">image_attach</a> (string $full_path, string $name_file)</td></tr>
<tr class="memdesc:aeabe138e0704bd8403da0faf894ad0df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Выводит изображение через HTTP.  <br /></td></tr>
<tr class="separator:aeabe138e0704bd8403da0faf894ad0df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89d4e7cb491d0c91282d16ff5abe3138" id="r_a89d4e7cb491d0c91282d16ff5abe3138"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a89d4e7cb491d0c91282d16ff5abe3138">fix_file_extension</a> (string $full_path)</td></tr>
<tr class="memdesc:a89d4e7cb491d0c91282d16ff5abe3138"><td class="mdescLeft">&#160;</td><td class="mdescRight">Корректировка расширения файла в соответствии с его MIME-типом.  <br /></td></tr>
<tr class="separator:a89d4e7cb491d0c91282d16ff5abe3138"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaaf358ddc8223e4a5a479f645fc43da8" id="r_aaaf358ddc8223e4a5a479f645fc43da8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaaf358ddc8223e4a5a479f645fc43da8">remove_directory</a> (string $path)</td></tr>
<tr class="memdesc:aaaf358ddc8223e4a5a479f645fc43da8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Удаляет директорию и её содержимое, предварительно проверяя права доступа.  <br /></td></tr>
<tr class="separator:aaaf358ddc8223e4a5a479f645fc43da8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a935337e705b7a1b9ea422d2e04932109" id="r_a935337e705b7a1b9ea422d2e04932109"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a935337e705b7a1b9ea422d2e04932109">create_directory</a> (string $directory_name)</td></tr>
<tr class="memdesc:a935337e705b7a1b9ea422d2e04932109"><td class="mdescLeft">&#160;</td><td class="mdescRight">Создаёт директории для категории и копирует файлы <code><a class="el" href="../../de/d20/index_8php.html" title="Точка входа в приложение PhotoRigma.">index.php</a></code>.  <br /></td></tr>
<tr class="separator:a935337e705b7a1b9ea422d2e04932109"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Подробное описание</h2>
<div class="textblock"><p>Интерфейс для работы с изображениями. </p>
<p>Этот интерфейс определяет контракт для классов, реализующих методы для выполнения операций с изображениями:</p><ul>
<li>Вычисление размеров эскизов (<code>size_image</code>).</li>
<li>Изменение размеров изображений (<code>image_resize</code>).</li>
<li>Обработка отсутствующих изображений (<code>no_photo</code>).</li>
<li>Вывод изображений через HTTP (<code>image_attach</code>).</li>
<li>Корректировка расширения файла в соответствии с его MIME-типом (<code>fix_file_extension</code>).</li>
<li>Удаление директории и её содержимого (<code>remove_directory</code>).</li>
<li>Создание директорий для категории и копирование файлов <code><a class="el" href="../../de/d20/index_8php.html" title="Точка входа в приложение PhotoRigma.">index.php</a></code> (<code>create_directory</code>). Методы интерфейса предназначены для использования в различных частях приложения, таких как обработка изображений, управление файловой системой и вывод изображений через HTTP.</li>
</ul>
<dl class="section note"><dt>Заметки</dt><dd>Используются константы:<ul>
<li><code>MAX_IMAGE_WIDTH = 5000</code>: Максимальная ширина изображения (в пикселях).</li>
<li><code>MAX_IMAGE_HEIGHT = 5000</code>: Максимальная высота изображения (в пикселях).</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Некорректная реализация методов может привести к ошибкам при работе с изображениями или файловой системой, особенно при обработке пользовательского ввода или больших файлов. </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../d1/df9/Work__Image__Interface_8php_source.html">Work_Image_Interface.php</a> строка <a class="el" href="../../d1/df9/Work__Image__Interface_8php_source.html#l00087">87</a></p>
</div><h2 class="groupheader">Методы</h2>
<a id="a935337e705b7a1b9ea422d2e04932109" name="a935337e705b7a1b9ea422d2e04932109"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a935337e705b7a1b9ea422d2e04932109">&#9670;&#160;</a></span>create_directory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">create_directory </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$directory_name</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Создаёт директории для категории и копирует файлы <code><a class="el" href="../../de/d20/index_8php.html" title="Точка входа в приложение PhotoRigma.">index.php</a></code>. </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Формирует пути для директорий галереи и миниатюр на основе конфигурации.</li>
<li>Проверяет права доступа к родительским директориям.</li>
<li>Рекурсивно создаёт директории для галереи и миниатюр.</li>
<li>Копирует и модифицирует файлы <code><a class="el" href="../../de/d20/index_8php.html" title="Точка входа в приложение PhotoRigma.">index.php</a></code> для новых директорий.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$directory_name</td><td>Имя директории:<ul>
<li>Должен быть строкой, содержащей только допустимые символы для имён директорий.</li>
<li>Не должен содержать запрещённых символов (например, <code>\/:*?"&lt;&gt;|&lt;/tt&gt;).

@return bool Возвращает &lt;tt&gt;true&lt;/tt&gt;, если директории успешно созданы и файлы скопированы.

@throws RuntimeException Выбрасывается в следующих случаях:
                          - Если родительская директория недоступна для записи.
                          - Если не удалось создать директории.
                          - Если исходные файлы &lt;tt&gt;index.php&lt;/tt&gt; не существуют.
                          - Если не удалось прочитать или записать файлы &lt;tt&gt;index.php&lt;/tt&gt;.

@warning Используйте этот метод с осторожностью, так как он создаёт директории и изменяет файлы.

Пример использования:
@code 
// Создание объекта
$imageHelper = new Work_Image();

// Создание директорий для новой категории
$directoryName = 'new_category';
$result = $imageHelper-&gt;create_directory($directoryName);
if ($result) {
    echo "Директории успешно созданы!"; }  </code></li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

<p>Замещается в <a class="el" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a935337e705b7a1b9ea422d2e04932109">Work_Image</a>.</p>

</div>
</div>
<a id="a89d4e7cb491d0c91282d16ff5abe3138" name="a89d4e7cb491d0c91282d16ff5abe3138"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89d4e7cb491d0c91282d16ff5abe3138">&#9670;&#160;</a></span>fix_file_extension()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fix_file_extension </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$full_path</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Корректировка расширения файла в соответствии с его MIME-типом. </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет путь к файлу на корректность.</li>
<li>Определяет реальный MIME-тип файла.</li>
<li>Проверяет соответствие MIME-типа поддерживаемым форматам:<ul>
<li>'image/jpeg' -&gt; 'jpg'</li>
<li>'image/png' -&gt; 'png'</li>
<li>'image/gif' -&gt; 'gif'</li>
<li>'image/webp' -&gt; 'webp'</li>
<li>'image/tiff' -&gt; 'tiff'</li>
<li>'image/svg+xml' -&gt; 'svg'</li>
<li>'image/bmp' -&gt; 'bmp'</li>
<li>'image/x-icon' -&gt; 'ico'</li>
<li>'image/avif' -&gt; 'avif'</li>
<li>'image/heic' -&gt; 'heic'</li>
<li>'image/vnd.adobe.photoshop' -&gt; 'psd'</li>
<li>'image/x-canon-cr2' -&gt; 'cr2'</li>
<li>'image/x-nikon-nef' -&gt; 'nef'</li>
<li>'image/x-xbitmap' -&gt; 'xbm'</li>
<li>'image/x-portable-anymap' -&gt; 'pnm'</li>
<li>'image/x-pcx' -&gt; 'pcx'</li>
</ul>
</li>
<li>Если расширение отсутствует или некорректное, оно добавляется или исправляется.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$full_path</td><td>Полный путь к файлу:<ul>
<li>Путь должен быть абсолютным.</li>
<li>Файл должен существовать и быть доступным для чтения.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>string Полный путь к файлу с правильным расширением:<ul>
<li>Если расширение было изменено или добавлено, возвращается новый путь.</li>
<li>Если расширение уже корректное, возвращается исходный путь.</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Выбрасывается, если путь к файлу имеет недопустимый формат. </td></tr>
    <tr><td class="paramname">RuntimeException</td><td>Выбрасывается, если:<ul>
<li>MIME-тип файла не поддерживается.</li>
<li>Файл недоступен для чтения. </li>
</ul>
</td></tr>
    <tr><td class="paramname">Exception</td><td>Выбрасывается при возникновении ошибок логирования информации.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод завершает выполнение с ошибкой, если MIME-тип файла не поддерживается. Убедитесь, что файл существует и доступен для чтения перед вызовом метода.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта</span></div>
<div class="line">$imageHelper = <span class="keyword">new</span> Work_Image();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Корректировка расширения файла</span></div>
<div class="line">$full_path = <span class="stringliteral">&#39;/path/to/file_without_extension&#39;</span>;</div>
<div class="line">$corrected_path = $imageHelper-&gt;fix_file_extension($full_path);</div>
<div class="line">echo <span class="stringliteral">&quot;Исправленный путь: {$corrected_path}&quot;</span>;</div>
</div><!-- fragment --> 
<p>Замещается в <a class="el" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a89d4e7cb491d0c91282d16ff5abe3138">Work_Image</a>.</p>

</div>
</div>
<a id="aeabe138e0704bd8403da0faf894ad0df" name="aeabe138e0704bd8403da0faf894ad0df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeabe138e0704bd8403da0faf894ad0df">&#9670;&#160;</a></span>image_attach()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">image_attach </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$full_path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$name_file</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Выводит изображение через HTTP. </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет существование и доступность файла:<ul>
<li>Если файл не существует или недоступен для чтения, отправляется HTTP-статус <code>404 Not Found</code>.</li>
</ul>
</li>
<li>Определяет MIME-тип файла:<ul>
<li>Если MIME-тип не соответствует изображению, отправляется HTTP-статус <code>500 Internal Server Error</code>.</li>
</ul>
</li>
<li>Проверяет размер файла:<ul>
<li>Если размер превышает 10 МБ или неизвестен, отправляется HTTP-статус <code>413 Payload Too Large</code>.</li>
</ul>
</li>
<li>Устанавливает заголовки для вывода изображения:<ul>
<li><code>Content-Type</code>: MIME-тип файла.</li>
<li><code>Content-Disposition</code>: Имя файла для заголовка.</li>
<li><code>Content-Length</code>: Размер файла.</li>
<li>Дополнительные заголовки безопасности.</li>
</ul>
</li>
<li>Отправляет содержимое файла через HTTP.</li>
<li>Завершает выполнение скрипта после отправки заголовков и содержимого файла.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$full_path</td><td>Полный путь к файлу:<ul>
<li>Путь должен быть абсолютным.</li>
<li>Файл должен существовать и быть доступным для чтения. </li>
</ul>
</td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$name_file</td><td>Имя файла для заголовка <code>Content-Disposition</code>:<ul>
<li>Имя должно быть корректным (например, без запрещённых символов).</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>void Метод ничего не возвращает. Завершает выполнение скрипта после отправки заголовков и содержимого файла.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td>Выбрасывается при возникновении ошибок логирования информации.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Метод завершает выполнение скрипта (<code>exit</code>), отправляя заголовки и содержимое файла. Дополнительные заголовки безопасности:<ul>
<li><code>X-Content-Type-Options: nosniff</code></li>
<li><code>X-Frame-Options: DENY</code></li>
<li><code>X-XSS-Protection: 1; mode=block</code></li>
<li><code>Referrer-Policy: no-referrer</code></li>
<li>&lsquo;Content-Security-Policy: default-src 'self&rsquo;; img-src 'self' data:;`</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод завершает выполнение скрипта (<code>exit</code>), отправляя заголовки и содержимое файла. Убедитесь, что файл существует и доступен для чтения перед вызовом метода.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта</span></div>
<div class="line">$imageHelper = <span class="keyword">new</span> Work_Image();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Вывод изображения через HTTP</span></div>
<div class="line">$imageHelper-&gt;image_attach(<span class="stringliteral">&#39;/path/to/image.jpg&#39;</span>, <span class="stringliteral">&#39;example.jpg&#39;</span>);</div>
</div><!-- fragment --> 
</div>
</div>
<a id="af37eb2b0693905dd71dd677f86d47831" name="af37eb2b0693905dd71dd677f86d47831"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af37eb2b0693905dd71dd677f86d47831">&#9670;&#160;</a></span>image_resize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">image_resize </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$full_path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$thumbnail_path</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Изменяет размер изображения. </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет корректность путей к исходному изображению и файлу эскиза.</li>
<li>Проверяет существование и доступность исходного изображения для чтения.</li>
<li>Проверяет доступность директории для сохранения эскиза для записи.</li>
<li>Получает размеры исходного изображения и проверяет их на соответствие максимальным значениям.</li>
<li>Рассчитывает размеры эскиза на основе конфигурации (<code>temp_photo_w</code>, <code>temp_photo_h</code>).</li>
<li>Если файл эскиза уже существует и его размеры совпадают с расчётными, метод завершает работу.</li>
<li>Определяет MIME-тип исходного изображения.</li>
<li>Выбирает библиотеку для обработки изображения в следующем порядке приоритета:<ul>
<li>GraphicsMagick (если доступен),</li>
<li>ImageMagick (если доступен),</li>
<li>GD (если предыдущие библиотеки недоступны или вызвали ошибку).</li>
</ul>
</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$full_path</td><td>Путь к исходному изображению:<ul>
<li>Путь должен быть абсолютным.</li>
<li>Файл должен существовать и быть доступным для чтения. </li>
</ul>
</td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$thumbnail_path</td><td>Путь для сохранения эскиза:<ul>
<li>Путь должен быть абсолютным.</li>
<li>Директория должна быть доступна для записи.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>bool True, если операция выполнена успешно, иначе False.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>Выбрасывается, если пути к файлам некорректны или имеют недопустимый формат. </td></tr>
    <tr><td class="paramname">RuntimeException</td><td>Выбрасывается, если возникли ошибки при проверке файлов, директорий или размеров изображения. </td></tr>
    <tr><td class="paramname">Exception</td><td>Выбрасывается при возникновении ошибок логирования информации.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Метод использует следующие константы класса для ограничения размеров исходного изображения:<ul>
<li><code>MAX_IMAGE_WIDTH</code>: Максимальная ширина исходного изображения (в пикселях). Значение: 5000.</li>
<li><code>MAX_IMAGE_HEIGHT</code>: Максимальная высота исходного изображения (в пикселях). Значение: 5000.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод зависит от корректности данных в конфигурации (<code>temp_photo_w</code>, <code>temp_photo_h</code>). Если эти параметры некорректны, результат может быть непредсказуемым. Убедитесь, что пути к файлам и директориям корректны перед вызовом метода.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта</span></div>
<div class="line">$imageHelper = <span class="keyword">new</span> Work_Image();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Изменение размера изображения</span></div>
<div class="line">$full_path = <span class="stringliteral">&#39;/path/to/source_image.jpg&#39;</span>;</div>
<div class="line">$thumbnail_path = <span class="stringliteral">&#39;/path/to/thumbnail.jpg&#39;</span>;</div>
<div class="line">$success = $imageHelper-&gt;image_resize($full_path, $thumbnail_path);</div>
<div class="line"><span class="keywordflow">if</span> ($success) {</div>
<div class="line">    echo <span class="stringliteral">&quot;Эскиз успешно создан.&quot;</span>;</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    echo <span class="stringliteral">&quot;Ошибка при создании эскиза.&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
<p>Замещается в <a class="el" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#af37eb2b0693905dd71dd677f86d47831">Work_Image</a>.</p>

</div>
</div>
<a id="adfcd1cb7963a860013ca9ca1898f54f1" name="adfcd1cb7963a860013ca9ca1898f54f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfcd1cb7963a860013ca9ca1898f54f1">&#9670;&#160;</a></span>no_photo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">no_photo </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Возвращает данные для отсутствующего изображения. </p>
<p>Этот метод формирует массив данных, который используется для представления информации об отсутствующем изображении. Это может быть полезно, например, если изображение не найдено или недоступно. Метод использует конфигурацию приложения для формирования URL-адресов и путей:</p><ul>
<li><code>site_url</code>: Базовый URL сайта.</li>
<li><code>site_dir</code>: Базовая директория сайта.</li>
<li><code>gallery_folder</code>: Директория для хранения изображений.</li>
<li><code>thumbnail_folder</code>: Директория для хранения эскизов.</li>
</ul>
<dl class="section return"><dt>Возвращает</dt><dd>array Массив данных об изображении или его отсутствии:<ul>
<li>'url' (string): URL полноразмерного изображения.</li>
<li>'thumbnail_url' (string): URL эскиза изображения.</li>
<li>'name' (string): Название изображения. Значение по умолчанию: &lsquo;'No photo&rsquo;&lsquo;.</li>
<li>'description&rsquo; (string): Описание изображения. Значение по умолчанию: &lsquo;'No photo available&rsquo;&lsquo;.</li>
<li>'category_name&rsquo; (string): Название категории. Значение по умолчанию: &lsquo;'No category&rsquo;&lsquo;.</li>
<li>'category_description&rsquo; (string): Описание категории. Значение по умолчанию: &lsquo;'No category available&rsquo;&lsquo;.</li>
<li>'rate&rsquo; (string): Рейтинг изображения. Значение по умолчанию: &lsquo;'Rate: 0/0&rsquo;&lsquo;.</li>
<li>'url_user&rsquo; (string): URL пользователя. Значение по умолчанию: пустая строка (&lsquo;&rsquo;'&lsquo;).</li>
<li>'real_name&rsquo; (string): Имя пользователя. Значение по умолчанию: &lsquo;'No user&rsquo;&lsquo;.</li>
<li>'full_path&rsquo; (string): Полный путь к изображению. Формируется на основе конфигурации.</li>
<li>'thumbnail_path' (string): Полный путь к эскизу. Формируется на основе конфигурации.</li>
<li>'file' (string): Имя файла. Значение по умолчанию: &lsquo;'no_foto.png&rsquo;`.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод зависит от корректности данных в конфигурации (<code>site_url</code>, <code>site_dir</code>, <code>gallery_folder</code>, <code>thumbnail_folder</code>). Если эти параметры некорректны, результат может быть непредсказуемым.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта</span></div>
<div class="line">$imageHelper = <span class="keyword">new</span> Work_Image();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Получение данных для отсутствующего изображения</span></div>
<div class="line">$noPhotoData = $imageHelper-&gt;no_photo();</div>
<div class="line">echo <span class="stringliteral">&quot;URL изображения: {$noPhotoData[&#39;url&#39;]}\n&quot;</span>;</div>
<div class="line">echo <span class="stringliteral">&quot;Описание: {$noPhotoData[&#39;description&#39;]}\n&quot;</span>;</div>
</div><!-- fragment --> 
<p>Замещается в <a class="el" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#adfcd1cb7963a860013ca9ca1898f54f1">Work_Image</a>.</p>

</div>
</div>
<a id="aaaf358ddc8223e4a5a479f645fc43da8" name="aaaf358ddc8223e4a5a479f645fc43da8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaaf358ddc8223e4a5a479f645fc43da8">&#9670;&#160;</a></span>remove_directory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">remove_directory </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$path</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Удаляет директорию и её содержимое, предварительно проверяя права доступа. </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет существование указанной директории.</li>
<li>Проверяет права доступа к директории (должна быть доступна для записи).</li>
<li>Рекурсивно удаляет все файлы и поддиректории внутри директории.</li>
<li>Удаляет саму директорию.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$path</td><td>Путь к директории:<ul>
<li>Должен быть строкой, указывающей на существующую директорию.</li>
<li>Директория должна быть доступна для записи.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>bool Возвращает <code>true</code>, если директория успешно удалена.</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">RuntimeException</td><td>Выбрасывается в следующих случаях:<ul>
<li>Если директория не существует.</li>
<li>Если директория недоступна для записи.</li>
<li>Если не удалось удалить файл или поддиректорию внутри директории.</li>
<li>Если не удалось удалить саму директорию.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Заметки</dt><dd>Метод рекурсивно удаляет все файлы и поддиректории внутри директории.</dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Используйте этот метод с осторожностью, так как удаление директории необратимо. Убедитесь, что переданная директория действительно должна быть удалена.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта</span></div>
<div class="line">$imageHelper = <span class="keyword">new</span> Work_Image();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Удаление директории</span></div>
<div class="line">$path = <span class="stringliteral">&#39;/path/to/directory&#39;</span>;</div>
<div class="line">$result = $imageHelper-&gt;remove_directory($path);</div>
<div class="line"><span class="keywordflow">if</span> ($result) {</div>
<div class="line">    echo <span class="stringliteral">&quot;Директория успешно удалена!&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
<p>Замещается в <a class="el" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#aaaf358ddc8223e4a5a479f645fc43da8">Work_Image</a>.</p>

</div>
</div>
<a id="a096b7e5c3f9fb908fbb30e1adc2ac61b" name="a096b7e5c3f9fb908fbb30e1adc2ac61b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a096b7e5c3f9fb908fbb30e1adc2ac61b">&#9670;&#160;</a></span>size_image()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_image </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$path_image</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Вычисляет размеры для вывода эскиза изображения. </p>
<p>Этот метод выполняет следующие действия:</p><ol type="1">
<li>Проверяет существование файла.</li>
<li>Получает реальные размеры изображения.</li>
<li>Вычисляет ширину и высоту эскиза на основе реальных размеров изображения и конфигурационных параметров:<ul>
<li><code>temp_photo_w</code>: Целевая ширина эскиза (в пикселях).</li>
<li><code>temp_photo_h</code>: Целевая высота эскиза (в пикселях).</li>
</ul>
</li>
<li>Если изображение меньше целевого размера, возвращаются оригинальные размеры.</li>
<li>В противном случае размеры масштабируются пропорционально.</li>
</ol>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$path_image</td><td>Путь к файлу изображения:<ul>
<li>Путь должен быть абсолютным.</li>
<li>Файл должен существовать и быть доступным для чтения.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>array Массив с шириной и высотой эскиза:<ul>
<li>Ключ &lsquo;'width&rsquo;<code>(int): Ширина эскиза (целое число ≥ 0).</code></li>
<li><code>Ключ</code>'height'` (int): Высота эскиза (целое число ≥ 0). Размеры могут совпадать с оригинальными размерами изображения, если оно меньше целевого размера.</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">RuntimeException</td><td>Выбрасывается в следующих случаях:<ul>
<li>Если файл не существует.</li>
<li>Если не удалось получить размеры изображения.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Метод зависит от корректности данных в конфигурации (<code>temp_photo_w</code> и <code>temp_photo_h</code>). Если эти параметры некорректны, результат может быть непредсказуемым.</dd></dl>
<p>Пример использования: </p><div class="fragment"><div class="line"><span class="comment">// Создание объекта</span></div>
<div class="line">$imageHelper = <span class="keyword">new</span> Work_Image();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Вычисление размеров эскиза для изображения</span></div>
<div class="line">$path = <span class="stringliteral">&#39;/path/to/image.jpg&#39;</span>;</div>
<div class="line">$sizes = $imageHelper-&gt;size_image($path);</div>
<div class="line">echo <span class="stringliteral">&quot;Ширина: {$sizes[&#39;width&#39;]}, Высота: {$sizes[&#39;height&#39;]}&quot;</span>;</div>
</div><!-- fragment --> 
<p>Замещается в <a class="el" href="../../d9/dc1/classPhotoRigma_1_1Classes_1_1Work__Image.html#a096b7e5c3f9fb908fbb30e1adc2ac61b">Work_Image</a>.</p>

</div>
</div>
<hr/>Объявления и описания членов интерфейса находятся в файле:<ul>
<li>include/<a class="el" href="../../d1/df9/Work__Image__Interface_8php_source.html">Work_Image_Interface.php</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../de/d90/namespacePhotoRigma.html">PhotoRigma</a></li><li class="navelem"><a class="el" href="../../dd/db0/namespacePhotoRigma_1_1Interfaces.html">Interfaces</a></li><li class="navelem"><a class="el" href="../../d1/de5/interfacePhotoRigma_1_1Interfaces_1_1Work__Image__Interface.html">Work_Image_Interface</a></li>
    <li class="footer">Документация по Photo-Rigma-BiZ. Последние изменения: Пн 12 Май 2025. Создано системой <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
